<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Barotrauma Client Doc: DebugConsole.cs Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Barotrauma Client Doc
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('_barotrauma_shared_2_shared_source_2_debug_console_8cs_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">BarotraumaShared/SharedSource/DebugConsole.cs</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_barotrauma.html">Barotrauma</a>.<a class="code" href="namespace_barotrauma_1_1_extensions.html">Extensions</a>;</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_barotrauma.html">Barotrauma</a>.<a class="code" href="namespace_barotrauma_1_1_items.html">Items</a>.<a class="code" href="namespace_barotrauma_1_1_items_1_1_components.html">Components</a>;</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_barotrauma.html">Barotrauma</a>.<a class="code" href="namespace_barotrauma_1_1_networking.html">Networking</a>;</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_barotrauma.html">Barotrauma</a>.<a class="code" href="namespace_barotrauma_1_1_steam.html">Steam</a>;</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="keyword">using</span> FarseerPhysics;</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="keyword">using</span> Microsoft.Xna.Framework;</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="keyword">using</span> System;</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="keyword">using</span> System.Collections.Generic;</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="keyword">using</span> System.ComponentModel;</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="keyword">using</span> System.Globalization;</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_barotrauma.html">Barotrauma</a>.<a class="code" href="namespace_barotrauma_1_1_i_o.html">IO</a>;</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="keyword">using</span> System.Linq;</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="keyword">using</span> System.Text;</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_barotrauma.html">Barotrauma</a>.<a class="code" href="namespace_barotrauma_1_1_map_creatures.html">MapCreatures</a>.<a class="code" href="namespace_barotrauma_1_1_map_creatures_1_1_behavior.html">Behavior</a>;</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160; </div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespace_barotrauma.html">Barotrauma</a></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;{</div>
<div class="line"><a name="l00018"></a><span class="lineno"><a class="line" href="struct_barotrauma_1_1_colored_text.html">   18</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="struct_barotrauma_1_1_colored_text.html">ColoredText</a></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;    {</div>
<div class="line"><a name="l00020"></a><span class="lineno"><a class="line" href="struct_barotrauma_1_1_colored_text.html#ad7f88a7e81afb83c883c7134b715f5d8">   20</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">string</span> <a class="code" href="struct_barotrauma_1_1_colored_text.html#ad7f88a7e81afb83c883c7134b715f5d8">Text</a>;</div>
<div class="line"><a name="l00021"></a><span class="lineno"><a class="line" href="struct_barotrauma_1_1_colored_text.html#a283f2ad5e8e5812eff469cec474674fb">   21</a></span>&#160;        <span class="keyword">public</span> Color <a class="code" href="struct_barotrauma_1_1_colored_text.html#a283f2ad5e8e5812eff469cec474674fb">Color</a>;</div>
<div class="line"><a name="l00022"></a><span class="lineno"><a class="line" href="struct_barotrauma_1_1_colored_text.html#af8277a0d6446c9e9ef3f0572de673f8f">   22</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">bool</span> <a class="code" href="struct_barotrauma_1_1_colored_text.html#af8277a0d6446c9e9ef3f0572de673f8f">IsCommand</a>;</div>
<div class="line"><a name="l00023"></a><span class="lineno"><a class="line" href="struct_barotrauma_1_1_colored_text.html#aa10fe568d3f6cc5a4fd9f46f056b0de0">   23</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">bool</span> <a class="code" href="struct_barotrauma_1_1_colored_text.html#aa10fe568d3f6cc5a4fd9f46f056b0de0">IsError</a>;</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160; </div>
<div class="line"><a name="l00025"></a><span class="lineno"><a class="line" href="struct_barotrauma_1_1_colored_text.html#a080ba7826281e8a67e50b14780f8f033">   25</a></span>&#160;        <span class="keyword">public</span> readonly <span class="keywordtype">string</span> <a class="code" href="struct_barotrauma_1_1_colored_text.html#a080ba7826281e8a67e50b14780f8f033">Time</a>;</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160; </div>
<div class="line"><a name="l00027"></a><span class="lineno"><a class="line" href="struct_barotrauma_1_1_colored_text.html#a34f37e5adcaa519c94d1d98f48909fbb">   27</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="struct_barotrauma_1_1_colored_text.html#a34f37e5adcaa519c94d1d98f48909fbb">ColoredText</a>(<span class="keywordtype">string</span> text, Color color, <span class="keywordtype">bool</span> isCommand, <span class="keywordtype">bool</span> isError)</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;        {</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;            this.Text = text;</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;            this.Color = color;</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;            this.IsCommand = isCommand;</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;            this.IsError = isError;</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160; </div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;            <a class="code" href="struct_barotrauma_1_1_colored_text.html#a080ba7826281e8a67e50b14780f8f033">Time</a> = DateTime.Now.ToString();</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;        }</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    }</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160; </div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    <span class="keyword">static</span> <span class="keyword">partial class </span>DebugConsole</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    {</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;        </div>
<div class="line"><a name="l00041"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_debug_console_1_1_command.html">   41</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">partial class </span><a class="code" href="class_barotrauma_1_1_debug_console_1_1_command.html">Command</a></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;        {</div>
<div class="line"><a name="l00043"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_debug_console_1_1_command.html#a71e5a7b059e34f6431f5ee84058f3953">   43</a></span>&#160;            <span class="keyword">public</span> readonly <span class="keywordtype">string</span>[] <a class="code" href="class_barotrauma_1_1_debug_console_1_1_command.html#a71e5a7b059e34f6431f5ee84058f3953">names</a>;</div>
<div class="line"><a name="l00044"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_debug_console_1_1_command.html#a8a2e50e149252c5c0f038f4e8d2aa181">   44</a></span>&#160;            <span class="keyword">public</span> readonly <span class="keywordtype">string</span> <a class="code" href="class_barotrauma_1_1_debug_console_1_1_command.html#a8a2e50e149252c5c0f038f4e8d2aa181">help</a>;</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;            </div>
<div class="line"><a name="l00046"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_debug_console_1_1_command.html#a6dc3ca4c6afc3313a7dc664042fc0b8a">   46</a></span>&#160;            <span class="keyword">public</span> Action&lt;string[]&gt; <a class="code" href="class_barotrauma_1_1_debug_console_1_1_command.html#a6dc3ca4c6afc3313a7dc664042fc0b8a">OnExecute</a>;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160; </div>
<div class="line"><a name="l00048"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_debug_console_1_1_command.html#a25d25c4b818a7195fe49ec00e74fb875">   48</a></span>&#160;            <span class="keyword">public</span> Func&lt;string[][]&gt; <a class="code" href="class_barotrauma_1_1_debug_console_1_1_command.html#a25d25c4b818a7195fe49ec00e74fb875">GetValidArgs</a>;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160; </div>
<div class="line"><a name="l00053"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_debug_console_1_1_command.html#a458c8e5c8f7ac545eff829e7ecfd595c">   53</a></span>&#160;            <span class="keyword">public</span> readonly <span class="keywordtype">bool</span> <a class="code" href="class_barotrauma_1_1_debug_console_1_1_command.html#a458c8e5c8f7ac545eff829e7ecfd595c">IsCheat</a>;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160; </div>
<div class="line"><a name="l00058"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_debug_console_1_1_command.html#a68408cdd04bfabfc5ad995aea2dd7cd6">   58</a></span>&#160;            <span class="keyword">public</span> <a class="code" href="class_barotrauma_1_1_debug_console_1_1_command.html#a68408cdd04bfabfc5ad995aea2dd7cd6">Command</a>(<span class="keywordtype">string</span> name, <span class="keywordtype">string</span> <a class="code" href="class_barotrauma_1_1_debug_console_1_1_command.html#a8a2e50e149252c5c0f038f4e8d2aa181">help</a>, Action&lt;<span class="keywordtype">string</span>[]&gt; onExecute, Func&lt;<span class="keywordtype">string</span>[][]&gt; getValidArgs = <span class="keyword">null</span>, <span class="keywordtype">bool</span> isCheat = <span class="keyword">false</span>)</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;            {</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;                <a class="code" href="class_barotrauma_1_1_debug_console_1_1_command.html#a71e5a7b059e34f6431f5ee84058f3953">names</a> = name.Split(<span class="charliteral">&#39;|&#39;</span>);</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;                this.help = <a class="code" href="class_barotrauma_1_1_debug_console_1_1_command.html#a8a2e50e149252c5c0f038f4e8d2aa181">help</a>;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160; </div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;                this.OnExecute = onExecute;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;                </div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;                this.GetValidArgs = getValidArgs;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;                this.IsCheat = isCheat;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;            }</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160; </div>
<div class="line"><a name="l00069"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_debug_console_1_1_command.html#ad1da381d36ada5cbfde3e1fd3d53e81d">   69</a></span>&#160;            <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_barotrauma_1_1_debug_console_1_1_command.html#ad1da381d36ada5cbfde3e1fd3d53e81d">Execute</a>(<span class="keywordtype">string</span>[] args)</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;            {</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="class_barotrauma_1_1_debug_console_1_1_command.html#a6dc3ca4c6afc3313a7dc664042fc0b8a">OnExecute</a> == <span class="keyword">null</span>) { <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160; </div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;                <span class="keywordtype">bool</span> allowCheats = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="preprocessor">#if CLIENT</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;                allowCheats = <a class="code" href="class_barotrauma_1_1_game_main.html">GameMain</a>.<a class="code" href="class_barotrauma_1_1_game_main.html#a8814ae6a86758a7f6c039be0a39d921e">NetworkMember</a> == <span class="keyword">null</span> &amp;&amp; (<a class="code" href="class_barotrauma_1_1_game_main.html">GameMain</a>.<a class="code" href="class_barotrauma_1_1_game_main.html#a13ee783d841a06557ae1c460a2a35c83">GameSession</a>?.<a class="code" href="class_barotrauma_1_1_game_session.html#a6135f10f677d0c128d302969be74b847">GameMode</a> is <a class="code" href="class_barotrauma_1_1_test_game_mode.html">TestGameMode</a> || <a class="code" href="class_barotrauma_1_1_screen.html">Screen</a>.<a class="code" href="class_barotrauma_1_1_screen.html#a45c5bab8117378841bb3a09acd6bd3b6">Selected</a> is <a class="code" href="class_barotrauma_1_1_editor_screen.html">EditorScreen</a>);</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;                <span class="keywordflow">if</span> (!allowCheats &amp;&amp; !CheatsEnabled &amp;&amp; <a class="code" href="class_barotrauma_1_1_debug_console_1_1_command.html#a458c8e5c8f7ac545eff829e7ecfd595c">IsCheat</a>)</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;                {</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;                    NewMessage(<span class="stringliteral">&quot;You need to enable cheats using the command \&quot;enablecheats\&quot; before you can use the command \&quot;&quot;</span> + <a class="code" href="class_barotrauma_1_1_debug_console_1_1_command.html#a71e5a7b059e34f6431f5ee84058f3953">names</a>[0] + <span class="stringliteral">&quot;\&quot;.&quot;</span>, Color.Red);</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="preprocessor">#if USE_STEAM</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;                    NewMessage(<span class="stringliteral">&quot;Enabling cheats will disable Steam achievements during this play session.&quot;</span>, Color.Red);</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;                }</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160; </div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;                <a class="code" href="class_barotrauma_1_1_debug_console_1_1_command.html#a6dc3ca4c6afc3313a7dc664042fc0b8a">OnExecute</a>(args);</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;            }</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160; </div>
<div class="line"><a name="l00089"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_debug_console_1_1_command.html#aeb3e3e378ffb00d8cfb45f83d26ad3db">   89</a></span>&#160;            <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">int</span> <a class="code" href="class_barotrauma_1_1_debug_console_1_1_command.html#aeb3e3e378ffb00d8cfb45f83d26ad3db">GetHashCode</a>()</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;            {</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="class_barotrauma_1_1_debug_console_1_1_command.html#a71e5a7b059e34f6431f5ee84058f3953">names</a>[0].GetHashCode();</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;            }</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        }</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160; </div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        <span class="keyword">private</span> <span class="keyword">static</span> readonly Queue&lt;ColoredText&gt; queuedMessages = <span class="keyword">new</span> Queue&lt;ColoredText&gt;();</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160; </div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        <span class="keyword">static</span> partial <span class="keywordtype">void</span> ShowHelpMessage(Command command);</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        </div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> MaxMessages = 300;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160; </div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> List&lt;ColoredText&gt; Messages = <span class="keyword">new</span> List&lt;ColoredText&gt;();</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160; </div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        <span class="keyword">public</span> delegate <span class="keywordtype">void</span> QuestionCallback(<span class="keywordtype">string</span> answer);</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        <span class="keyword">private</span> <span class="keyword">static</span> QuestionCallback activeQuestionCallback;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160; </div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        <span class="keyword">private</span> <span class="keyword">static</span> readonly List&lt;Command&gt; commands = <span class="keyword">new</span> List&lt;Command&gt;();</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> List&lt;Command&gt; Commands</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        {</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;            <span class="keyword">get</span> { <span class="keywordflow">return</span> commands; }</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        }</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        </div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keywordtype">string</span> currentAutoCompletedCommand;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keywordtype">int</span> currentAutoCompletedIndex;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160; </div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">bool</span> CheatsEnabled;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160; </div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        <span class="keyword">private</span> <span class="keyword">static</span> readonly List&lt;ColoredText&gt; unsavedMessages = <span class="keyword">new</span> List&lt;ColoredText&gt;();</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        <span class="keyword">private</span> <span class="keyword">static</span> readonly <span class="keywordtype">int</span> messagesPerFile = 800;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        <span class="keyword">public</span> <span class="keyword">const</span> <span class="keywordtype">string</span> SavePath = <span class="stringliteral">&quot;ConsoleLogs&quot;</span>;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160; </div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> AssignOnExecute(<span class="keywordtype">string</span> names, Action&lt;<span class="keywordtype">string</span>[]&gt; onExecute)</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        {</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;            var matchingCommand = commands.Find(c =&gt; c.names.Intersect(names.Split(<span class="charliteral">&#39;|&#39;</span>)).Count() &gt; 0);</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;            <span class="keywordflow">if</span> (matchingCommand == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;            {</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> Exception(<span class="stringliteral">&quot;AssignOnExecute failed. Command matching the name(s) \&quot;&quot;</span> + names + <span class="stringliteral">&quot;\&quot; not found.&quot;</span>);</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;            }</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;            {</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;                matchingCommand.OnExecute = onExecute;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;            }</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        }</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160; </div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        <span class="keyword">static</span> DebugConsole()</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        {</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="preprocessor">#if DEBUG</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;            CheatsEnabled = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160; </div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;help&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, (<span class="keywordtype">string</span>[] args) =&gt;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;            {</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;                <span class="keywordflow">if</span> (args.Length == 0)</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;                {</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;                    foreach (Command c in commands)</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;                    {</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;                        if (string.IsNullOrEmpty(c.help)) continue;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;                        ShowHelpMessage(c);</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;                    }</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;                }</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;                {</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;                    var matchingCommand = commands.Find(c =&gt; c.names.Any(name =&gt; name == args[0]));</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;                    if (matchingCommand == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;                    {</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;                        NewMessage(<span class="stringliteral">&quot;Command &quot;</span> + args[0] + <span class="stringliteral">&quot; not found.&quot;</span>, Color.Red);</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;                    }</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;                    {</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;                        ShowHelpMessage(matchingCommand);</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;                    }</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;                }</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;            }, </div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;            () =&gt;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;            {</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> <span class="keywordtype">string</span>[][]</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;                {</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;                    commands.SelectMany(c =&gt; c.names).ToArray(),</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;                    Array.Empty&lt;<span class="keywordtype">string</span>&gt;()</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;                };</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;            }));</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160; </div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;            <span class="keywordtype">void</span> printMapEntityPrefabs&lt;T&gt;(IEnumerable&lt;T&gt; prefabs) where T : MapEntityPrefab</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;            {</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;                NewMessage(<span class="stringliteral">&quot;***************&quot;</span>, Color.Cyan);</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;                <span class="keywordflow">foreach</span> (T prefab <span class="keywordflow">in</span> prefabs)</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;                {</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;                    <span class="keywordflow">if</span> (prefab.Name.IsNullOrEmpty()) { <span class="keywordflow">continue</span>; }</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;                    <span class="keywordtype">string</span> text = $<span class="stringliteral">&quot;- {prefab.Name}&quot;</span>;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                    <span class="keywordflow">if</span> (prefab.Tags.Any())</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;                    {</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;                        text += $<span class="stringliteral">&quot; ({string.Join(&quot;</span>, <span class="stringliteral">&quot;, prefab.Tags)})&quot;</span>;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;                    }</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;                    <span class="keywordflow">if</span> (prefab.AllowedLinks?.Any() ?? <span class="keyword">false</span>)</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;                    {</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;                        text += $<span class="stringliteral">&quot;, Links: {string.Join(&quot;</span>, <span class="stringliteral">&quot;, prefab.AllowedLinks)}&quot;</span>;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;                    }</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                    NewMessage(text, prefab.ContentPackage == ContentPackageManager.VanillaCorePackage ? Color.Cyan : Color.Purple);</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                }</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                NewMessage(<span class="stringliteral">&quot;***************&quot;</span>, Color.Cyan);</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;            }</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160; </div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;items|itemlist&quot;</span>, <span class="stringliteral">&quot;itemlist: List all the item prefabs available for spawning.&quot;</span>, (<span class="keywordtype">string</span>[] args) =&gt;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;            {</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                printMapEntityPrefabs(ItemPrefab.Prefabs);</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;            }));</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;            </div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;itemassemblies&quot;</span>, <span class="stringliteral">&quot;itemassemblies: List all the item assemblies available for spawning.&quot;</span>, (<span class="keywordtype">string</span>[] args) =&gt;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;            {</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;                printMapEntityPrefabs(ItemAssemblyPrefab.Prefabs);</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;            }));</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160; </div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160; </div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;netstats&quot;</span>, <span class="stringliteral">&quot;netstats: Toggles the visibility of the network statistics UI.&quot;</span>, (<span class="keywordtype">string</span>[] args) =&gt;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;            {</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                <span class="keywordflow">if</span> (GameMain.NetworkMember == <span class="keyword">null</span>) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                GameMain.NetworkMember.ShowNetStats = !GameMain.NetworkMember.ShowNetStats;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;            }));</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160; </div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;spawn|spawncharacter&quot;</span>, <span class="stringliteral">&quot;spawn [creaturename/jobname] [near/inside/outside/cursor] [team (0-3)]: Spawn a creature at a random spawnpoint (use the second parameter to only select spawnpoints near/inside/outside the submarine). You can also enter the name of a job (e.g. \&quot;Mechanic\&quot;) to spawn a character with a specific job and the appropriate equipment.&quot;</span>, <span class="keyword">null</span>,</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;            () =&gt;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;            {</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;                <span class="keywordtype">string</span>[] creatureAndJobNames =</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                    CharacterPrefab.Prefabs.Select(p =&gt; p.Identifier.Value)</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;                    .Concat(JobPrefab.Prefabs.Select(p =&gt; p.Identifier.Value))</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;                    .OrderBy(s =&gt; s)</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;                    .ToArray();</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160; </div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> <span class="keywordtype">string</span>[][]</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;                {</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;                    creatureAndJobNames.ToArray(),</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;                    <span class="keyword">new</span> <span class="keywordtype">string</span>[] { <span class="stringliteral">&quot;near&quot;</span>, <span class="stringliteral">&quot;inside&quot;</span>, <span class="stringliteral">&quot;outside&quot;</span>, <span class="stringliteral">&quot;cursor&quot;</span> }</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;                };</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;            }, isCheat: <span class="keyword">true</span>));</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160; </div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;spawnitem&quot;</span>, <span class="stringliteral">&quot;spawnitem [itemname/itemidentifier] [cursor/inventory/cargo/random/[name]] [amount]: Spawn an item at the position of the cursor, in the inventory of the controlled character, in the inventory of the client with the given name, or at a random spawnpoint if the last parameter is omitted or \&quot;random\&quot;.&quot;</span>,</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;            (<span class="keywordtype">string</span>[] args) =&gt;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;            {</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;                <span class="keywordflow">try</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;                {</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="preprocessor">#if CLIENT</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;                    SpawnItem(args, Screen.Selected.Cam?.ScreenToWorld(PlayerInput.MousePosition) ?? PlayerInput.MousePosition, <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.Controlled, out <span class="keywordtype">string</span> errorMsg);</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="preprocessor">#elif SERVER</span></div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;                    SpawnItem(args, Vector2.Zero, <span class="keyword">null</span>, out <span class="keywordtype">string</span> errorMsg);</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;                    <span class="keywordflow">if</span> (!<span class="keywordtype">string</span>.IsNullOrWhiteSpace(errorMsg))</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;                    {</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;                        ThrowError(errorMsg);</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;                    }</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;                }</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;                <span class="keywordflow">catch</span> (Exception e)</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;                {</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;                    <span class="keywordtype">string</span> errorMsg = <span class="stringliteral">&quot;Failed to spawn an item. Arguments: \&quot;&quot;</span> + <span class="keywordtype">string</span>.Join(<span class="stringliteral">&quot; &quot;</span>, args) + <span class="stringliteral">&quot;\&quot;.&quot;</span>;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;                    ThrowError(errorMsg, e);</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;                    GameAnalyticsManager.AddErrorEventOnce(<span class="stringliteral">&quot;DebugConsole.SpawnItem:Error&quot;</span>, GameAnalyticsManager.ErrorSeverity.Error, errorMsg + <span class="charliteral">&#39;\n&#39;</span> + e.Message + <span class="charliteral">&#39;\n&#39;</span> + e.StackTrace.CleanupStackTrace());</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;                }</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;            },</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;            () =&gt;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;            {</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;                List&lt;string&gt; itemNames = <span class="keyword">new</span> List&lt;string&gt;();</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;                <span class="keywordflow">foreach</span> (ItemPrefab itemPrefab <span class="keywordflow">in</span> ItemPrefab.Prefabs)</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;                {</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;                    <span class="keywordflow">if</span> (!itemNames.Contains(itemPrefab.Name.Value))</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;                    {</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;                        itemNames.Add(itemPrefab.Name.Value);</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;                    }</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;                }</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160; </div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;                List&lt;string&gt; spawnPosParams = <span class="keyword">new</span> List&lt;string&gt;() { <span class="stringliteral">&quot;cursor&quot;</span>, <span class="stringliteral">&quot;inventory&quot;</span> };</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="preprocessor">#if SERVER</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;                <span class="keywordflow">if</span> (GameMain.Server != <span class="keyword">null</span>) spawnPosParams.AddRange(GameMain.Server.ConnectedClients.Select(c =&gt; c.Name));</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;                spawnPosParams.AddRange(<a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.CharacterList.Where(c =&gt; c.Inventory != <span class="keyword">null</span>).Select(c =&gt; c.Name).Distinct());</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160; </div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> <span class="keywordtype">string</span>[][]</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;                {</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;                    itemNames.ToArray(),</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;                    spawnPosParams.ToArray()</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;                };</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;            }, isCheat: <span class="keyword">true</span>));</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;            </div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;disablecrewai&quot;</span>, <span class="stringliteral">&quot;disablecrewai: Disable the AI of the NPCs in the crew.&quot;</span>, (<span class="keywordtype">string</span>[] args) =&gt;</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;            {</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;                HumanAIController.DisableCrewAI = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;                NewMessage(<span class="stringliteral">&quot;Crew AI disabled&quot;</span>, Color.Red);</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;            }, isCheat: <span class="keyword">true</span>));</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160; </div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;enablecrewai&quot;</span>, <span class="stringliteral">&quot;enablecrewai: Enable the AI of the NPCs in the crew.&quot;</span>, (<span class="keywordtype">string</span>[] args) =&gt;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;            {</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;                HumanAIController.DisableCrewAI = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;                NewMessage(<span class="stringliteral">&quot;Crew AI enabled&quot;</span>, Color.Green);</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;            }, isCheat: <span class="keyword">true</span>));</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160; </div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;disableenemyai&quot;</span>, <span class="stringliteral">&quot;disableenemyai: Disable the AI of the Enemy characters (monsters).&quot;</span>, (<span class="keywordtype">string</span>[] args) =&gt;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;            {</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;                EnemyAIController.DisableEnemyAI = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;                NewMessage(<span class="stringliteral">&quot;Enemy AI disabled&quot;</span>, Color.Red);</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;            }, isCheat: <span class="keyword">true</span>));</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160; </div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;enableenemyai&quot;</span>, <span class="stringliteral">&quot;enableenemyai: Enable the AI of the Enemy characters (monsters).&quot;</span>, (<span class="keywordtype">string</span>[] args) =&gt;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;            {</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                EnemyAIController.DisableEnemyAI = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                NewMessage(<span class="stringliteral">&quot;Enemy AI enabled&quot;</span>, Color.Green);</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;            }, isCheat: <span class="keyword">true</span>));</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160; </div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;starttraitormissionimmediately&quot;</span>, <span class="stringliteral">&quot;starttraitormissionimmediately: Skip the initial delay of the traitor mission and start one immediately.&quot;</span>, <span class="keyword">null</span>));</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160; </div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;botcount&quot;</span>, <span class="stringliteral">&quot;botcount [x]: Set the number of bots in the crew in multiplayer.&quot;</span>, <span class="keyword">null</span>));</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160; </div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;botspawnmode&quot;</span>, <span class="stringliteral">&quot;botspawnmode [fill/normal]: Set how bots are spawned in the multiplayer.&quot;</span>, <span class="keyword">null</span>));</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160; </div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;killdisconnectedtimer&quot;</span>, <span class="stringliteral">&quot;killdisconnectedtimer [seconds]: Set the time after which disconnect players&#39; characters get automatically killed.&quot;</span>, <span class="keyword">null</span>));</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160; </div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;autorestart&quot;</span>, <span class="stringliteral">&quot;autorestart [true/false]: Enable or disable round auto-restart.&quot;</span>, <span class="keyword">null</span>));</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160; </div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;autorestartinterval&quot;</span>, <span class="stringliteral">&quot;autorestartinterval [seconds]: Set how long the server waits between rounds before automatically starting a new one. If set to 0, autorestart is disabled.&quot;</span>, <span class="keyword">null</span>));</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160; </div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;autorestarttimer&quot;</span>, <span class="stringliteral">&quot;autorestarttimer [seconds]: Set the current autorestart countdown to the specified value.&quot;</span>, <span class="keyword">null</span>));</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160; </div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;startwhenclientsready&quot;</span>, <span class="stringliteral">&quot;startwhenclientsready [true/false]: Enable or disable automatically starting the round when clients are ready to start.&quot;</span>, <span class="keyword">null</span>));</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160; </div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;giveperm&quot;</span>, <span class="stringliteral">&quot;giveperm [id/steamid/endpoint/name]: Grants administrative permissions to the specified client.&quot;</span>, <span class="keyword">null</span>,</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;                () =&gt;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;                {</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;                    <span class="keywordflow">if</span> (GameMain.NetworkMember == <span class="keyword">null</span>) <span class="keywordflow">return</span> <span class="keyword">null</span>;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160; </div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">new</span> <span class="keywordtype">string</span>[][]</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;                    {</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;                        GameMain.NetworkMember.ConnectedClients.Select(c =&gt; c.Name).ToArray(),</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;                        Enum.GetValues(typeof(<a class="code" href="namespace_barotrauma_1_1_networking.html#a824d9427da6d3f19a61613a675bf8d34">ClientPermissions</a>)).Cast&lt;<a class="code" href="namespace_barotrauma_1_1_networking.html#a824d9427da6d3f19a61613a675bf8d34">ClientPermissions</a>&gt;().<a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87ae0626222614bdee31951d84c64e5e9ff">Select</a>(v =&gt; v.ToString()).ToArray()</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;                    };</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;                }));</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160; </div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;revokeperm&quot;</span>, <span class="stringliteral">&quot;revokeperm [id/steamid/endpoint/name]: Revokes administrative permissions from the specified client.&quot;</span>, <span class="keyword">null</span>,</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;                () =&gt;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;                {</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;                    <span class="keywordflow">if</span> (GameMain.NetworkMember == <span class="keyword">null</span>) <span class="keywordflow">return</span> <span class="keyword">null</span>;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160; </div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">new</span> <span class="keywordtype">string</span>[][]</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;                    {</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                        GameMain.NetworkMember.ConnectedClients.Select(c =&gt; c.Name).ToArray(),</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;                        Enum.GetValues(typeof(<a class="code" href="namespace_barotrauma_1_1_networking.html#a824d9427da6d3f19a61613a675bf8d34">ClientPermissions</a>)).Cast&lt;ClientPermissions&gt;().Select(v =&gt; v.ToString()).ToArray()</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;                    };</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;                }));</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;            </div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;giverank&quot;</span>, <span class="stringliteral">&quot;giverank [id/steamid/endpoint/name]: Assigns a specific rank (= a set of administrative permissions) to the specified client.&quot;</span>, <span class="keyword">null</span>,</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;                () =&gt;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;                {</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;                    <span class="keywordflow">if</span> (GameMain.NetworkMember == <span class="keyword">null</span>) <span class="keywordflow">return</span> <span class="keyword">null</span>;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160; </div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">new</span> <span class="keywordtype">string</span>[][]</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;                    {</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;                        GameMain.NetworkMember.ConnectedClients.Select(c =&gt; c.Name).ToArray(),</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;                        <a class="code" href="class_barotrauma_1_1_networking_1_1_permission_preset.html">PermissionPreset</a>.<a class="code" href="class_barotrauma_1_1_networking_1_1_permission_preset.html#acbcfe1e776698d5e0e40d2d314d38851">List</a>.Select(pp =&gt; pp.Name.Value).ToArray()</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;                    };</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;                }));</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160; </div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;givecommandperm&quot;</span>, <span class="stringliteral">&quot;givecommandperm [id/steamid/endpoint/name]: Gives the specified client the permission to use the specified console commands.&quot;</span>, <span class="keyword">null</span>,</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;                () =&gt;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;                {</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;                    <span class="keywordflow">if</span> (GameMain.NetworkMember == <span class="keyword">null</span>) <span class="keywordflow">return</span> <span class="keyword">null</span>;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160; </div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">new</span> <span class="keywordtype">string</span>[][]</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;                    {</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;                        GameMain.NetworkMember.ConnectedClients.Select(c =&gt; c.Name).ToArray(),</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;                        commands.Select(c =&gt; c.names[0]).Union(<span class="keyword">new</span> <span class="keywordtype">string</span>[]{ <span class="stringliteral">&quot;All&quot;</span> }).ToArray()</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;                    };</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;                }));</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160; </div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;revokecommandperm&quot;</span>, <span class="stringliteral">&quot;revokecommandperm [id/steamid/endpoint/name]: Revokes permission to use the specified console commands from the specified client.&quot;</span>, <span class="keyword">null</span>,</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;                () =&gt;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                {</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                    <span class="keywordflow">if</span> (GameMain.NetworkMember == <span class="keyword">null</span>) <span class="keywordflow">return</span> <span class="keyword">null</span>;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160; </div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">new</span> <span class="keywordtype">string</span>[][]</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;                    {</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;                        GameMain.NetworkMember.ConnectedClients.Select(c =&gt; c.Name).ToArray(),</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;                        commands.Select(c =&gt; c.names[0]).Union(<span class="keyword">new</span> <span class="keywordtype">string</span>[]{ <span class="stringliteral">&quot;All&quot;</span> }).ToArray()</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;                    };</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;                }));</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160; </div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;showperm&quot;</span>, <span class="stringliteral">&quot;showperm [id/steamid/endpoint/name]: Shows the current administrative permissions of the specified client.&quot;</span>, <span class="keyword">null</span>,</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;                () =&gt;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;                {</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;                    <span class="keywordflow">if</span> (GameMain.NetworkMember == <span class="keyword">null</span>) <span class="keywordflow">return</span> <span class="keyword">null</span>;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160; </div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">new</span> <span class="keywordtype">string</span>[][]</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;                    {</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;                        GameMain.NetworkMember.ConnectedClients.Select(c =&gt; c.Name).ToArray()</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;                    };</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;                }));</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160; </div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;respawnnow&quot;</span>, <span class="stringliteral">&quot;respawnnow: Trigger a respawn immediately if there are any clients waiting to respawn.&quot;</span>, <span class="keyword">null</span>));</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160; </div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;showkarma&quot;</span>, <span class="stringliteral">&quot;showkarma: Show the current karma values of the players.&quot;</span>, <span class="keyword">null</span>));</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;togglekarma&quot;</span>, <span class="stringliteral">&quot;togglekarma: Toggle the karma system on/off.&quot;</span>, <span class="keyword">null</span>));</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;resetkarma&quot;</span>, <span class="stringliteral">&quot;resetkarma [client]: Resets the karma value of the specified client to 100.&quot;</span>, <span class="keyword">null</span>,</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;            () =&gt;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;            {</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;                <span class="keywordflow">if</span> (GameMain.NetworkMember?.ConnectedClients == <span class="keyword">null</span>) { <span class="keywordflow">return</span> <span class="keyword">null</span>; }</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> <span class="keywordtype">string</span>[][]</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;                {</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;                    GameMain.NetworkMember.ConnectedClients.Select(c =&gt; c.Name).ToArray()</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;                };</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;            }));</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;setkarma&quot;</span>, <span class="stringliteral">&quot;setkarma [client] [0-100]: Sets the karma of the specified client to the specified value.&quot;</span>, <span class="keyword">null</span>,</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;            () =&gt;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;            {</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;                <span class="keywordflow">if</span> (GameMain.NetworkMember?.ConnectedClients == <span class="keyword">null</span>) { <span class="keywordflow">return</span> <span class="keyword">null</span>; }</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> <span class="keywordtype">string</span>[][]</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;                {</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;                    GameMain.NetworkMember.ConnectedClients.Select(c =&gt; c.Name).ToArray(),</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;                    <span class="keyword">new</span> <span class="keywordtype">string</span>[] { <span class="stringliteral">&quot;50&quot;</span> }</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;                };</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;            }));</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;togglekarmatestmode&quot;</span>, <span class="stringliteral">&quot;togglekarmatestmode: Toggle the karma test mode on/off. When test mode is enabled, clients get notified when their karma value changes (including the reason for the increase/decrease) and the server doesn&#39;t ban clients whose karma decreases below the ban threshold.&quot;</span>, <span class="keyword">null</span>));</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160; </div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;kick&quot;</span>, <span class="stringliteral">&quot;kick [name]: Kick a player out of the server.&quot;</span>, (<span class="keywordtype">string</span>[] args) =&gt;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;            {</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;                <span class="keywordflow">if</span> (GameMain.NetworkMember == <span class="keyword">null</span> || args.Length == 0) { <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160; </div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;                <span class="keywordtype">string</span> playerName = <span class="keywordtype">string</span>.Join(<span class="stringliteral">&quot; &quot;</span>, args);</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160; </div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;                ShowQuestionPrompt(<span class="stringliteral">&quot;Reason for kicking \&quot;&quot;</span> + playerName + <span class="stringliteral">&quot;\&quot;? (Enter c to cancel)&quot;</span>, (reason) =&gt;</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;                {</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;                    <span class="keywordflow">if</span> (reason == <span class="stringliteral">&quot;c&quot;</span> || reason == <span class="stringliteral">&quot;C&quot;</span>) { <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;                    GameMain.NetworkMember.KickPlayer(playerName, reason);</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;                });</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;            },</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;            () =&gt;</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;            {</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;                <span class="keywordflow">if</span> (GameMain.NetworkMember == <span class="keyword">null</span>) { <span class="keywordflow">return</span> <span class="keyword">null</span>; }</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160; </div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> <span class="keywordtype">string</span>[][]</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;                {</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;                    GameMain.NetworkMember.ConnectedClients.Select(c =&gt; c.Name).ToArray()</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;                };</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;            }));</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160; </div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;kickid&quot;</span>, <span class="stringliteral">&quot;kickid [id]: Kick the player with the specified client ID out of the server.  You can see the IDs of the clients using the command \&quot;clientlist\&quot;.&quot;</span>, (<span class="keywordtype">string</span>[] args) =&gt;</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;            {</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;                <span class="keywordflow">if</span> (GameMain.NetworkMember == <span class="keyword">null</span> || args.Length == 0) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160; </div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;                <span class="keywordtype">int</span>.TryParse(args[0], out <span class="keywordtype">int</span> <span class="keywordtype">id</span>);</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;                var client = GameMain.NetworkMember.ConnectedClients.Find(c =&gt; c.ID == <span class="keywordtype">id</span>);</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;                <span class="keywordflow">if</span> (client == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;                {</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;                    ThrowError(<span class="stringliteral">&quot;Client id \&quot;&quot;</span> + <span class="keywordtype">id</span> + <span class="stringliteral">&quot;\&quot; not found.&quot;</span>);</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;                }</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160; </div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;                ShowQuestionPrompt(<span class="stringliteral">&quot;Reason for kicking \&quot;&quot;</span> + client.Name + <span class="stringliteral">&quot;\&quot;? (Enter c to cancel)&quot;</span>, (reason) =&gt;</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;                {</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;                    if (reason == <span class="stringliteral">&quot;c&quot;</span> || reason == <span class="stringliteral">&quot;C&quot;</span>) { return; }</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;                    GameMain.NetworkMember.KickPlayer(client.Name, reason);</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;                });</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;            }));</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160; </div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;ban&quot;</span>, <span class="stringliteral">&quot;ban [name]: Kick and ban the player from the server.&quot;</span>, (<span class="keywordtype">string</span>[] args) =&gt;</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;            {</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;                <span class="keywordflow">if</span> (GameMain.NetworkMember == <span class="keyword">null</span> || args.Length == 0) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160; </div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;                <span class="keywordtype">string</span> clientName = <span class="keywordtype">string</span>.Join(<span class="stringliteral">&quot; &quot;</span>, args);</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;                ShowQuestionPrompt(<span class="stringliteral">&quot;Reason for banning \&quot;&quot;</span> + clientName + <span class="stringliteral">&quot;\&quot;? (Enter c to cancel)&quot;</span>, (reason) =&gt;</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;                {</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;                    <span class="keywordflow">if</span> (reason == <span class="stringliteral">&quot;c&quot;</span> || reason == <span class="stringliteral">&quot;C&quot;</span>) { <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;                    ShowQuestionPrompt(<span class="stringliteral">&quot;Enter the duration of the ban (leave empty to ban permanently, or use the format \&quot;[days] d [hours] h\&quot;) (Enter c to cancel)&quot;</span>, (duration) =&gt;</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;                    {</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;                        <span class="keywordflow">if</span> (duration == <span class="stringliteral">&quot;c&quot;</span> || duration == <span class="stringliteral">&quot;C&quot;</span>) { <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;                        TimeSpan? banDuration = <span class="keyword">null</span>;</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;                        <span class="keywordflow">if</span> (!<span class="keywordtype">string</span>.IsNullOrWhiteSpace(duration))</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;                        {</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;                            <span class="keywordflow">if</span> (!TryParseTimeSpan(duration, out TimeSpan parsedBanDuration))</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;                            {</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;                                ThrowError(<span class="stringliteral">&quot;\&quot;&quot;</span> + duration + <span class="stringliteral">&quot;\&quot; is not a valid ban duration. Use the format \&quot;[days] d [hours] h\&quot;, \&quot;[days] d\&quot; or \&quot;[hours] h\&quot;.&quot;</span>);</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;                                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;                            }</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;                            banDuration = parsedBanDuration;</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;                        }</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160; </div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;                        GameMain.NetworkMember.BanPlayer(clientName, reason, <span class="keyword">false</span>, banDuration);</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;                    });</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;                });</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;            },</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;            () =&gt;</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;            {</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;                <span class="keywordflow">if</span> (GameMain.NetworkMember == <span class="keyword">null</span>) <span class="keywordflow">return</span> <span class="keyword">null</span>;</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160; </div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> <span class="keywordtype">string</span>[][]</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;                {</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;                    GameMain.NetworkMember.ConnectedClients.Select(c =&gt; c.Name).ToArray()</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;                };</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;            }));</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;                       </div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;banid&quot;</span>, <span class="stringliteral">&quot;banid [id]: Kick and ban the player with the specified client ID from the server. You can see the IDs of the clients using the command \&quot;clientlist\&quot;.&quot;</span>, (<span class="keywordtype">string</span>[] args) =&gt;</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;            {</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;                <span class="keywordflow">if</span> (GameMain.NetworkMember == <span class="keyword">null</span> || args.Length == 0) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160; </div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;                <span class="keywordtype">int</span>.TryParse(args[0], out <span class="keywordtype">int</span> <span class="keywordtype">id</span>);</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;                var client = GameMain.NetworkMember.ConnectedClients.Find(c =&gt; c.ID == <span class="keywordtype">id</span>);</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;                <span class="keywordflow">if</span> (client == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;                {</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;                    ThrowError(<span class="stringliteral">&quot;Client id \&quot;&quot;</span> + <span class="keywordtype">id</span> + <span class="stringliteral">&quot;\&quot; not found.&quot;</span>);</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;                }</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160; </div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;                ShowQuestionPrompt(<span class="stringliteral">&quot;Reason for banning \&quot;&quot;</span> + client.Name + <span class="stringliteral">&quot;\&quot;? (Enter c to cancel)&quot;</span>, (reason) =&gt;</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;                {</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;                    if (reason == <span class="stringliteral">&quot;c&quot;</span> || reason == <span class="stringliteral">&quot;C&quot;</span>) { return; }</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;                    ShowQuestionPrompt(<span class="stringliteral">&quot;Enter the duration of the ban (leave empty to ban permanently, or use the format \&quot;[days] d [hours] h\&quot;) (c to cancel)&quot;</span>, (duration) =&gt;</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;                    {</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;                        <span class="keywordflow">if</span> (duration == <span class="stringliteral">&quot;c&quot;</span> || duration == <span class="stringliteral">&quot;C&quot;</span>) { <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;                        TimeSpan? banDuration = <span class="keyword">null</span>;</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;                        <span class="keywordflow">if</span> (!<span class="keywordtype">string</span>.IsNullOrWhiteSpace(duration))</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;                        {</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;                            <span class="keywordflow">if</span> (!TryParseTimeSpan(duration, out TimeSpan parsedBanDuration))</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;                            {</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;                                ThrowError(<span class="stringliteral">&quot;\&quot;&quot;</span> + duration + <span class="stringliteral">&quot;\&quot; is not a valid ban duration. Use the format \&quot;[days] d [hours] h\&quot;, \&quot;[days] d\&quot; or \&quot;[hours] h\&quot;.&quot;</span>);</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;                                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;                            }</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;                            banDuration = parsedBanDuration;</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;                        }</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160; </div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;                        GameMain.NetworkMember.BanPlayer(client.Name, reason, <span class="keyword">false</span>, banDuration);</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;                    });</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;                });</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;            }));</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;            </div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;banendpoint|banip&quot;</span>, <span class="stringliteral">&quot;banendpoint [endpoint]: Ban the IP address/SteamID from the server.&quot;</span>, <span class="keyword">null</span>));</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;            </div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;teleportcharacter|teleport&quot;</span>, <span class="stringliteral">&quot;teleport [character name]: Teleport the specified character to the position of the cursor. If the name parameter is omitted, the controlled character will be teleported.&quot;</span>, <span class="keyword">null</span>,</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;            () =&gt;</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;            {</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> <span class="keywordtype">string</span>[][] { ListCharacterNames() };</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;            }, isCheat: <span class="keyword">true</span>));</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160; </div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;godmode&quot;</span>, <span class="stringliteral">&quot;godmode [character name]: Toggle character godmode. Makes the targeted character invulnerable to damage. If the name parameter is omitted, the controlled character will receive godmode.&quot;</span>,</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;            (<span class="keywordtype">string</span>[] args) =&gt;</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;            {</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;                <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a> targetCharacter = (args.Length == 0) ? <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.Controlled : FindMatchingCharacter(args, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160; </div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;                <span class="keywordflow">if</span> (targetCharacter == <span class="keyword">null</span>) { <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160; </div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;                targetCharacter.GodMode = !targetCharacter.GodMode;</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;                NewMessage((targetCharacter.GodMode ? <span class="stringliteral">&quot;Enabled godmode on &quot;</span> : <span class="stringliteral">&quot;Disabled godmode on &quot;</span>) + targetCharacter.Name, Color.White);</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;            },</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;            () =&gt;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;            {</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> <span class="keywordtype">string</span>[][] { ListCharacterNames() };</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;            }, isCheat: <span class="keyword">true</span>));</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160; </div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;godmode_mainsub&quot;</span>, <span class="stringliteral">&quot;godmode_mainsub: Toggle submarine godmode. Makes the main submarine invulnerable to damage.&quot;</span>, (<span class="keywordtype">string</span>[] args) =&gt;</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;            {</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="namespace_barotrauma_1_1_networking.html#ad2bd88ee885a12024889adafbe8fcc47a0d234e5bcf75c768eb0db6bf96e3c22d">Submarine</a>.MainSub == <span class="keyword">null</span>) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160; </div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;                <a class="code" href="namespace_barotrauma_1_1_networking.html#ad2bd88ee885a12024889adafbe8fcc47a0d234e5bcf75c768eb0db6bf96e3c22d">Submarine</a>.MainSub.GodMode = !<a class="code" href="namespace_barotrauma_1_1_networking.html#ad2bd88ee885a12024889adafbe8fcc47a0d234e5bcf75c768eb0db6bf96e3c22d">Submarine</a>.MainSub.GodMode;</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;                NewMessage(<a class="code" href="namespace_barotrauma_1_1_networking.html#ad2bd88ee885a12024889adafbe8fcc47a0d234e5bcf75c768eb0db6bf96e3c22d">Submarine</a>.MainSub.GodMode ? <span class="stringliteral">&quot;Godmode on&quot;</span> : <span class="stringliteral">&quot;Godmode off&quot;</span>, Color.White);</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;            }, isCheat: <span class="keyword">true</span>));</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160; </div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;growthdelay&quot;</span>, <span class="stringliteral">&quot;growthdelay: Sets how long it takes for planters to attempt to advance a plant&#39;s growth.&quot;</span>, (<span class="keywordtype">string</span>[] args) =&gt;</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;            {</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;                <span class="keywordflow">if</span> (args.Length &gt; 0 &amp;&amp; <span class="keywordtype">float</span>.TryParse(args[0], out <span class="keywordtype">float</span> value))</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;                {</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;                    Planter.GrowthTickDelay = value;</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;                    NewMessage($<span class="stringliteral">&quot;Growth delay set to {value}.&quot;</span>, Color.Green);</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;                }</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;                NewMessage(<span class="stringliteral">&quot;Invalid value.&quot;</span>, Color.Red);</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;            }, isCheat: <span class="keyword">true</span>));</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160; </div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;lock&quot;</span>, <span class="stringliteral">&quot;lock: Lock movement of the main submarine.&quot;</span>, (<span class="keywordtype">string</span>[] args) =&gt;</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;            {</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;                <a class="code" href="namespace_barotrauma_1_1_networking.html#ad2bd88ee885a12024889adafbe8fcc47a0d234e5bcf75c768eb0db6bf96e3c22d">Submarine</a>.LockX = !<a class="code" href="namespace_barotrauma_1_1_networking.html#ad2bd88ee885a12024889adafbe8fcc47a0d234e5bcf75c768eb0db6bf96e3c22d">Submarine</a>.LockX;</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;                <a class="code" href="namespace_barotrauma_1_1_networking.html#ad2bd88ee885a12024889adafbe8fcc47a0d234e5bcf75c768eb0db6bf96e3c22d">Submarine</a>.LockY = <a class="code" href="namespace_barotrauma_1_1_networking.html#ad2bd88ee885a12024889adafbe8fcc47a0d234e5bcf75c768eb0db6bf96e3c22d">Submarine</a>.LockX;</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;                NewMessage((<a class="code" href="namespace_barotrauma_1_1_networking.html#ad2bd88ee885a12024889adafbe8fcc47a0d234e5bcf75c768eb0db6bf96e3c22d">Submarine</a>.LockX ? <span class="stringliteral">&quot;Submarine movement locked.&quot;</span> : <span class="stringliteral">&quot;Submarine movement unlocked.&quot;</span>), Color.White);</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;            }, <span class="keyword">null</span>, <span class="keyword">true</span>));</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160; </div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;lockx&quot;</span>, <span class="stringliteral">&quot;lockx: Lock horizontal movement of the main submarine.&quot;</span>, (<span class="keywordtype">string</span>[] args) =&gt;</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;            {</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;                <a class="code" href="namespace_barotrauma_1_1_networking.html#ad2bd88ee885a12024889adafbe8fcc47a0d234e5bcf75c768eb0db6bf96e3c22d">Submarine</a>.LockX = !<a class="code" href="namespace_barotrauma_1_1_networking.html#ad2bd88ee885a12024889adafbe8fcc47a0d234e5bcf75c768eb0db6bf96e3c22d">Submarine</a>.LockX;</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;                NewMessage((<a class="code" href="namespace_barotrauma_1_1_networking.html#ad2bd88ee885a12024889adafbe8fcc47a0d234e5bcf75c768eb0db6bf96e3c22d">Submarine</a>.LockX ? <span class="stringliteral">&quot;Horizontal submarine movement locked.&quot;</span> : <span class="stringliteral">&quot;Horizontal submarine movement unlocked.&quot;</span>), Color.White);</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;            }, <span class="keyword">null</span>, <span class="keyword">true</span>));</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160; </div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;locky&quot;</span>, <span class="stringliteral">&quot;locky: Lock vertical movement of the main submarine.&quot;</span>, (<span class="keywordtype">string</span>[] args) =&gt;</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;            {</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;                <a class="code" href="namespace_barotrauma_1_1_networking.html#ad2bd88ee885a12024889adafbe8fcc47a0d234e5bcf75c768eb0db6bf96e3c22d">Submarine</a>.LockY = !<a class="code" href="namespace_barotrauma_1_1_networking.html#ad2bd88ee885a12024889adafbe8fcc47a0d234e5bcf75c768eb0db6bf96e3c22d">Submarine</a>.LockY;</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;                NewMessage((<a class="code" href="namespace_barotrauma_1_1_networking.html#ad2bd88ee885a12024889adafbe8fcc47a0d234e5bcf75c768eb0db6bf96e3c22d">Submarine</a>.LockY ? <span class="stringliteral">&quot;Vertical submarine movement locked.&quot;</span> : <span class="stringliteral">&quot;Vertical submarine movement unlocked.&quot;</span>), Color.White);</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;            }, <span class="keyword">null</span>, <span class="keyword">true</span>));</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160; </div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;dumpids&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, (<span class="keywordtype">string</span>[] args) =&gt;</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;            {</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;                <span class="keywordflow">try</span></div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;                {</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;                    <span class="keywordtype">int</span> count = args.Length == 0 ? 10 : <span class="keywordtype">int</span>.Parse(args[0]);</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;                    Entity.DumpIds(count, args.Length &gt;= 2 ? args[1] : <span class="keyword">null</span>);</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;                }</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;                <span class="keywordflow">catch</span> (Exception e)</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;                {</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;                    ThrowError(<span class="stringliteral">&quot;Failed to dump ids&quot;</span>, e);</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;                }</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;            }));</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160; </div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;dumptofile&quot;</span>, <span class="stringliteral">&quot;findentityids [filename]: Outputs the contents of the debug console into a text file in the game folder. If the filename argument is omitted, \&quot;consoleOutput.txt\&quot; is used as the filename.&quot;</span>, (<span class="keywordtype">string</span>[] args) =&gt;</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;            {</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;                <span class="keywordtype">string</span> filename = <span class="stringliteral">&quot;consoleOutput.txt&quot;</span>;</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;                <span class="keywordflow">if</span> (args.Length &gt; 0) { filename = <span class="keywordtype">string</span>.Join(<span class="stringliteral">&quot; &quot;</span>, args); }</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160; </div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;                File.WriteAllLines(filename, Messages.Select(m =&gt; m.Text).ToArray());</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;            }));</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160; </div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;findentityids&quot;</span>, <span class="stringliteral">&quot;findentityids [entityname]&quot;</span>, (<span class="keywordtype">string</span>[] args) =&gt;</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;            {</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;                <span class="keywordflow">if</span> (args.Length == 0) { <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;                <span class="keywordflow">foreach</span> (MapEntity mapEntity <span class="keywordflow">in</span> MapEntity.mapEntityList)</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;                {</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;                    <span class="keywordflow">if</span> (mapEntity.Name.Equals(args[0], StringComparison.OrdinalIgnoreCase))</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;                    {</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;                        ThrowError(mapEntity.ID + <span class="stringliteral">&quot;: &quot;</span> + mapEntity.Name.ToString());</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;                    }</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;                }</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;                <span class="keywordflow">foreach</span> (Character character <span class="keywordflow">in</span> <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.CharacterList)</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;                {</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;                    <span class="keywordflow">if</span> (character.Name.Equals(args[0], StringComparison.OrdinalIgnoreCase) || character.SpeciesName == args[0])</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;                    {</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;                        ThrowError(character.ID + <span class="stringliteral">&quot;: &quot;</span> + character.Name.ToString());</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;                    }</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;                }</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;            }));</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160; </div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;giveaffliction&quot;</span>, <span class="stringliteral">&quot;giveaffliction [affliction name] [affliction strength] [character name] [limb type] [use relative strength]: Add an affliction to a character. If the name parameter is omitted, the affliction is added to the controlled character.&quot;</span>, (<span class="keywordtype">string</span>[] args) =&gt;</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;            {</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;                <span class="keywordflow">if</span> (args.Length &lt; 2) { <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;                <span class="keywordtype">string</span> affliction = args[0];</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;                AfflictionPrefab afflictionPrefab = AfflictionPrefab.List.FirstOrDefault(a =&gt; a.Identifier == affliction);</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;                <span class="keywordflow">if</span> (afflictionPrefab == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;                {</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;                    afflictionPrefab = AfflictionPrefab.List.FirstOrDefault(a =&gt; a.Name.Equals(affliction, StringComparison.OrdinalIgnoreCase));</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;                }</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;                <span class="keywordflow">if</span> (afflictionPrefab == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;                {</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;                    ThrowError(<span class="stringliteral">&quot;Affliction \&quot;&quot;</span> + affliction + <span class="stringliteral">&quot;\&quot; not found.&quot;</span>);</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;                }</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;                <span class="keywordflow">if</span> (!<span class="keywordtype">float</span>.TryParse(args[1], out <span class="keywordtype">float</span> afflictionStrength))</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;                {</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;                    ThrowError(<span class="stringliteral">&quot;\&quot;&quot;</span> + args[1] + <span class="stringliteral">&quot;\&quot; is not a valid affliction strength.&quot;</span>);</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;                }</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;                <span class="keywordtype">bool</span> relativeStrength = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;                <span class="keywordflow">if</span> (args.Length &gt; 4)</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;                {</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;                    <span class="keywordtype">bool</span>.TryParse(args[4], out relativeStrength);</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;                }</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;                <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a> targetCharacter = args.Length &lt;= 2 ? <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.Controlled : FindMatchingCharacter(<span class="keyword">new</span> <span class="keywordtype">string</span>[] { args[2] });</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;                <span class="keywordflow">if</span> (targetCharacter != <span class="keyword">null</span>)</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;                {</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;                    Limb targetLimb = targetCharacter.AnimController.MainLimb;</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;                    <span class="keywordflow">if</span> (args.Length &gt; 3)</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;                    {</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;                        targetLimb = targetCharacter.AnimController.Limbs.FirstOrDefault(l =&gt; l.type.ToString().Equals(args[3], StringComparison.OrdinalIgnoreCase));</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;                    }</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;                    <span class="keywordflow">if</span> (relativeStrength)</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;                    {</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;                        afflictionStrength *= targetCharacter.MaxVitality / afflictionPrefab.MaxStrength;</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;                    }</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;                    targetCharacter.CharacterHealth.ApplyAffliction(targetLimb ?? targetCharacter.AnimController.MainLimb, afflictionPrefab.Instantiate(afflictionStrength));</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;                }</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;            },</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;            () =&gt;</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;            {</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> <span class="keywordtype">string</span>[][]</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;                {</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;                    AfflictionPrefab.Prefabs.Select(a =&gt; a.Name.Value).ToArray(),</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;                    <span class="keyword">new</span> <span class="keywordtype">string</span>[] { <span class="stringliteral">&quot;1&quot;</span> },</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;                    <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.CharacterList.Select(c =&gt; c.Name).ToArray(),</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;                    Enum.GetNames(typeof(LimbType)).ToArray()</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;                };</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;            }, isCheat: <span class="keyword">true</span>));</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160; </div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;heal&quot;</span>, <span class="stringliteral">&quot;heal [character name] [all]: Restore the specified character to full health. If the name parameter is omitted, the controlled character will be healed. By default only heals common afflictions such as physical damage and blood loss: use the \&quot;all\&quot; argument to heal everything, including poisonings/addictions/etc.&quot;</span>, (<span class="keywordtype">string</span>[] args) =&gt;</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;            {</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;                <span class="keywordtype">bool</span> healAll = args.Length &gt; 1 &amp;&amp; args[1].Equals(<span class="stringliteral">&quot;all&quot;</span>, StringComparison.OrdinalIgnoreCase);</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;                <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a> healedCharacter = (args.Length == 0) ? <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.Controlled : FindMatchingCharacter(healAll ? args.Take(args.Length - 1).ToArray() : args);</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;                <span class="keywordflow">if</span> (healedCharacter != <span class="keyword">null</span>)</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;                {</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;                    healedCharacter.SetAllDamage(0.0f, 0.0f, 0.0f);</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;                    healedCharacter.Oxygen = 100.0f;</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;                    healedCharacter.Bloodloss = 0.0f;</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;                    healedCharacter.SetStun(0.0f, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;                    <span class="keywordflow">if</span> (healAll)</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;                    {</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;                        healedCharacter.CharacterHealth.RemoveAllAfflictions();</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;                    }</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;                }</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;            },</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;            () =&gt;</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;            {</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> <span class="keywordtype">string</span>[][]</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;                {</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;                    <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.CharacterList.Select(c =&gt; c.Name).Distinct().OrderBy(n =&gt; n).ToArray()</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;                };</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;            }, isCheat: <span class="keyword">true</span>));</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160; </div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;revive&quot;</span>, <span class="stringliteral">&quot;revive [character name]: Bring the specified character back from the dead. If the name parameter is omitted, the controlled character will be revived.&quot;</span>, (<span class="keywordtype">string</span>[] args) =&gt;</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;            {</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;                <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a> revivedCharacter = (args.Length == 0) ? <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.Controlled : FindMatchingCharacter(args);</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;                <span class="keywordflow">if</span> (revivedCharacter == <span class="keyword">null</span>) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160; </div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;                revivedCharacter.Revive();</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;<span class="preprocessor">#if SERVER</span></div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;                <span class="keywordflow">if</span> (GameMain.Server != <span class="keyword">null</span>)</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;                {</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;                    <span class="keywordflow">foreach</span> (<a class="code" href="class_barotrauma_1_1_networking_1_1_client.html">Client</a> c <span class="keywordflow">in</span> GameMain.Server.ConnectedClients)</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;                    {</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;                        <span class="keywordflow">if</span> (c.<a class="code" href="class_barotrauma_1_1_networking_1_1_client.html#a94c7849feeb272b648538ae54305680b">Character</a> != revivedCharacter) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160; </div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;                        <span class="comment">//clients stop controlling the character when it dies, force control back</span></div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;                        GameMain.Server.SetClientCharacter(c, revivedCharacter);</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;                    }</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;                }</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;            },</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;            () =&gt;</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;            {</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> <span class="keywordtype">string</span>[][]</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;                {</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;                    <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.CharacterList.Select(c =&gt; c.<a class="code" href="class_barotrauma_1_1_networking_1_1_client.html#a4bc29d866927023d4bc513e708ceeff4">Name</a>).Distinct().OrderBy(n =&gt; n).ToArray()</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;                };</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;            }, isCheat: <span class="keyword">true</span>));</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160; </div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;freeze&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, (<span class="keywordtype">string</span>[] args) =&gt;</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;            {</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.Controlled != <span class="keyword">null</span>) <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.Controlled.AnimController.Frozen = !<a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.Controlled.AnimController.Frozen;</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;            }, isCheat: <span class="keyword">true</span>));</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160; </div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;ragdoll&quot;</span>, <span class="stringliteral">&quot;ragdoll [character name]: Force-ragdoll the specified character. If the name parameter is omitted, the controlled character will be ragdolled.&quot;</span>, (<span class="keywordtype">string</span>[] args) =&gt;</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;            {</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;                <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a> ragdolledCharacter = (args.Length == 0) ? <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.Controlled : FindMatchingCharacter(args);</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;                <span class="keywordflow">if</span> (ragdolledCharacter != <span class="keyword">null</span>)</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;                {</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;                    ragdolledCharacter.IsForceRagdolled = !ragdolledCharacter.IsForceRagdolled;</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;                }</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;            },</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;            () =&gt;</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;            {</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> <span class="keywordtype">string</span>[][]</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;                {</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;                    <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.CharacterList.Select(c =&gt; c.<a class="code" href="class_barotrauma_1_1_networking_1_1_client.html#a4bc29d866927023d4bc513e708ceeff4">Name</a>).Distinct().OrderBy(n =&gt; n).ToArray()</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;                };</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;            }, isCheat: <span class="keyword">true</span>));</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160; </div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;freecamera|freecam&quot;</span>, <span class="stringliteral">&quot;freecam: Detach the camera from the controlled character.&quot;</span>, (<span class="keywordtype">string</span>[] args) =&gt;</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;            {</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;<span class="preprocessor">#if CLIENT</span></div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;                <span class="keywordflow">if</span> (Screen.Selected == GameMain.SubEditorScreen) { <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160; </div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;                <span class="keywordflow">if</span> (GameMain.Client == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;                {</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;                    <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.Controlled = <span class="keyword">null</span>;</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;                    GameMain.GameScreen.Cam.TargetPos = Vector2.Zero;</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;                }</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;                {</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;                    GameMain.Client?.SendConsoleCommand(<span class="stringliteral">&quot;freecam&quot;</span>);</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;                }</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;            }, isCheat: <span class="keyword">true</span>));</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160; </div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;eventmanager&quot;</span>, <span class="stringliteral">&quot;eventmanager: Toggle event manager on/off. No new random events are created when the event manager is disabled.&quot;</span>, (<span class="keywordtype">string</span>[] args) =&gt;</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;            {</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;                <span class="keywordflow">if</span> (GameMain.GameSession?.EventManager != <span class="keyword">null</span>)</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;                {</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;                    GameMain.GameSession.EventManager.Enabled = !GameMain.GameSession.EventManager.Enabled;</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;                    NewMessage(GameMain.GameSession.EventManager.Enabled ? <span class="stringliteral">&quot;Event manager on&quot;</span> : <span class="stringliteral">&quot;Event manager off&quot;</span>, Color.White);</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;                }</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;            }, isCheat: <span class="keyword">true</span>));</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;            </div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;triggerevent&quot;</span>, <span class="stringliteral">&quot;triggerevent [identifier]: Created a new event.&quot;</span>, (<span class="keywordtype">string</span>[] args) =&gt;</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;            {</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;                List&lt;EventPrefab&gt; eventPrefabs = EventSet.GetAllEventPrefabs().Where(prefab =&gt; prefab.Identifier != Identifier.Empty).ToList();</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;                <span class="keywordflow">if</span> (GameMain.GameSession?.EventManager != <span class="keyword">null</span> &amp;&amp; args.Length &gt; 0)</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;                {</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;                    EventPrefab eventPrefab = eventPrefabs.Find(prefab =&gt; prefab.Identifier == args[0]);</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160; </div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;                    <span class="keywordflow">if</span> (eventPrefab != <span class="keyword">null</span>)</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;                    {</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;                        var newEvent = eventPrefab.CreateInstance();</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;                        <span class="keywordflow">if</span> (newEvent == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;                        {</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;                            NewMessage($<span class="stringliteral">&quot;Could not initialize event {args[0]} because level did not meet requirements&quot;</span>);</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;                            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;                        }</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;                        GameMain.GameSession.EventManager.ActiveEvents.Add(newEvent);</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;                        newEvent.Init(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;                        NewMessage($<span class="stringliteral">&quot;Initialized event {eventPrefab.Identifier}&quot;</span>, Color.Aqua);</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;                        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;                    }</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160; </div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;                    NewMessage($<span class="stringliteral">&quot;Failed to trigger event because {args[0]} is not a valid event identifier.&quot;</span>, Color.Red);</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;                }</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;                NewMessage(<span class="stringliteral">&quot;Failed to trigger event&quot;</span>, Color.Red);</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;            }, isCheat: <span class="keyword">true</span>, getValidArgs: () =&gt;</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;            {</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;                List&lt;EventPrefab&gt; eventPrefabs = EventSet.GetAllEventPrefabs().Where(prefab =&gt; prefab.Identifier != Identifier.Empty).ToList();</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;                </div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span>[]</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;                {</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;                   eventPrefabs.Select(prefab =&gt; prefab.Identifier).Distinct().Select(<span class="keywordtype">id</span> =&gt; <span class="keywordtype">id</span>.Value).ToArray()</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;                };</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;            }));</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;            </div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;setskill&quot;</span>, <span class="stringliteral">&quot;setskill [all/identifier] [max/level] [character]: Set your skill level.&quot;</span>, (<span class="keywordtype">string</span>[] args) =&gt;</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;            {</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;                <span class="keywordflow">if</span> (args.Length &lt; 2)</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;                {</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;                    NewMessage($<span class="stringliteral">&quot;Missing arguments. Expected at least 2 but got {args.Length} (skill, level, name)&quot;</span>, Color.Red);</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;                }</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160; </div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;                Identifier skillIdentifier = args[0].ToIdentifier();</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;                <span class="keywordtype">string</span> levelString = args[1];</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;                <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a> character = args.Length &gt;= 3 ? FindMatchingCharacter(args.Skip(2).ToArray(), <span class="keyword">false</span>) : <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.Controlled;</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160; </div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;                <span class="keywordflow">if</span> (character?.Info?.Job == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;                {</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;                    NewMessage(<span class="stringliteral">&quot;Character is not valid.&quot;</span>, Color.Red);</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;                }</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160; </div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;                <span class="keywordtype">bool</span> isMax = levelString.Equals(<span class="stringliteral">&quot;max&quot;</span>, StringComparison.OrdinalIgnoreCase);</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160; </div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;                <span class="keywordflow">if</span> (<span class="keywordtype">float</span>.TryParse(levelString, NumberStyles.Number, CultureInfo.InvariantCulture, out <span class="keywordtype">float</span> level) || isMax)</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;                {</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;                    <span class="keywordflow">if</span> (isMax) { level = 100; }</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;                    <span class="keywordflow">if</span> (skillIdentifier == <span class="stringliteral">&quot;all&quot;</span>)</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;                    {</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;                        <span class="keywordflow">foreach</span> (Skill skill <span class="keywordflow">in</span> character.Info.Job.GetSkills())</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;                        {</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;                            character.Info.SetSkillLevel(skill.Identifier, level);</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;                        }</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;                        NewMessage($<span class="stringliteral">&quot;Set all {character.Name}&#39;s skills to {level}&quot;</span>, Color.Green);</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;                    }</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;                    {</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;                        character.Info.SetSkillLevel(skillIdentifier, level);</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;                        NewMessage($<span class="stringliteral">&quot;Set {character.Name}&#39;s {skillIdentifier} level to {level}&quot;</span>, Color.Green);</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;                    }</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;                }</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;                {</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;                    NewMessage($<span class="stringliteral">&quot;{levelString} is not a valid level. Expected number or \&quot;max\&quot;.&quot;</span>, Color.Red);</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;                }</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;            }, isCheat: <span class="keyword">true</span>, getValidArgs: () =&gt;</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;            {</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span>[]</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;                {</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;                    <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.Controlled?.Info?.Job?.GetSkills()?.Select(skill =&gt; skill.Identifier.Value).ToArray() ?? Array.Empty&lt;<span class="keywordtype">string</span>&gt;(),</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;                    <span class="keyword">new</span>[]{ <span class="stringliteral">&quot;max&quot;</span> },</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;                    <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.CharacterList.Select(c =&gt; c.<a class="code" href="class_barotrauma_1_1_networking_1_1_client.html#a4bc29d866927023d4bc513e708ceeff4">Name</a>).Distinct().OrderBy(n =&gt; n).ToArray(),</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;                };</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;            }));</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160; </div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;water|editwater&quot;</span>, <span class="stringliteral">&quot;water/editwater: Toggle water editing. Allows adding water into rooms by holding the left mouse button and removing it by holding the right mouse button.&quot;</span>, (<span class="keywordtype">string</span>[] args) =&gt;</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;            {</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;                Hull.EditWater = !Hull.EditWater;</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;                NewMessage(Hull.EditWater ? <span class="stringliteral">&quot;Water editing on&quot;</span> : <span class="stringliteral">&quot;Water editing off&quot;</span>, Color.White);</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;            }, isCheat: <span class="keyword">true</span>));</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160; </div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;givetalent&quot;</span>, <span class="stringliteral">&quot;givetalent [talent] [player]: give the talent to the specified character. If the character argument is omitted, the talent is given to the controlled character.&quot;</span>, (<span class="keywordtype">string</span>[] args) =&gt;</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;            {</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;                <span class="keywordflow">if</span> (args.Length == 0) { <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;                var character = args.Length &gt;= 2 ? FindMatchingCharacter(args.Skip(1).ToArray()) : <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.Controlled;</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;                <span class="keywordflow">if</span> (character != <span class="keyword">null</span>)</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;                {</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;                    TalentPrefab talentPrefab = TalentPrefab.TalentPrefabs.Find(c =&gt; </div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;                        c.Identifier == args[0] ||</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;                        c.DisplayName.Equals(args[0], StringComparison.OrdinalIgnoreCase));</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;                    <span class="keywordflow">if</span> (talentPrefab == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;                    {</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;                        ThrowError($<span class="stringliteral">&quot;Couldn&#39;t find the talent \&quot;{args[0]}\&quot;.&quot;</span>);</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;                        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;                    }</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;                    character.GiveTalent(talentPrefab);</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;                    NewMessage($<span class="stringliteral">&quot;Gave talent \&quot;{talentPrefab.DisplayName}\&quot; to \&quot;{character.Name}\&quot;.&quot;</span>);</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;                }</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;            },</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;            () =&gt;</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;            {</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;                List&lt;string&gt; talentNames = <span class="keyword">new</span> List&lt;string&gt;();</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;                <span class="keywordflow">foreach</span> (TalentPrefab talent <span class="keywordflow">in</span> TalentPrefab.TalentPrefabs)</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;                {</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;                    talentNames.Add(talent.DisplayName.Value);</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;                }</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160; </div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> <span class="keywordtype">string</span>[][]</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;                {</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;                    talentNames.Select(<span class="keywordtype">id</span> =&gt; <span class="keywordtype">id</span>).ToArray(),</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;                    <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.CharacterList.Select(c =&gt; c.<a class="code" href="class_barotrauma_1_1_networking_1_1_client.html#a4bc29d866927023d4bc513e708ceeff4">Name</a>).Distinct().OrderBy(n =&gt; n).ToArray()</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;                };</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;            }, isCheat: <span class="keyword">true</span>));</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160; </div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;unlocktalents&quot;</span>, <span class="stringliteral">&quot;unlocktalents [all/[jobname]] [character]: give the specified character all the talents of the specified class&quot;</span>, (<span class="keywordtype">string</span>[] args) =&gt;</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;            {</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;                var character = args.Length &gt;= 2 ? FindMatchingCharacter(args.Skip(1).ToArray()) : <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.Controlled;</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;                <span class="keywordflow">if</span> (character == <span class="keyword">null</span>) { <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160; </div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;                List&lt;TalentTree&gt; talentTrees = <span class="keyword">new</span> List&lt;TalentTree&gt;();</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;                <span class="keywordflow">if</span> (args.Length == 0 || args[0].Equals(<span class="stringliteral">&quot;all&quot;</span>, StringComparison.OrdinalIgnoreCase))</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;                {</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;                    talentTrees.AddRange(TalentTree.JobTalentTrees);</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;                }</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;                {</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;                    var job = JobPrefab.Prefabs.Find(jp =&gt; jp.Name != <span class="keyword">null</span> &amp;&amp; jp.Name.Equals(args[0], StringComparison.OrdinalIgnoreCase));</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;                    <span class="keywordflow">if</span> (job == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;                    {</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;                        ThrowError($<span class="stringliteral">&quot;Failed to find the job \&quot;{args[0]}\&quot;.&quot;</span>);</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;                        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;                    }</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;                    <span class="keywordflow">if</span> (!TalentTree.JobTalentTrees.TryGet(job.Identifier, out TalentTree talentTree))</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;                    {</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;                        ThrowError($<span class="stringliteral">&quot;No talents configured for the job \&quot;{args[0]}\&quot;.&quot;</span>);</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;                        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;                    }</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;                    talentTrees.Add(talentTree);</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;                }</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160; </div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;                <span class="keywordflow">foreach</span> (var talentTree <span class="keywordflow">in</span> talentTrees)</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;                {</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;                    <span class="keywordflow">foreach</span> (var subTree <span class="keywordflow">in</span> talentTree.TalentSubTrees)</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;                    {</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;                        <span class="keywordflow">foreach</span> (var option <span class="keywordflow">in</span> subTree.TalentOptionStages)</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;                        {</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;                            <span class="keywordflow">foreach</span> (var talent <span class="keywordflow">in</span> option.Talents)</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;                            {</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;                                character.GiveTalent(talent);</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;                                NewMessage($<span class="stringliteral">&quot;Unlocked talent \&quot;{talent.DisplayName}\&quot;.&quot;</span>);</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;                            }</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;                        }</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;                    }</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;                }</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;            },</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;            () =&gt;</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;            {</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;                List&lt;string&gt; availableArgs = <span class="keyword">new</span> List&lt;string&gt;() { <span class="stringliteral">&quot;All&quot;</span> };</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;                availableArgs.AddRange(JobPrefab.Prefabs.Select(j =&gt; j.Name.Value));</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> <span class="keywordtype">string</span>[][]</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;                {</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;                    availableArgs.ToArray(),</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;                    <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.CharacterList.Select(c =&gt; c.<a class="code" href="class_barotrauma_1_1_networking_1_1_client.html#a4bc29d866927023d4bc513e708ceeff4">Name</a>).Distinct().OrderBy(n =&gt; n).ToArray()</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;                };</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;            }, isCheat: <span class="keyword">true</span>));</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160; </div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;giveexperience&quot;</span>, <span class="stringliteral">&quot;giveexperience [amount] [character]: Give experience to character.&quot;</span>, (<span class="keywordtype">string</span>[] args) =&gt;</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;            {</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;                <span class="keywordflow">if</span> (args.Length &lt; 1)</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;                {</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;                    NewMessage($<span class="stringliteral">&quot;Missing arguments. Expected at least 1 but got {args.Length} (experience, name)&quot;</span>);</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;                }</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160; </div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;                <span class="keywordtype">string</span> experienceString = args[0];</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;                var character = FindMatchingCharacter(args.Skip(1).ToArray()) ?? <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.Controlled;</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160; </div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;                <span class="keywordflow">if</span> (character?.Info == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;                {</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;                    NewMessage(<span class="stringliteral">&quot;Character is not valid.&quot;</span>);</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;                }</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160; </div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;                <span class="keywordflow">if</span> (<span class="keywordtype">int</span>.TryParse(experienceString, NumberStyles.Number, CultureInfo.InvariantCulture, out <span class="keywordtype">int</span> experience))</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;                {</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;                    character.Info.GiveExperience(experience);</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;                    NewMessage($<span class="stringliteral">&quot;Gave {character.Name} {experience} experience&quot;</span>);</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;                }</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;                {</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;                    NewMessage($<span class="stringliteral">&quot;{experienceString} is not a valid value. Expected number.&quot;</span>);</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;                }</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;            }, isCheat: <span class="keyword">true</span>, getValidArgs: () =&gt;</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;            {</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span>[]</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;                {</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;                    <span class="keyword">new</span> <span class="keywordtype">string</span>[] { <span class="stringliteral">&quot;100&quot;</span> },</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;                    <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.CharacterList.Select(c =&gt; c.<a class="code" href="class_barotrauma_1_1_networking_1_1_client.html#a4bc29d866927023d4bc513e708ceeff4">Name</a>).Distinct().OrderBy(n =&gt; n).ToArray(),</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;                };</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;            }));</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160; </div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;fire|editfire&quot;</span>, <span class="stringliteral">&quot;fire/editfire: Allows putting up fires by left clicking.&quot;</span>, (<span class="keywordtype">string</span>[] args) =&gt;</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;            {</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;                Hull.EditFire = !Hull.EditFire;</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;                NewMessage(Hull.EditFire ? <span class="stringliteral">&quot;Fire spawning on&quot;</span> : <span class="stringliteral">&quot;Fire spawning off&quot;</span>, Color.White);                </div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;            }, isCheat: <span class="keyword">true</span>));</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160; </div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;explosion&quot;</span>, <span class="stringliteral">&quot;explosion [range] [force] [damage] [structuredamage] [item damage] [emp strength] [ballast flora strength]: Creates an explosion at the position of the cursor.&quot;</span>, <span class="keyword">null</span>, isCheat: <span class="keyword">true</span>));</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160; </div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;showseed|showlevelseed&quot;</span>, <span class="stringliteral">&quot;showseed: Show the seed of the current level.&quot;</span>, (<span class="keywordtype">string</span>[] args) =&gt;</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;            {</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;                <span class="keywordflow">if</span> (Level.Loaded == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;                {</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;                    ThrowError(<span class="stringliteral">&quot;No level loaded.&quot;</span>);</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;                }</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;                {</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;                    NewMessage(<span class="stringliteral">&quot;Level seed: &quot;</span> + Level.Loaded.Seed);</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;                    NewMessage(<span class="stringliteral">&quot;Level generation params: &quot;</span> + Level.Loaded.GenerationParams.Identifier);</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;                    NewMessage(<span class="stringliteral">&quot;Adjacent locations: &quot;</span> + (Level.Loaded.StartLocation?.Type.Identifier ?? <span class="stringliteral">&quot;none&quot;</span>.ToIdentifier()) + <span class="stringliteral">&quot;, &quot;</span> + (Level.Loaded.StartLocation?.Type.Identifier ?? <span class="stringliteral">&quot;none&quot;</span>.ToIdentifier()));</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;                    NewMessage(<span class="stringliteral">&quot;Mirrored: &quot;</span> + Level.Loaded.Mirrored);</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;                    NewMessage(<span class="stringliteral">&quot;Level size: &quot;</span> + Level.Loaded.Size.X + <span class="stringliteral">&quot;x&quot;</span> + Level.Loaded.Size.Y);</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;                    NewMessage(<span class="stringliteral">&quot;Minimum main path width: &quot;</span> + (Level.Loaded.LevelData?.MinMainPathWidth?.ToString() ?? <span class="stringliteral">&quot;unknown&quot;</span>));</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;                }</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;            },<span class="keyword">null</span>));</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;            </div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;teleportsub&quot;</span>, <span class="stringliteral">&quot;teleportsub [start/end/cursor]: Teleport the submarine to the position of the cursor, or the start or end of the level. WARNING: does not take outposts into account, so often leads to physics glitches. Only use for debugging.&quot;</span>, (<span class="keywordtype">string</span>[] args) =&gt;</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;            {</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="namespace_barotrauma_1_1_networking.html#ad2bd88ee885a12024889adafbe8fcc47a0d234e5bcf75c768eb0db6bf96e3c22d">Submarine</a>.MainSub == <span class="keyword">null</span>) { <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;                <span class="keywordflow">if</span> (Level.Loaded?.Type == LevelData.LevelType.Outpost &amp;&amp; GameMain.GameSession != <span class="keyword">null</span>)</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;                {</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;                    NewMessage(<span class="stringliteral">&quot;The teleportsub command is unavailable in outpost levels!&quot;</span>, Color.Red);</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;                }</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160; </div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;                <span class="keywordflow">if</span> (args.Length == 0 || args[0].Equals(<span class="stringliteral">&quot;cursor&quot;</span>, StringComparison.OrdinalIgnoreCase))</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;                {</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;<span class="preprocessor">#if SERVER</span></div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;                    ThrowError(<span class="stringliteral">&quot;Cannot teleport the sub to the position of the cursor. Use \&quot;start\&quot; or \&quot;end\&quot;, or execute the command as a client.&quot;</span>);</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;                    <a class="code" href="namespace_barotrauma_1_1_networking.html#ad2bd88ee885a12024889adafbe8fcc47a0d234e5bcf75c768eb0db6bf96e3c22d">Submarine</a>.MainSub.SetPosition(Screen.Selected.Cam.ScreenToWorld(PlayerInput.MousePosition));</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;                }</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (args[0].Equals(<span class="stringliteral">&quot;start&quot;</span>, StringComparison.OrdinalIgnoreCase))</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;                {</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;                    <span class="keywordflow">if</span> (Level.Loaded == <span class="keyword">null</span>)</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;                    {</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;                        NewMessage(<span class="stringliteral">&quot;Can&#39;t teleport the sub to the start of the level (no level loaded).&quot;</span>, Color.Red);</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;                        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;                    }</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;                    Vector2 pos = Level.Loaded.StartPosition;</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;                    <span class="keywordflow">if</span> (Level.Loaded.StartOutpost != <span class="keyword">null</span>)</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;                    {</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;                        pos -= Vector2.UnitY * (<a class="code" href="namespace_barotrauma_1_1_networking.html#ad2bd88ee885a12024889adafbe8fcc47a0d234e5bcf75c768eb0db6bf96e3c22d">Submarine</a>.MainSub.Borders.Height + Level.Loaded.StartOutpost.Borders.Height) / 2;</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;                    }</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;                    <a class="code" href="namespace_barotrauma_1_1_networking.html#ad2bd88ee885a12024889adafbe8fcc47a0d234e5bcf75c768eb0db6bf96e3c22d">Submarine</a>.MainSub.SetPosition(pos);</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;                }</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;                {</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;                    <span class="keywordflow">if</span> (Level.Loaded == <span class="keyword">null</span>)</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;                    {</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;                        NewMessage(<span class="stringliteral">&quot;Can&#39;t teleport the sub to the end of the level (no level loaded).&quot;</span>, Color.Red);</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;                        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;                    }</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;                    Vector2 pos = Level.Loaded.EndPosition;</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;                    <span class="keywordflow">if</span> (Level.Loaded.EndOutpost != <span class="keyword">null</span>)</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;                    {</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;                        pos -= Vector2.UnitY * (<a class="code" href="namespace_barotrauma_1_1_networking.html#ad2bd88ee885a12024889adafbe8fcc47a0d234e5bcf75c768eb0db6bf96e3c22d">Submarine</a>.MainSub.Borders.Height + Level.Loaded.EndOutpost.Borders.Height) / 2;</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;                    }</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;                    <a class="code" href="namespace_barotrauma_1_1_networking.html#ad2bd88ee885a12024889adafbe8fcc47a0d234e5bcf75c768eb0db6bf96e3c22d">Submarine</a>.MainSub.SetPosition(pos);</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;                }</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;            },</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;            () =&gt;</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;            {</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> <span class="keywordtype">string</span>[][]</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;                {</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;                    <span class="keyword">new</span> <span class="keywordtype">string</span>[] { <span class="stringliteral">&quot;start&quot;</span>, <span class="stringliteral">&quot;end&quot;</span>, <span class="stringliteral">&quot;cursor&quot;</span> }</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;                };</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;            }, isCheat: <span class="keyword">true</span>));</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160; </div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;<span class="preprocessor">#if DEBUG</span></div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;crash&quot;</span>, <span class="stringliteral">&quot;crash: Crashes the game.&quot;</span>, (<span class="keywordtype">string</span>[] args) =&gt;</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;            {</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> Exception(<span class="stringliteral">&quot;crash command issued&quot;</span>);</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;            }));</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160; </div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;fastforward&quot;</span>, <span class="stringliteral">&quot;fastforward [seconds]: Fast forwards the game by x seconds. Note that large numbers may cause a long freeze.&quot;</span>, (<span class="keywordtype">string</span>[] args) =&gt;</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;            {</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;                <span class="keywordtype">float</span> seconds = 0;</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;                <span class="keywordflow">if</span> (args.Length &gt; 0) { <span class="keywordtype">float</span>.TryParse(args[0], out seconds); }</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;                System.Diagnostics.Stopwatch sw = <span class="keyword">new</span> System.Diagnostics.Stopwatch();</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;                sw.Start();</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; seconds * Timing.FixedUpdateRate; i++)</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;                {</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;                    Screen.Selected?.Update(Timing.Step);</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;                }</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;                sw.Stop();</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;                NewMessage($<span class="stringliteral">&quot;Fast-forwarded by {seconds} seconds (took {sw.ElapsedMilliseconds / 1000.0f} s).&quot;</span>);</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;            }));</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160; </div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;removecharacter&quot;</span>, <span class="stringliteral">&quot;removecharacter [character name]: Immediately deletes the specified character.&quot;</span>, (<span class="keywordtype">string</span>[] args) =&gt;</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;            {</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;                <span class="keywordflow">if</span> (args.Length == 0) { <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;                <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a> character = FindMatchingCharacter(args, <span class="keyword">false</span>);</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;                <span class="keywordflow">if</span> (character == <span class="keyword">null</span>) { <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160; </div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;                Entity.Spawner?.AddEntityToRemoveQueue(character);</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;            },</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;            () =&gt;</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;            {</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> <span class="keywordtype">string</span>[][]</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;                {</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;                    <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.CharacterList.Select(c =&gt; c.<a class="code" href="class_barotrauma_1_1_networking_1_1_client.html#a4bc29d866927023d4bc513e708ceeff4">Name</a>).Distinct().OrderBy(n =&gt; n).ToArray()</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;                };</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;            }, isCheat: <span class="keyword">true</span>));</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160; </div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;waterphysicsparams&quot;</span>, <span class="stringliteral">&quot;waterphysicsparams [stiffness] [spread] [damping]: defaults 0.02, 0.05, 0.05&quot;</span>, (<span class="keywordtype">string</span>[] args) =&gt;</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;            {</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;                <span class="keywordtype">float</span> stiffness = 0.02f, spread = 0.05f, damp = 0.01f;</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;                <span class="keywordflow">if</span> (args.Length &gt; 0) <span class="keywordtype">float</span>.TryParse(args[0], out stiffness);</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;                <span class="keywordflow">if</span> (args.Length &gt; 1) <span class="keywordtype">float</span>.TryParse(args[1], out spread);</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;                <span class="keywordflow">if</span> (args.Length &gt; 2) <span class="keywordtype">float</span>.TryParse(args[2], out damp);</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;                Hull.WaveStiffness = stiffness;</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;                Hull.WaveSpread = spread;</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;                Hull.WaveDampening = damp;</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;            }, <span class="keyword">null</span>));</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160; </div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;testlevels&quot;</span>, <span class="stringliteral">&quot;testlevels&quot;</span>, (<span class="keywordtype">string</span>[] args) =&gt;</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;            {</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;                CoroutineManager.StartCoroutine(TestLevels());</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;            },</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;            <span class="keyword">null</span>));</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160; </div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;            IEnumerable&lt;CoroutineStatus&gt; TestLevels()</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;            {</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;                SubmarineInfo selectedSub = <span class="keyword">null</span>;</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;                Identifier subName = GameSettings.CurrentConfig.QuickStartSub;</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;                <span class="keywordflow">if</span> (subName != Identifier.Empty)</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;                {</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;                    selectedSub = SubmarineInfo.SavedSubmarines.FirstOrDefault(s =&gt; s.Name == subName);</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;                }</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160; </div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;                <span class="keywordtype">int</span> count = 0;</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;                <span class="keywordflow">while</span> (<span class="keyword">true</span>)</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;                {</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;                    var gamesession = <span class="keyword">new</span> GameSession(</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;                        SubmarineInfo.SavedSubmarines.GetRandomUnsynced(s =&gt; s.Type == <a class="code" href="namespace_barotrauma.html#a2749fb4bec59995097649b591a6aa7f4">SubmarineType</a>.Player &amp;&amp; !s.HasTag(<a class="code" href="namespace_barotrauma.html#af9e8b4c488b5c9a2ed4b9e967afd748f">SubmarineTag</a>.HideInMenus)),</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;                        GameModePreset.DevSandbox);</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;                    <span class="keywordtype">string</span> seed = ToolBox.RandomSeed(16);</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;                    gamesession.StartRound(seed);</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160; </div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;                    Rectangle subWorldRect = <a class="code" href="namespace_barotrauma_1_1_networking.html#ad2bd88ee885a12024889adafbe8fcc47a0d234e5bcf75c768eb0db6bf96e3c22d">Submarine</a>.MainSub.Borders;</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;                    subWorldRect.Location += <span class="keyword">new</span> Point((<span class="keywordtype">int</span>)<a class="code" href="namespace_barotrauma_1_1_networking.html#ad2bd88ee885a12024889adafbe8fcc47a0d234e5bcf75c768eb0db6bf96e3c22d">Submarine</a>.MainSub.WorldPosition.X, (<span class="keywordtype">int</span>)<a class="code" href="namespace_barotrauma_1_1_networking.html#ad2bd88ee885a12024889adafbe8fcc47a0d234e5bcf75c768eb0db6bf96e3c22d">Submarine</a>.MainSub.WorldPosition.Y);</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;                    subWorldRect.Y -= subWorldRect.Height;</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;                    <span class="keywordflow">foreach</span> (var ruin <span class="keywordflow">in</span> Level.Loaded.Ruins)</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;                    {</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;                        <span class="keywordflow">if</span> (ruin.Area.Intersects(subWorldRect))</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;                        {</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;                            ThrowError(<span class="stringliteral">&quot;Ruins intersect with the sub. Seed: &quot;</span> + seed + <span class="stringliteral">&quot;, Submarine: &quot;</span> + <a class="code" href="namespace_barotrauma_1_1_networking.html#ad2bd88ee885a12024889adafbe8fcc47a0d234e5bcf75c768eb0db6bf96e3c22d">Submarine</a>.MainSub.Info.Name);</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;                            yield <span class="keywordflow">return</span> CoroutineStatus.Success;</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;                        }</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;                    }</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;                    </div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;                    var levelCells = Level.Loaded.GetCells(</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;                        <a class="code" href="namespace_barotrauma_1_1_networking.html#ad2bd88ee885a12024889adafbe8fcc47a0d234e5bcf75c768eb0db6bf96e3c22d">Submarine</a>.MainSub.WorldPosition,</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;                        Math.Max(<a class="code" href="namespace_barotrauma_1_1_networking.html#ad2bd88ee885a12024889adafbe8fcc47a0d234e5bcf75c768eb0db6bf96e3c22d">Submarine</a>.MainSub.Borders.Width / Level.GridCellSize, 2));</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;                    <span class="keywordflow">foreach</span> (var cell <span class="keywordflow">in</span> levelCells)</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;                    {</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;                        Vector2 minExtents = <span class="keyword">new</span> Vector2(</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;                            cell.Edges.Min(e =&gt; Math.Min(e.Point1.X, e.Point2.X)),</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;                            cell.Edges.Min(e =&gt; Math.Min(e.Point1.Y, e.Point2.Y)));</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;                        Vector2 maxExtents = <span class="keyword">new</span> Vector2(</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;                            cell.Edges.Max(e =&gt; Math.Max(e.Point1.X, e.Point2.X)),</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;                            cell.Edges.Max(e =&gt; Math.Max(e.Point1.Y, e.Point2.Y)));</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;                        Rectangle cellRect = <span class="keyword">new</span> Rectangle(</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;                            (<span class="keywordtype">int</span>)minExtents.X, (<span class="keywordtype">int</span>)minExtents.Y, </div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;                            (<span class="keywordtype">int</span>)(maxExtents.X - minExtents.X), (<span class="keywordtype">int</span>)(maxExtents.Y - minExtents.Y));</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;                        <span class="keywordflow">if</span> (cellRect.Intersects(subWorldRect))</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;                        {</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;                            ThrowError(<span class="stringliteral">&quot;Level cells intersect with the sub. Seed: &quot;</span> + seed + <span class="stringliteral">&quot;, Submarine: &quot;</span> + <a class="code" href="namespace_barotrauma_1_1_networking.html#ad2bd88ee885a12024889adafbe8fcc47a0d234e5bcf75c768eb0db6bf96e3c22d">Submarine</a>.MainSub.Info.Name);</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;                            yield <span class="keywordflow">return</span> CoroutineStatus.Success;</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;                        }</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;                    }</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160; </div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;                    GameMain.GameSession.EndRound(<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;                    <a class="code" href="namespace_barotrauma_1_1_networking.html#ad2bd88ee885a12024889adafbe8fcc47a0d234e5bcf75c768eb0db6bf96e3c22d">Submarine</a>.Unload();</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160; </div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;                    count++;</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;                    NewMessage(<span class="stringliteral">&quot;Level seed &quot;</span> + seed + <span class="stringliteral">&quot; ok (test #&quot;</span> + count + <span class="stringliteral">&quot;)&quot;</span>);</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;<span class="preprocessor">#if CLIENT</span></div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;                    <span class="comment">//dismiss round summary and any other message boxes</span></div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;                    GUIMessageBox.CloseAll();</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;                    yield <span class="keywordflow">return</span> CoroutineStatus.Running;</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;                }</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;            }</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160; </div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;setlocationreputation&quot;</span>, <span class="stringliteral">&quot;setlocationreputation [value]: Set the reputation in the current location to the specified value.&quot;</span>, (<span class="keywordtype">string</span>[] args) =&gt;</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;            {</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;                <span class="keywordflow">if</span> (GameMain.GameSession?.GameMode is CampaignMode campaign)</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;                {</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;                    if (args.Length == 0) { return; }</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;                    if (<span class="keywordtype">float</span>.TryParse(args[0], NumberStyles.Any, CultureInfo.InvariantCulture, out <span class="keywordtype">float</span> reputation))</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;                    {</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;                        campaign.Map.CurrentLocation.Reputation.SetReputation(reputation);</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;                    }</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;                    {</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;                        ThrowError($<span class="stringliteral">&quot;Could not set location reputation ({args[0]} is not a valid reputation value).&quot;</span>);</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;                    }</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;                }</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;                {</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;                    ThrowError(<span class="stringliteral">&quot;Could not set location reputation (no active campaign).&quot;</span>);</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;                }</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;            }, <span class="keyword">null</span>, <span class="keyword">true</span>));</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;            </div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;setreputation&quot;</span>, <span class="stringliteral">&quot;setreputation [faction] [value]: Set the reputation of a cation to the specified value.&quot;</span>, (<span class="keywordtype">string</span>[] args) =&gt;</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;            {</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;                <span class="keywordflow">if</span> (args.Length &lt; 2)</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;                {</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;                    ThrowError(<span class="stringliteral">&quot;Insufficient arguments (expected 2)&quot;</span>);</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;                }</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160; </div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;                <span class="keywordflow">if</span> (GameMain.GameSession?.GameMode is CampaignMode campaign)</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;                {</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;                    <span class="keywordflow">if</span> (campaign.Factions.FirstOrDefault(f =&gt; f.Prefab.Identifier == args[0]) is { } faction)</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;                    {</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;                        <span class="keywordflow">if</span> (<span class="keywordtype">float</span>.TryParse(args[1], NumberStyles.Any, CultureInfo.InvariantCulture, out <span class="keywordtype">float</span> reputation))</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;                        {</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;                            faction.Reputation.SetReputation(reputation);</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;                        }</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;                        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;                        {</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;                            ThrowError($<span class="stringliteral">&quot;Could not set faction reputation ({args[1]} is not a valid reputation value).&quot;</span>);</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;                        }</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;                    }</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;                    {</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;                        ThrowError($<span class="stringliteral">&quot;Could not set faction reputation (faction {args[0]} not found).&quot;</span>);</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;                    }</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;                }</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;                {</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;                    ThrowError(<span class="stringliteral">&quot;Could not set faction reputation (no active campaign).&quot;</span>);</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;                }</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;            }, () =&gt;</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;            {</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span>[] { FactionPrefab.Prefabs.Select(f =&gt; f.Identifier.Value).ToArray() };</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;            }, <span class="keyword">true</span>));</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160; </div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;fixitems&quot;</span>, <span class="stringliteral">&quot;fixitems: Repairs all items and restores them to full condition.&quot;</span>, (<span class="keywordtype">string</span>[] args) =&gt;</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;            {</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;                <span class="keywordflow">foreach</span> (Item it <span class="keywordflow">in</span> <a class="code" href="namespace_barotrauma.html#af22238dc2b76a4392541f8b2214c8108a7d74f3b92b19da5e606d737d339a9679">Item</a>.ItemList)</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;                {</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;                    <span class="keywordflow">if</span> (it.GetComponent&lt;<a class="code" href="class_barotrauma_1_1_items_1_1_components_1_1_genetic_material.html">GeneticMaterial</a>&gt;() != <span class="keyword">null</span>) { <span class="keywordflow">continue</span>; }</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;                    it.Condition = it.MaxCondition;</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;                }</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;            }, <span class="keyword">null</span>, <span class="keyword">true</span>));</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160; </div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;fixhulls|fixwalls&quot;</span>, <span class="stringliteral">&quot;fixwalls/fixhulls: Fixes all walls.&quot;</span>, (<span class="keywordtype">string</span>[] args) =&gt;</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;            {</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;                var walls = <span class="keyword">new</span> List&lt;Structure&gt;(<a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4adc4c71563b9bc39a65be853457e6b7b6">Structure</a>.WallList);</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;                <span class="keywordflow">foreach</span> (Structure w <span class="keywordflow">in</span> walls)</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;                {</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;                    <span class="keywordflow">try</span></div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;                    {</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;                        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; w.SectionCount; i++)</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;                        {</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;                            w.AddDamage(i, -100000.0f);</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;                        }</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;                    }</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;                    <span class="keywordflow">catch</span> (InvalidOperationException e)</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;                    {</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;                        <span class="keywordtype">string</span> errorMsg = <span class="stringliteral">&quot;Error while executing the fixhulls command.\n&quot;</span> + e.StackTrace.CleanupStackTrace();</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;                        GameAnalyticsManager.AddErrorEventOnce(<span class="stringliteral">&quot;DebugConsole.FixHulls&quot;</span>, GameAnalyticsManager.ErrorSeverity.Error, errorMsg);</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;                    }</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;                }</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;            }, <span class="keyword">null</span>, <span class="keyword">true</span>));</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;            </div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;upgradeitem&quot;</span>, <span class="stringliteral">&quot;upgradeitem [upgrade] [level] [items]: Adds an upgrade to the current targeted item.&quot;</span>, args =&gt;</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;            {</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;                <span class="keywordflow">if</span> (args.Length &gt; 0)</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;                {</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;                    <span class="keywordtype">int</span> level;</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;                    <span class="keywordflow">if</span> (args.Length &gt; 1)</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;                    {</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;                        <span class="keywordflow">if</span> (<span class="keywordtype">int</span>.TryParse(args[1], out <span class="keywordtype">int</span> result))</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;                        {</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;                            level = result;</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;                        }</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;                        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;                        {</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;                            ThrowError($<span class="stringliteral">&quot;\&quot;{args[1]}\&quot; is not a valid level.&quot;</span>);</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;                            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;                        }</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;                        </div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;                    }</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;                    {</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;                        ThrowError(<span class="stringliteral">&quot;Parameter \&quot;level\&quot; is required.&quot;</span>);</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;                        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;                    }</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160; </div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;                    var upgradePrefab = UpgradePrefab.Find(args[0].ToIdentifier());</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160; </div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;                    <span class="keywordflow">if</span> (upgradePrefab == <span class="keyword">null</span>)</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;                    {</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;                        ThrowError($<span class="stringliteral">&quot;Unknown upgrade: {args[0]}.&quot;</span>);</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;                        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;                    }</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160; </div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;                    List&lt;MapEntity&gt; targetItems = <span class="keyword">new</span> List&lt;MapEntity&gt;();</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160; </div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;                    <span class="keywordflow">if</span> (upgradePrefab.IsWallUpgrade)</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;                    {</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;                        targetItems.AddRange(<a class="code" href="namespace_barotrauma_1_1_networking.html#ad2bd88ee885a12024889adafbe8fcc47a0d234e5bcf75c768eb0db6bf96e3c22d">Submarine</a>.MainSub.GetWalls(<span class="keyword">true</span>).Cast&lt;MapEntity&gt;());</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;                    }</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;                    {</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;                        <span class="keywordflow">if</span> (args.Length &gt; 2)</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;                        {</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;                            targetItems.AddRange(<a class="code" href="namespace_barotrauma.html#af22238dc2b76a4392541f8b2214c8108a7d74f3b92b19da5e606d737d339a9679">Item</a>.ItemList.Where(item =&gt; item.Submarine == <a class="code" href="namespace_barotrauma_1_1_networking.html#ad2bd88ee885a12024889adafbe8fcc47a0d234e5bcf75c768eb0db6bf96e3c22d">Submarine</a>.MainSub).Where(item =&gt; item.HasTag(args[2])).Cast&lt;MapEntity&gt;());</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;                        }</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;                        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;                        {</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;                            ThrowError(<span class="stringliteral">&quot;Argument \&quot;tag\&quot; is required.&quot;</span>);</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;                            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;                        }</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;                    }</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160; </div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;                    <span class="keywordflow">if</span> (!targetItems.Any())</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;                    {</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;                        ThrowError(<span class="stringliteral">&quot;No valid items found.&quot;</span>);</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;                        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;                    }</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160; </div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;                    <span class="keywordflow">foreach</span> (MapEntity targetItem <span class="keywordflow">in</span> targetItems)</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;                    {</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;                        Upgrade existingUpgrade = targetItem.GetUpgrade(args[0].ToIdentifier());</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160; </div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;                        <span class="keywordflow">if</span> (!(targetItem is ISerializableEntity sEntity)) { <span class="keywordflow">continue</span>; }</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160; </div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;                        var upgrade = <span class="keyword">new</span> Upgrade(sEntity, upgradePrefab, level);</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;                        <span class="keywordflow">if</span> (targetItem.AddUpgrade(upgrade, <span class="keyword">true</span>))</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;                        {</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;                            <span class="keywordflow">if</span> (existingUpgrade == <span class="keyword">null</span>)</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;                            {</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;                                NewMessage($<span class="stringliteral">&quot;Added {upgradePrefab.Identifier}:{level} to {sEntity.Name}.&quot;</span>, Color.Green);</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;                                upgrade.ApplyUpgrade(); </div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;                            }</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;                            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;                            {</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;                                NewMessage($<span class="stringliteral">&quot;Set {sEntity.Name}&#39;s {upgradePrefab.Identifier} upgrade to level {existingUpgrade.Level}.&quot;</span>, Color.Cyan);</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;                                existingUpgrade.ApplyUpgrade(); </div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;                            }</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;                        }</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;                        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;                        {</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;                            ThrowError($<span class="stringliteral">&quot;{upgrade.Prefab.Identifier} cannot be applied to {sEntity.Name}&quot;</span>);</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;                        }</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;                    }</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;                }</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;                {</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;                    ThrowError(<span class="stringliteral">&quot;Parameter \&quot;upgrade\&quot; is required.&quot;</span>);</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;                }</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;            }, () =&gt;</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;            {</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span>[]</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;                {</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;                    UpgradePrefab.Prefabs.Select(c =&gt; c.Identifier).Distinct().Select(i =&gt; i.Value).ToArray()</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;                };</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;            }, <span class="keyword">true</span>));</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;            </div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;maxupgrades&quot;</span>, <span class="stringliteral">&quot;maxupgrades [category] [prefab]: Maxes out all upgrades or only specific one if given arguments.&quot;</span>, args =&gt;</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;            {</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;                UpgradeManager upgradeManager = GameMain.GameSession?.Campaign?.UpgradeManager;</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;                <span class="keywordflow">if</span> (upgradeManager == <span class="keyword">null</span>)</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;                {</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;                    ThrowError(<span class="stringliteral">&quot;This command can only be used in campaign.&quot;</span>);</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;                }</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;                </div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;                <span class="keywordtype">string</span> categoryIdentifier = <span class="keyword">null</span>;</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;                <span class="keywordtype">string</span> prefabIdentifier = <span class="keyword">null</span>;</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160; </div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;                <span class="keywordflow">switch</span> (args.Length)</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;                {</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;                    <span class="keywordflow">case</span> 1:</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;                        categoryIdentifier = args[0];</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;                    <span class="keywordflow">case</span> 2:</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;                        categoryIdentifier = args[0];</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;                        prefabIdentifier = args[1];</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;                }</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;                </div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;                <span class="keywordflow">foreach</span> (UpgradeCategory category <span class="keywordflow">in</span> UpgradeCategory.Categories)</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;                {</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;                    <span class="keywordflow">if</span> (!<span class="keywordtype">string</span>.IsNullOrWhiteSpace(categoryIdentifier) &amp;&amp; category.Identifier != categoryIdentifier) { <span class="keywordflow">continue</span>; }</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;                    <span class="keywordflow">foreach</span> (UpgradePrefab prefab <span class="keywordflow">in</span> UpgradePrefab.Prefabs)</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;                    {</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;                        <span class="keywordflow">if</span> (!prefab.UpgradeCategories.Contains(category)) { <span class="keywordflow">continue</span>; }</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;                        <span class="keywordflow">if</span> (!<span class="keywordtype">string</span>.IsNullOrWhiteSpace(prefabIdentifier) &amp;&amp; prefab.Identifier != prefabIdentifier) { <span class="keywordflow">continue</span>; }</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;                        </div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;                        <span class="keywordtype">int</span> targetLevel = prefab.MaxLevel - upgradeManager.GetRealUpgradeLevel(prefab, category);</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;                        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; targetLevel; i++)</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;                        {</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;                            upgradeManager.PurchaseUpgrade(prefab, category, force: <span class="keyword">true</span>);</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;                        }</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;                        NewMessage($<span class="stringliteral">&quot;Upgraded {category.Identifier}.{prefab.Identifier} by {targetLevel} levels.&quot;</span>, Color.DarkGreen);</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;                    }</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;                }</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160; </div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;                NewMessage($<span class="stringliteral">&quot;Start a new round to apply the upgrades.&quot;</span>, Color.Lime);</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;            }, () =&gt;</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;            {</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span>[]</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;                {</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;                    UpgradeCategory.Categories.Select(c =&gt; c.Identifier).Distinct().Select(i =&gt; i.Value).ToArray(),</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;                    UpgradePrefab.Prefabs.Select(c =&gt; c.Identifier).Distinct().Select(i =&gt; i.Value).ToArray()</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;                };</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;            }, <span class="keyword">true</span>));</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160; </div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;power&quot;</span>, <span class="stringliteral">&quot;power: Immediately powers up the submarine&#39;s nuclear reactor.&quot;</span>, (<span class="keywordtype">string</span>[] args) =&gt;</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;            {</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;                <a class="code" href="namespace_barotrauma.html#af22238dc2b76a4392541f8b2214c8108a7d74f3b92b19da5e606d737d339a9679">Item</a> reactorItem = <a class="code" href="namespace_barotrauma.html#af22238dc2b76a4392541f8b2214c8108a7d74f3b92b19da5e606d737d339a9679">Item</a>.ItemList.Find(i =&gt; i.GetComponent&lt;<a class="code" href="class_barotrauma_1_1_items_1_1_components_1_1_reactor.html">Reactor</a>&gt;() != <span class="keyword">null</span>);</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;                <span class="keywordflow">if</span> (reactorItem == <span class="keyword">null</span>) { <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160; </div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;                var reactor = reactorItem.GetComponent&lt;<a class="code" href="class_barotrauma_1_1_items_1_1_components_1_1_reactor.html">Reactor</a>&gt;();</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;                reactor.<a class="code" href="class_barotrauma_1_1_items_1_1_components_1_1_reactor.html#ad9e6a04a877d0639997aca6a1e6297cc">PowerUpImmediately</a>();</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;<span class="preprocessor">#if SERVER</span></div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;                <span class="keywordflow">if</span> (GameMain.Server != <span class="keyword">null</span>)</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;                {</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;                    reactorItem.CreateServerEvent(reactor);</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;                }</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;            }, <span class="keyword">null</span>, <span class="keyword">true</span>));</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160; </div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;oxygen|air&quot;</span>, <span class="stringliteral">&quot;oxygen/air: Replenishes the oxygen levels in every room to 100%.&quot;</span>, (<span class="keywordtype">string</span>[] args) =&gt;</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;            {</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;                <span class="keywordflow">foreach</span> (Hull hull <span class="keywordflow">in</span> Hull.HullList)</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;                {</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;                    hull.OxygenPercentage = 100.0f;</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;                }</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;            }, <span class="keyword">null</span>, <span class="keyword">true</span>));</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160; </div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;kill&quot;</span>, <span class="stringliteral">&quot;kill [character]: Immediately kills the specified character.&quot;</span>, (<span class="keywordtype">string</span>[] args) =&gt;</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;            {</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;                <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a> killedCharacter = (args.Length == 0) ? <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.Controlled : FindMatchingCharacter(args);</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;                killedCharacter?.SetAllDamage(200.0f, 0.0f, 0.0f);</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;            },</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;            () =&gt;</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;            {</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> <span class="keywordtype">string</span>[][]</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;                {</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;                    <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.CharacterList.Select(c =&gt; c.<a class="code" href="class_barotrauma_1_1_networking_1_1_client.html#a4bc29d866927023d4bc513e708ceeff4">Name</a>).Distinct().OrderBy(n =&gt; n).ToArray()</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;                };</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;            }, isCheat: <span class="keyword">true</span>));</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160; </div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;killmonsters&quot;</span>, <span class="stringliteral">&quot;killmonsters: Immediately kills all AI-controlled enemies in the level.&quot;</span>, (<span class="keywordtype">string</span>[] args) =&gt;</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;            {</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;                <span class="keywordflow">foreach</span> (Character c <span class="keywordflow">in</span> <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.CharacterList)</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;                {</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;                    <span class="keywordflow">if</span> (c.AIController is EnemyAIController enemyAI &amp;&amp; enemyAI.PetBehavior == <span class="keyword">null</span>)</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;                    {</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;                        c.SetAllDamage(200.0f, 0.0f, 0.0f);</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;                    }</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;                }</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;                <span class="keywordflow">foreach</span> (Hull hull <span class="keywordflow">in</span> Hull.HullList)</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;                {</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;                    hull.BallastFlora?.Kill();</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;                }</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;                <span class="keywordflow">foreach</span> (Submarine sub <span class="keywordflow">in</span> <a class="code" href="namespace_barotrauma_1_1_networking.html#ad2bd88ee885a12024889adafbe8fcc47a0d234e5bcf75c768eb0db6bf96e3c22d">Submarine</a>.Loaded)</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;                {</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;                    sub.WreckAI?.Kill();</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;                }</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;            }, <span class="keyword">null</span>, isCheat: <span class="keyword">true</span>));</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160; </div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;despawnnow&quot;</span>, <span class="stringliteral">&quot;despawnnow [character]: Immediately despawns the specified dead character. If the character argument is omitted, all dead characters are despawned.&quot;</span>, (<span class="keywordtype">string</span>[] args) =&gt;</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;            {</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;                <span class="keywordflow">if</span> (args.Length == 0)</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;                {</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;                    <span class="keywordflow">foreach</span> (Character c <span class="keywordflow">in</span> <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.CharacterList.Where(c =&gt; c.IsDead).ToList())</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;                    {</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;                        c.DespawnNow();</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;                    }</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;                }</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;                {</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;                    <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a> character = FindMatchingCharacter(args);</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;                    character?.DespawnNow();</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;                }</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;            },</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;            () =&gt;</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;            {</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> <span class="keywordtype">string</span>[][]</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;                {</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;                    <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.CharacterList.Where(c =&gt; c.IsDead).Select(c =&gt; c.Name).Distinct().OrderBy(n =&gt; n).ToArray()</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;                };</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;            }, isCheat: <span class="keyword">true</span>));</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160; </div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;setclientcharacter&quot;</span>, <span class="stringliteral">&quot;setclientcharacter [client name] [character name]: Gives the client control of the specified character.&quot;</span>, <span class="keyword">null</span>,</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;            () =&gt;</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;            {</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;                <span class="keywordflow">if</span> (GameMain.NetworkMember == <span class="keyword">null</span>) <span class="keywordflow">return</span> <span class="keyword">null</span>;</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160; </div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> <span class="keywordtype">string</span>[][]</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;                {</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;                    GameMain.NetworkMember.ConnectedClients.Select(c =&gt; c.Name).ToArray(),</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;                    <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.CharacterList.Select(c =&gt; c.Name).Distinct().OrderBy(n =&gt; n).ToArray()</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;                };</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;            }));</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160; </div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;campaigninfo|campaignstatus&quot;</span>, <span class="stringliteral">&quot;campaigninfo: Display information about the state of the currently active campaign.&quot;</span>, (<span class="keywordtype">string</span>[] args) =&gt;</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;            {</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;                <span class="keywordflow">if</span> (!(GameMain.GameSession?.GameMode is CampaignMode campaign))</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;                {</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;                    ThrowError(<span class="stringliteral">&quot;No campaign active!&quot;</span>);</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;                }</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160; </div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;                campaign.LogState();</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;            }));</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160; </div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;campaigndestination|setcampaigndestination&quot;</span>, <span class="stringliteral">&quot;campaigndestination [index]: Set the location to head towards in the currently active campaign.&quot;</span>, (<span class="keywordtype">string</span>[] args) =&gt;</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;            {</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;                <span class="keywordflow">if</span> (!(GameMain.GameSession?.GameMode is CampaignMode campaign))</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;                {</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;                    ThrowError(<span class="stringliteral">&quot;No campaign active!&quot;</span>);</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;                }</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160; </div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;                <span class="keywordflow">if</span> (args.Length == 0)</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;                {</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;                    <span class="keywordtype">int</span> i = 0;</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;                    <span class="keywordflow">foreach</span> (LocationConnection connection <span class="keywordflow">in</span> campaign.Map.CurrentLocation.Connections)</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;                    {</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;                        NewMessage(<span class="stringliteral">&quot;     &quot;</span> + i + <span class="stringliteral">&quot;. &quot;</span> + connection.OtherLocation(campaign.Map.CurrentLocation).Name, Color.White);</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;                        i++;</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;                    }</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;                    ShowQuestionPrompt(<span class="stringliteral">&quot;Select a destination (0 - &quot;</span> + (campaign.Map.CurrentLocation.Connections.Count - 1) + <span class="stringliteral">&quot;):&quot;</span>, (<span class="keywordtype">string</span> selectedDestination) =&gt;</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;                    {</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;                        int destinationIndex = -1;</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;                        if (!int.TryParse(selectedDestination, out destinationIndex)) return;</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;                        if (destinationIndex &lt; 0 || destinationIndex &gt;= campaign.Map.CurrentLocation.Connections.Count)</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;                        {</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;                            NewMessage(<span class="stringliteral">&quot;Index out of bounds!&quot;</span>, Color.Red);</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;                            return;</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;                        }</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;                        Location location = campaign.Map.CurrentLocation.Connections[destinationIndex].OtherLocation(campaign.Map.CurrentLocation);</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;                        campaign.Map.SelectLocation(location);</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;                        NewMessage(location.Name + <span class="stringliteral">&quot; selected.&quot;</span>, Color.White);</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;                    });</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;                }</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;                {</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;                    <span class="keywordtype">int</span> destinationIndex = -1;</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;                    <span class="keywordflow">if</span> (!<span class="keywordtype">int</span>.TryParse(args[0], out destinationIndex)) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;                    <span class="keywordflow">if</span> (destinationIndex &lt; 0 || destinationIndex &gt;= campaign.Map.CurrentLocation.Connections.Count)</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;                    {</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;                        NewMessage(<span class="stringliteral">&quot;Index out of bounds!&quot;</span>, Color.Red);</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;                        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;                    }</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;                    Location location = campaign.Map.CurrentLocation.Connections[destinationIndex].OtherLocation(campaign.Map.CurrentLocation);</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;                    campaign.Map.SelectLocation(location);</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;                    NewMessage(location.Name + <span class="stringliteral">&quot; selected.&quot;</span>, Color.White);</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;                }</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;            }));</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160; </div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;togglecampaignteleport&quot;</span>, <span class="stringliteral">&quot;Toggle on/off teleportation between campaign locations by double clicking on the campaign map.&quot;</span>, args =&gt;</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;            {</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;                <span class="keywordflow">if</span> (GameMain.GameSession?.Campaign == <span class="keyword">null</span>)</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;                {</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;                    ThrowError(<span class="stringliteral">&quot;No campaign active.&quot;</span>);</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;                }</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;                GameMain.GameSession.Map.AllowDebugTeleport = !GameMain.GameSession.Map.AllowDebugTeleport;</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;                NewMessage((GameMain.GameSession.Map.AllowDebugTeleport ? <span class="stringliteral">&quot;Enabled&quot;</span> : <span class="stringliteral">&quot;Disabled&quot;</span>) + <span class="stringliteral">&quot; teleportation on the campaign map.&quot;</span>, Color.White);</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;            }, isCheat: <span class="keyword">true</span>));</div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160; </div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;money&quot;</span>, <span class="stringliteral">&quot;money [amount] [character]: Gives the specified amount of money to the crew when a campaign is active.&quot;</span>, args =&gt;</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;            {</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;                <span class="keywordflow">if</span> (args.Length == 0) { <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160; </div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;                <span class="keywordflow">if</span> (!(GameMain.GameSession?.GameMode is CampaignMode campaign)) { <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;                <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a> targetCharacter = <span class="keyword">null</span>;</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160; </div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;                <span class="keywordflow">if</span> (args.Length &gt;= 2)</div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;                {</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;                    targetCharacter = FindMatchingCharacter(args.Skip(1).ToArray());</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;                }</div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160; </div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;                <span class="keywordflow">if</span> (<span class="keywordtype">int</span>.TryParse(args[0], out <span class="keywordtype">int</span> money))</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;                {</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;                    Wallet wallet = targetCharacter is <span class="keyword">null</span> || GameMain.IsSingleplayer ? campaign.Bank : targetCharacter.Wallet;</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;                    wallet.Give(money);</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;                    GameAnalyticsManager.AddMoneyGainedEvent(money, GameAnalyticsManager.MoneySource.Cheat, <span class="stringliteral">&quot;console&quot;</span>);</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;                }</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;                {</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;                    ThrowError($<span class="stringliteral">&quot;\&quot;{args[0]}\&quot; is not a valid numeric value.&quot;</span>);</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;                }</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;            }, isCheat: <span class="keyword">true</span>, getValidArgs: () =&gt; <span class="keyword">new</span> []</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;            {</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;                <span class="keyword">new</span> []{ <span class="keywordtype">string</span>.Empty },</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;                <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.CharacterList.Select(c =&gt; c.Name).Distinct().ToArray()</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;            }));</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160; </div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;showmoney&quot;</span>, <span class="stringliteral">&quot;showmoney: Shows the amount of money in everyones wallet.&quot;</span>, args =&gt;</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;            {</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;                <span class="keywordflow">if</span> (!(GameMain.GameSession?.GameMode is CampaignMode campaign))</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;                {</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;                    ThrowError(<span class="stringliteral">&quot;No campaign active!&quot;</span>);</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;                }</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160; </div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;                NewMessage($<span class="stringliteral">&quot;Bank: {campaign.Bank.Balance}&quot;</span>);</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;            }, isCheat: <span class="keyword">true</span>));</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160; </div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;skipeventcooldown&quot;</span>, <span class="stringliteral">&quot;skipeventcooldown: Skips the currently active event cooldown and triggers pending monster spawns immediately.&quot;</span>, args =&gt;</div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;            {</div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;                GameMain.GameSession?.EventManager?.SkipEventCooldown();</div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;            }, isCheat: <span class="keyword">true</span>));</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160; </div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;ballastflora&quot;</span>, <span class="stringliteral">&quot;infectballast [options]: Infect ballasts and control its growth.&quot;</span>, args =&gt;</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;            {</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;                <span class="keywordflow">if</span> (args.Length == 0)</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;                {</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;                    ThrowError(<span class="stringliteral">&quot;No action specified.&quot;</span>); </div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;                }</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160; </div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;                <span class="keywordtype">string</span> primaryAction = args.Length &gt; 0 ? args[0] : <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;                <span class="keywordtype">string</span> secondaryArgument = args.Length &gt; 1 ? args[1] : <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160; </div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="namespace_barotrauma_1_1_networking.html#ad2bd88ee885a12024889adafbe8fcc47a0d234e5bcf75c768eb0db6bf96e3c22d">Submarine</a>.MainSub == <span class="keyword">null</span>)</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;                {</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;                    ThrowError(<span class="stringliteral">&quot;No submarine loaded.&quot;</span>);</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;                }</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160; </div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;                <span class="keywordflow">if</span> (primaryAction.Equals(<span class="stringliteral">&quot;infect&quot;</span>, StringComparison.OrdinalIgnoreCase))</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;                {</div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;                    List&lt;Pump&gt; pumps = <span class="keyword">new</span> List&lt;Pump&gt;();</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;                    <span class="keywordflow">foreach</span> (Item item <span class="keywordflow">in</span> <a class="code" href="namespace_barotrauma_1_1_networking.html#ad2bd88ee885a12024889adafbe8fcc47a0d234e5bcf75c768eb0db6bf96e3c22d">Submarine</a>.MainSub.GetItems(<span class="keyword">true</span>))</div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;                    {</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;                        <span class="keywordflow">if</span> (item.CurrentHull != <span class="keyword">null</span> &amp;&amp; item.HasTag(<span class="stringliteral">&quot;ballast&quot;</span>) &amp;&amp; item.GetComponent&lt;<a class="code" href="class_barotrauma_1_1_items_1_1_components_1_1_pump.html">Pump</a>&gt;() is { } pump)</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;                        {</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;                            <span class="keywordflow">if</span> (item.CurrentHull.BallastFlora != <span class="keyword">null</span>) { <span class="keywordflow">continue</span>; }</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;                            pumps.Add(pump);</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;                        }</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;                    }</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;                </div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;                    <span class="keywordflow">if</span> (pumps.Any())</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;                    {</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;                        BallastFloraPrefab prefab = <span class="keywordtype">string</span>.IsNullOrWhiteSpace(secondaryArgument) ? BallastFloraPrefab.Prefabs.First() : BallastFloraPrefab.Find(secondaryArgument.ToIdentifier());</div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;                        <span class="keywordflow">if</span> (prefab == <span class="keyword">null</span>)</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;                        {</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;                            ThrowError($<span class="stringliteral">&quot;No such behavior: {secondaryArgument}&quot;</span>);</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;                            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;                        }</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160; </div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;                        <a class="code" href="class_barotrauma_1_1_items_1_1_components_1_1_pump.html">Pump</a> random = pumps.GetRandomUnsynced();</div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;                        random.<a class="code" href="class_barotrauma_1_1_items_1_1_components_1_1_pump.html#a181d08fdf90d82422cd2ba7561b405c2">InfectBallast</a>(prefab.Identifier, allowMultiplePerShip: <span class="keyword">true</span>);</div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;                        NewMessage($<span class="stringliteral">&quot;Infected {random.Name} with {prefab.Identifier} in {random.Item.CurrentHull.DisplayName}.&quot;</span>, Color.Green);</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;                        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;                    }</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160; </div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;                    ThrowError(<span class="stringliteral">&quot;No available pumps to infect on this submarine.&quot;</span>);</div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;                }</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160; </div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;                <span class="keywordflow">if</span> (primaryAction.Equals(<span class="stringliteral">&quot;growthwarp&quot;</span>, StringComparison.OrdinalIgnoreCase))</div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;                {</div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;                    <span class="keywordflow">if</span> (<span class="keywordtype">int</span>.TryParse(secondaryArgument, out <span class="keywordtype">int</span> value))</div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;                    {</div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;                        <span class="keywordflow">foreach</span> (Hull hull <span class="keywordflow">in</span> Hull.HullList.Where(h =&gt; h.BallastFlora != <span class="keyword">null</span>))</div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;                        {</div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;                            BallastFloraBehavior bs = hull.BallastFlora;</div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;                            bs.GrowthWarps = value;</div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;                        }</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160; </div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;                        NewMessage(<span class="stringliteral">&quot;Accelerating growth...&quot;</span>, Color.Green);</div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;                        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;                    }</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160; </div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;                    ThrowError($<span class="stringliteral">&quot;Invalid integer \&quot;{secondaryArgument}\&quot;.&quot;</span>);</div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;                }</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;            }, isCheat: <span class="keyword">true</span>, getValidArgs: () =&gt;</div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;            {</div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;                <span class="keywordtype">string</span>[] primaries = { <span class="stringliteral">&quot;infect&quot;</span>, <span class="stringliteral">&quot;growthwarp&quot;</span> };</div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;                <span class="keywordtype">string</span>[] identifiers = BallastFloraPrefab.Prefabs.Select(bfp =&gt; bfp.Identifier).Distinct().Select(i =&gt; i.Value).ToArray();</div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span>[] { primaries, identifiers };</div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;            }));</div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160; </div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;setdifficulty|forcedifficulty&quot;</span>, <span class="stringliteral">&quot;difficulty [0-100]. Leave the parameter empty to disable.&quot;</span>, (<span class="keywordtype">string</span>[] args) =&gt;</div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;            {</div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;                <span class="keywordflow">if</span> (args.Length == 0)</div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;                {</div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;                    Level.ForcedDifficulty = <span class="keyword">null</span>;</div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;                    NewMessage($<span class="stringliteral">&quot;Forced difficulty level disabled.&quot;</span>, Color.Green);</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;                }</div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keywordtype">float</span>.TryParse(args[0], out <span class="keywordtype">float</span> difficulty))</div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;                {</div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;                    Level.ForcedDifficulty = difficulty;</div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;                    NewMessage($<span class="stringliteral">&quot;Set the difficulty level to { Level.ForcedDifficulty }.&quot;</span>, Color.Yellow);</div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;                }</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;            }, isCheat: <span class="keyword">true</span>));</div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160; </div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;difficulty|leveldifficulty&quot;</span>, <span class="stringliteral">&quot;difficulty [0-100]: Change the level difficulty setting in the server lobby.&quot;</span>, <span class="keyword">null</span>));</div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;            </div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;autoitemplacerdebug|outfitdebug&quot;</span>, <span class="stringliteral">&quot;autoitemplacerdebug: Toggle automatic item placer debug info on/off. The automatically placed items are listed in the debug console at the start of a round.&quot;</span>, (<span class="keywordtype">string</span>[] args) =&gt;</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;            {</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;                AutoItemPlacer.OutputDebugInfo = !AutoItemPlacer.OutputDebugInfo;</div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;                NewMessage((AutoItemPlacer.OutputDebugInfo ? <span class="stringliteral">&quot;Enabled&quot;</span> : <span class="stringliteral">&quot;Disabled&quot;</span>) + <span class="stringliteral">&quot; automatic item placer logging.&quot;</span>, Color.White);</div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;            }, isCheat: <span class="keyword">false</span>));</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160; </div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;verboselogging&quot;</span>, <span class="stringliteral">&quot;verboselogging: Toggle verbose console logging on/off. When on, additional debug information is written to the debug console.&quot;</span>, (<span class="keywordtype">string</span>[] args) =&gt;</div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;            {</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;                var config = GameSettings.CurrentConfig;</div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;                config.VerboseLogging = !GameSettings.CurrentConfig.VerboseLogging;</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;                GameSettings.SetCurrentConfig(config);</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;                NewMessage((GameSettings.CurrentConfig.VerboseLogging ? <span class="stringliteral">&quot;Enabled&quot;</span> : <span class="stringliteral">&quot;Disabled&quot;</span>) + <span class="stringliteral">&quot; verbose logging.&quot;</span>, Color.White);</div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;            }, isCheat: <span class="keyword">false</span>));</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160; </div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;listtasks&quot;</span>, <span class="stringliteral">&quot;listtasks: Lists all asynchronous tasks currently in the task pool.&quot;</span>, (<span class="keywordtype">string</span>[] args) =&gt; { TaskPool.ListTasks(); }));</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160; </div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;calculatehashes&quot;</span>, <span class="stringliteral">&quot;calculatehashes [content package name]: Show the MD5 hashes of the files in the selected content package. If the name parameter is omitted, the first content package is selected.&quot;</span>, (<span class="keywordtype">string</span>[] args) =&gt;</div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;            {</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;                <span class="keywordflow">if</span> (args.Length &gt; 0)</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;                {</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;                    <span class="keywordtype">string</span> packageName = <span class="keywordtype">string</span>.Join(<span class="stringliteral">&quot; &quot;</span>, args);</div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;                    var <span class="keyword">package </span>= ContentPackageManager.EnabledPackages.All.FirstOrDefault(p =&gt; p.Name.Equals(packageName, StringComparison.OrdinalIgnoreCase));</div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;                    <span class="keywordflow">if</span> (package == <span class="keyword">null</span>)</div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;                    {</div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;                        ThrowError(<span class="stringliteral">&quot;Content package \&quot;&quot;</span> + packageName + <span class="stringliteral">&quot;\&quot; not found.&quot;</span>);</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;                    }</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;                    {</div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;                        package.CalculateHash(logging: <span class="keyword">true</span>);</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;                    }</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;                }</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;                {</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;                    ContentPackageManager.EnabledPackages.Core.CalculateHash(logging: <span class="keyword">true</span>);</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;                }</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;            },</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;            () =&gt;</div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;            {</div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> <span class="keywordtype">string</span>[][]</div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;                {</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;                    ContentPackageManager.EnabledPackages.All.Select(cp =&gt; cp.Name).ToArray()</div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;                };</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;            }));</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160; </div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;simulatedlatency&quot;</span>, <span class="stringliteral">&quot;simulatedlatency [minimumlatencyseconds] [randomlatencyseconds]: applies a simulated latency to network messages. Useful for simulating real network conditions when testing the multiplayer locally.&quot;</span>, (<span class="keywordtype">string</span>[] args) =&gt;</div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;            {</div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;                <span class="keywordflow">if</span> (args.Count() &lt; 2 || (GameMain.NetworkMember == <span class="keyword">null</span>)) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;                <span class="keywordflow">if</span> (!<span class="keywordtype">float</span>.TryParse(args[0], NumberStyles.Any, CultureInfo.InvariantCulture, out <span class="keywordtype">float</span> minimumLatency))</div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;                {</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;                    ThrowError(args[0] + <span class="stringliteral">&quot; is not a valid latency value.&quot;</span>);</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;                }</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;                <span class="keywordflow">if</span> (!<span class="keywordtype">float</span>.TryParse(args[1], NumberStyles.Any, CultureInfo.InvariantCulture, out <span class="keywordtype">float</span> randomLatency))</div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;                {</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;                    ThrowError(args[1] + <span class="stringliteral">&quot; is not a valid latency value.&quot;</span>);</div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;                }</div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;                <span class="keywordflow">if</span> (GameMain.NetworkMember != <span class="keyword">null</span>)</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;                {</div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;                    GameMain.NetworkMember.SimulatedMinimumLatency = minimumLatency;</div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;                    GameMain.NetworkMember.SimulatedRandomLatency = randomLatency;</div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;                }</div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;                NewMessage(<span class="stringliteral">&quot;Set simulated minimum latency to &quot;</span> + minimumLatency.ToString(CultureInfo.InvariantCulture) + <span class="stringliteral">&quot; and random latency to &quot;</span> + randomLatency.ToString(CultureInfo.InvariantCulture) + <span class="stringliteral">&quot;.&quot;</span>, Color.White);</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;            }));</div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160; </div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;simulatedloss&quot;</span>, <span class="stringliteral">&quot;simulatedloss [lossratio]: applies simulated packet loss to network messages. For example, a value of 0.1 would mean 10% of the packets are dropped. Useful for simulating real network conditions when testing the multiplayer locally.&quot;</span>, (<span class="keywordtype">string</span>[] args) =&gt;</div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;            {</div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;                <span class="keywordflow">if</span> (args.Count() &lt; 1 || (GameMain.NetworkMember == <span class="keyword">null</span>)) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;                <span class="keywordflow">if</span> (!<span class="keywordtype">float</span>.TryParse(args[0], NumberStyles.Any, CultureInfo.InvariantCulture, out <span class="keywordtype">float</span> loss))</div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;                {</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;                    ThrowError(args[0] + <span class="stringliteral">&quot; is not a valid loss ratio.&quot;</span>);</div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;                }</div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;                <span class="keywordflow">if</span> (GameMain.NetworkMember != <span class="keyword">null</span>)</div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;                {</div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;                    GameMain.NetworkMember.SimulatedLoss = loss;</div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;                }</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;                NewMessage(<span class="stringliteral">&quot;Set simulated packet loss to &quot;</span> + (<span class="keywordtype">int</span>)(loss * 100) + <span class="stringliteral">&quot;%.&quot;</span>, Color.White);</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;            }));</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;simulatedduplicateschance&quot;</span>, <span class="stringliteral">&quot;simulatedduplicateschance [duplicateratio]: simulates packet duplication in network messages. For example, a value of 0.1 would mean there&#39;s a 10% chance a packet gets sent twice. Useful for simulating real network conditions when testing the multiplayer locally.&quot;</span>, (<span class="keywordtype">string</span>[] args) =&gt;</div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;            {</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;                <span class="keywordflow">if</span> (args.Count() &lt; 1 || (GameMain.NetworkMember == <span class="keyword">null</span>)) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;                <span class="keywordflow">if</span> (!<span class="keywordtype">float</span>.TryParse(args[0], NumberStyles.Any, CultureInfo.InvariantCulture, out <span class="keywordtype">float</span> duplicates))</div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;                {</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;                    ThrowError(args[0] + <span class="stringliteral">&quot; is not a valid duplicate ratio.&quot;</span>);</div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;                }</div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;                <span class="keywordflow">if</span> (GameMain.NetworkMember != <span class="keyword">null</span>)</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;                {</div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;                    GameMain.NetworkMember.SimulatedDuplicatesChance = duplicates;</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;                }</div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;                NewMessage(<span class="stringliteral">&quot;Set packet duplication to &quot;</span> + (<span class="keywordtype">int</span>)(duplicates * 100) + <span class="stringliteral">&quot;%.&quot;</span>, Color.White);</div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;            }));</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160; </div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;<span class="preprocessor">#if DEBUG</span></div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160; </div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;simulatedlongloadingtime&quot;</span>, <span class="stringliteral">&quot;simulatedlongloadingtime [minimum loading time]: forces loading a round to take at least the specified amount of seconds.&quot;</span>, (<span class="keywordtype">string</span>[] args) =&gt;</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;            {</div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;                <span class="keywordflow">if</span> (args.Count() &lt; 1 || (GameMain.NetworkMember == <span class="keyword">null</span>)) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;                <span class="keywordflow">if</span> (!<span class="keywordtype">float</span>.TryParse(args[0], NumberStyles.Any, CultureInfo.InvariantCulture, out <span class="keywordtype">float</span> time))</div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;                {</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;                    ThrowError(args[0] + <span class="stringliteral">&quot; is not a valid duration ratio.&quot;</span>);</div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;                }</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;                GameSession.MinimumLoadingTime = time;                </div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;                NewMessage(<span class="stringliteral">&quot;Set minimum loading time to &quot;</span> + time + <span class="stringliteral">&quot; seconds.&quot;</span>, Color.White);</div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;            }));</div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160; </div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;storeinfo&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, (<span class="keywordtype">string</span>[] args) =&gt;</div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;            {</div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;                <span class="keywordflow">if</span> (GameMain.GameSession?.Map?.CurrentLocation is Location location)</div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;                {</div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;                    <span class="keywordflow">if</span> (location.Stores != <span class="keyword">null</span>)</div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;                    {</div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;                        var msg = <span class="stringliteral">&quot;--- Location: &quot;</span> + location.Name + <span class="stringliteral">&quot; ---&quot;</span>;</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;                        <span class="keywordflow">foreach</span> (var store <span class="keywordflow">in</span> location.Stores)</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;                        {</div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;                            msg += $<span class="stringliteral">&quot;\nStore identifier: {store.Value.Identifier}&quot;</span>;</div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;                            msg += $<span class="stringliteral">&quot;\nBalance: {store.Value.Balance}&quot;</span>;</div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;                            msg += $<span class="stringliteral">&quot;\nPrice modifier: {store.Value.PriceModifier}%&quot;</span>;</div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;                            msg += <span class="stringliteral">&quot;\nDaily specials:&quot;</span>;</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;                            store.Value.DailySpecials.ForEach(i =&gt; msg += $<span class="stringliteral">&quot;\n   - {i.Name}&quot;</span>);</div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;                            msg += <span class="stringliteral">&quot;\nRequested goods:&quot;</span>;</div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;                            store.Value.RequestedGoods.ForEach(i =&gt; msg += $<span class="stringliteral">&quot;\n   - {i.Name}&quot;</span>);</div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;                            </div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;                        }</div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;                        NewMessage(msg);</div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;                    }</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;                    {</div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;                        NewMessage($<span class="stringliteral">&quot;No stores at {location}, can&#39;t show store info.&quot;</span>);</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;                    }</div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;                }</div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;                {</div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;                    NewMessage(<span class="stringliteral">&quot;No current location set, can&#39;t show store info.&quot;</span>);</div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;                }</div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;            }));</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160; </div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;            <span class="comment">//&quot;dummy commands&quot; that only exist so that the server can give clients permissions to use them</span></div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;            <span class="comment">//TODO: alphabetical order?</span></div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;control&quot;</span>, <span class="stringliteral">&quot;control [character name]: Start controlling the specified character (client-only).&quot;</span>, <span class="keyword">null</span>, () =&gt;</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;            {</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> <span class="keywordtype">string</span>[][] { ListCharacterNames() };</div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;            }, isCheat: <span class="keyword">true</span>));</div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;los&quot;</span>, <span class="stringliteral">&quot;Toggle the line of sight effect on/off (client-only).&quot;</span>, <span class="keyword">null</span>, isCheat: <span class="keyword">true</span>));</div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;lighting|lights&quot;</span>, <span class="stringliteral">&quot;Toggle lighting on/off (client-only).&quot;</span>, <span class="keyword">null</span>, isCheat: <span class="keyword">true</span>));</div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;ambientlight&quot;</span>, <span class="stringliteral">&quot;ambientlight [color]: Change the color of the ambient light in the level.&quot;</span>, <span class="keyword">null</span>, isCheat: <span class="keyword">true</span>));</div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;debugdraw&quot;</span>, <span class="stringliteral">&quot;Toggle the debug drawing mode on/off (client-only).&quot;</span>, <span class="keyword">null</span>, isCheat: <span class="keyword">true</span>));</div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;togglevoicechatfilters&quot;</span>, <span class="stringliteral">&quot;Toggle the radio/muffle filters in the voice chat (client-only).&quot;</span>, <span class="keyword">null</span>, isCheat: <span class="keyword">false</span>));</div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;togglehud|hud&quot;</span>, <span class="stringliteral">&quot;Toggle the character HUD (inventories, icons, buttons, etc) on/off (client-only).&quot;</span>, <span class="keyword">null</span>));</div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;toggleupperhud&quot;</span>, <span class="stringliteral">&quot;Toggle the upper part of the ingame HUD (chatbox, crewmanager) on/off (client-only).&quot;</span>, <span class="keyword">null</span>));</div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;toggleitemhighlights&quot;</span>, <span class="stringliteral">&quot;Toggle the item highlight effect on/off (client-only).&quot;</span>, <span class="keyword">null</span>));</div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;togglecharacternames&quot;</span>, <span class="stringliteral">&quot;Toggle the names hovering above characters on/off (client-only).&quot;</span>, <span class="keyword">null</span>));</div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;followsub&quot;</span>, <span class="stringliteral">&quot;Toggle whether the camera should follow the nearest submarine (client-only).&quot;</span>, <span class="keyword">null</span>));</div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;toggleaitargets|aitargets&quot;</span>, <span class="stringliteral">&quot;Toggle the visibility of AI targets (= targets that enemies can detect and attack/escape from) (client-only).&quot;</span>, <span class="keyword">null</span>, isCheat: <span class="keyword">true</span>));</div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;            commands.Add(<span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a>(<span class="stringliteral">&quot;debugai&quot;</span>, <span class="stringliteral">&quot;Toggle the ai debug mode on/off (works properly only in single player).&quot;</span>, <span class="keyword">null</span>, isCheat: <span class="keyword">true</span>));</div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160; </div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;            InitProjectSpecific();</div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160; </div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;            commands.Sort((c1, c2) =&gt; c1.names[0].CompareTo(c2.names[0]));</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;        }</div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160; </div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">string</span> AutoComplete(<span class="keywordtype">string</span> command, <span class="keywordtype">int</span> increment = 1)</div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;        {</div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;            <span class="keywordtype">string</span>[] splitCommand = ToolBox.SplitCommand(command);</div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;            <span class="keywordtype">string</span>[] args = splitCommand.Skip(1).ToArray();</div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160; </div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;            <span class="comment">//if an argument is given or the last character is a space, attempt to autocomplete the argument</span></div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;            <span class="keywordflow">if</span> (args.Length &gt; 0 || (splitCommand.Length &gt; 0 &amp;&amp; command.Last() == <span class="charliteral">&#39; &#39;</span>))</div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;            {</div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;                <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a> matchingCommand = commands.Find(c =&gt; c.names.Contains(splitCommand[0]));</div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;                <span class="keywordflow">if</span> (matchingCommand == <span class="keyword">null</span> || matchingCommand.GetValidArgs == <span class="keyword">null</span>) <span class="keywordflow">return</span> command;</div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160; </div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;                <span class="keywordtype">int</span> autoCompletedArgIndex = args.Length &gt; 0 &amp;&amp; command.Last() != <span class="charliteral">&#39; &#39;</span> ? args.Length - 1 : args.Length;</div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160; </div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;                <span class="comment">//get all valid arguments for the given command</span></div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;                <span class="keywordtype">string</span>[][] allArgs = matchingCommand.GetValidArgs();</div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;                <span class="keywordflow">if</span> (allArgs == <span class="keyword">null</span> || allArgs.GetLength(0) &lt; autoCompletedArgIndex + 1) <span class="keywordflow">return</span> command;</div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160; </div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;                <span class="keywordflow">if</span> (<span class="keywordtype">string</span>.IsNullOrEmpty(currentAutoCompletedCommand))</div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;                {</div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;                    currentAutoCompletedCommand = autoCompletedArgIndex &gt; args.Length - 1 ? <span class="stringliteral">&quot; &quot;</span> : args.Last();</div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;                }</div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160; </div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;                <span class="comment">//find all valid autocompletions for the given argument</span></div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;                <span class="keywordtype">string</span>[] validArgs = allArgs[autoCompletedArgIndex].Where(arg =&gt;</div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;                    currentAutoCompletedCommand.Trim().Length &lt;= arg.Length &amp;&amp;</div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;                    arg.Substring(0, currentAutoCompletedCommand.Trim().Length).ToLower() == currentAutoCompletedCommand.Trim().ToLower()).ToArray();</div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160; </div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;                <span class="keywordflow">if</span> (validArgs.Length == 0) <span class="keywordflow">return</span> command;</div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160; </div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;                currentAutoCompletedIndex = MathUtils.PositiveModulo(currentAutoCompletedIndex + increment, validArgs.Length);</div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;                <span class="keywordtype">string</span> autoCompletedArg = validArgs[currentAutoCompletedIndex];</div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160; </div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;                <span class="comment">//add quotation marks to args that contain spaces</span></div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;                <span class="keywordflow">if</span> (autoCompletedArg.Contains(<span class="charliteral">&#39; &#39;</span>)) autoCompletedArg = <span class="charliteral">&#39;&quot;&#39;</span> + autoCompletedArg + <span class="charliteral">&#39;&quot;&#39;</span>;</div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; splitCommand.Length; i++)</div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;                {</div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;                    <span class="keywordflow">if</span> (splitCommand[i].Contains(<span class="charliteral">&#39; &#39;</span>)) splitCommand[i] = <span class="charliteral">&#39;&quot;&#39;</span> + splitCommand[i] + <span class="charliteral">&#39;&quot;&#39;</span>;</div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;                }</div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160; </div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;                <span class="keywordflow">return</span> <span class="keywordtype">string</span>.Join(<span class="stringliteral">&quot; &quot;</span>, autoCompletedArgIndex &gt;= args.Length ? splitCommand : splitCommand.Take(splitCommand.Length - 1)) + <span class="stringliteral">&quot; &quot;</span> + autoCompletedArg;</div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;            }</div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;            {</div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;                <span class="keywordflow">if</span> (<span class="keywordtype">string</span>.IsNullOrWhiteSpace(currentAutoCompletedCommand))</div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;                {</div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;                    currentAutoCompletedCommand = command;</div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;                }</div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160; </div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;                List&lt;string&gt; matchingCommands = <span class="keyword">new</span> List&lt;string&gt;();</div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;                <span class="keywordflow">foreach</span> (Command c <span class="keywordflow">in</span> commands)</div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;                {</div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;                    <span class="keywordflow">foreach</span> (<span class="keywordtype">string</span> name <span class="keywordflow">in</span> c.names)</div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;                    {</div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;                        <span class="keywordflow">if</span> (currentAutoCompletedCommand.Length &gt; name.Length) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;                        <span class="keywordflow">if</span> (currentAutoCompletedCommand == name.Substring(0, currentAutoCompletedCommand.Length))</div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;                        {</div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;                            matchingCommands.Add(name);</div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;                        }</div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;                    }</div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;                }</div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160; </div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;                <span class="keywordflow">if</span> (matchingCommands.Count == 0) <span class="keywordflow">return</span> command;</div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;                </div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;                currentAutoCompletedIndex = MathUtils.PositiveModulo(currentAutoCompletedIndex + increment, matchingCommands.Count);</div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;                <span class="keywordflow">return</span> matchingCommands[currentAutoCompletedIndex];</div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;            }</div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;        }</div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160; </div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> ResetAutoComplete()</div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;        {</div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;            currentAutoCompletedCommand = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;            currentAutoCompletedIndex = 0;</div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;        }</div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160; </div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> ExecuteCommand(<span class="keywordtype">string</span> command)</div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;        {</div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;            <span class="keywordflow">if</span> (activeQuestionCallback != <span class="keyword">null</span>)</div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;            {</div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;<span class="preprocessor">#if CLIENT</span></div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;                activeQuestionText = <span class="keyword">null</span>;</div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;                NewCommand(command);</div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;                <span class="comment">//reset the variable before invoking the delegate because the method may need to activate another question</span></div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;                var temp = activeQuestionCallback;</div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;                activeQuestionCallback = <span class="keyword">null</span>;</div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;                temp(command);</div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;            }</div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160; </div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;            <span class="keywordflow">if</span> (<span class="keywordtype">string</span>.IsNullOrWhiteSpace(command) || command == <span class="stringliteral">&quot;\\&quot;</span> || command == <span class="stringliteral">&quot;\n&quot;</span>) { <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160; </div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;            <span class="keywordtype">string</span>[] splitCommand = ToolBox.SplitCommand(command);</div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;            <span class="keywordflow">if</span> (splitCommand.Length == 0)</div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;            {</div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;                ThrowError(<span class="stringliteral">&quot;Failed to execute command \&quot;&quot;</span> + command + <span class="stringliteral">&quot;\&quot;!&quot;</span>);</div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;                GameAnalyticsManager.AddErrorEventOnce(</div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;                    <span class="stringliteral">&quot;DebugConsole.ExecuteCommand:LengthZero&quot;</span>,</div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;                    GameAnalyticsManager.ErrorSeverity.Error,</div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;                    <span class="stringliteral">&quot;Failed to execute command \&quot;&quot;</span> + command + <span class="stringliteral">&quot;\&quot;!&quot;</span>);</div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;            }</div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160; </div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;            <span class="keywordtype">string</span> firstCommand = splitCommand[0].ToLowerInvariant();</div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160; </div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;            <span class="keywordflow">if</span> (!firstCommand.Equals(<span class="stringliteral">&quot;admin&quot;</span>, StringComparison.OrdinalIgnoreCase))</div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;            {</div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;                NewCommand(command);</div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;            }</div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160; </div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;<span class="preprocessor">#if CLIENT</span></div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;            <span class="keywordflow">if</span> (GameMain.Client != <span class="keyword">null</span>)</div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;            {</div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;                <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a> matchingCommand = commands.Find(c =&gt; c.names.Contains(firstCommand));</div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;                <span class="keywordflow">if</span> (matchingCommand == <span class="keyword">null</span>)</div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;                {</div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;                    <span class="comment">//if the command is not defined client-side, we&#39;ll relay it anyway because it may be a custom command at the server&#39;s side</span></div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;                    GameMain.Client.SendConsoleCommand(command);</div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;                    NewMessage(<span class="stringliteral">&quot;Server command: &quot;</span> + command, Color.Cyan);</div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;                }</div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (GameMain.Client.HasConsoleCommandPermission(firstCommand))</div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;                {</div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;                    <span class="keywordflow">if</span> (matchingCommand.RelayToServer)</div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;                    {</div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;                        GameMain.Client.SendConsoleCommand(command);</div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;                        NewMessage(<span class="stringliteral">&quot;Server command: &quot;</span> + command, Color.Cyan);</div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;                    }</div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;                    {</div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;                        matchingCommand.ClientExecute(splitCommand.Skip(1).ToArray());</div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;                    }</div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;                }</div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;                <span class="keywordflow">if</span> (!IsCommandPermitted(splitCommand[0].ToLowerInvariant(), GameMain.Client))</div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;                {</div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;<span class="preprocessor">#if DEBUG</span></div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;                    AddWarning($<span class="stringliteral">&quot;You&#39;re not permitted to use the command \&quot;{splitCommand[0].ToLowerInvariant()}\&quot;. Executing the command anyway because this is a debug build.&quot;</span>);</div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;                    <span class="comment">//ThrowError($&quot;You&#39;re not permitted to use the command \&quot;{splitCommand[0].ToLowerInvariant()}\&quot;!&quot;);</span></div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;                    <span class="comment">//return;</span></div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;                }</div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;            }</div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160; </div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;            <span class="keywordtype">bool</span> commandFound = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;            <span class="keywordflow">foreach</span> (Command c <span class="keywordflow">in</span> commands)</div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;            {</div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;                <span class="keywordflow">if</span> (!c.names.Contains(firstCommand)) { <span class="keywordflow">continue</span>; }                </div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;                c.Execute(splitCommand.Skip(1).ToArray());</div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;                commandFound = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;                <span class="keywordflow">break</span>;                </div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;            }</div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160; </div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;            <span class="keywordflow">if</span> (!commandFound)</div>
<div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;            {</div>
<div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;                ThrowError(<span class="stringliteral">&quot;Command \&quot;&quot;</span> + splitCommand[0] + <span class="stringliteral">&quot;\&quot; not found.&quot;</span>);</div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;            }</div>
<div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;        }</div>
<div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160; </div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keywordtype">string</span>[] ListCharacterNames() =&gt; <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.CharacterList.OrderBy(c =&gt; c.IsDead).ThenByDescending(c =&gt; c.IsHuman).ThenBy(c =&gt; c.Name).Select(c =&gt; c.Name).Distinct().ToArray();</div>
<div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160; </div>
<div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;        <span class="keyword">private</span> <span class="keyword">static</span> <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a> FindMatchingCharacter(<span class="keywordtype">string</span>[] args, <span class="keywordtype">bool</span> ignoreRemotePlayers = <span class="keyword">false</span>, <a class="code" href="class_barotrauma_1_1_networking_1_1_client.html">Client</a> allowedRemotePlayer = <span class="keyword">null</span>)</div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;        {</div>
<div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;            <span class="keywordflow">if</span> (args.Length == 0) <span class="keywordflow">return</span> <span class="keyword">null</span>;</div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160; </div>
<div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;            <span class="keywordtype">string</span> characterName;</div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;            <span class="keywordflow">if</span> (<span class="keywordtype">int</span>.TryParse(args.Last(), out <span class="keywordtype">int</span> characterIndex) &amp;&amp; args.Length &gt; 1)</div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;            {</div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;                characterName = <span class="keywordtype">string</span>.Join(<span class="stringliteral">&quot; &quot;</span>, args.Take(args.Length - 1)).ToLowerInvariant();</div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;            }</div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;            {</div>
<div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;                characterName = <span class="keywordtype">string</span>.Join(<span class="stringliteral">&quot; &quot;</span>, args).ToLowerInvariant();</div>
<div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;                characterIndex = -1;</div>
<div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;            }</div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160; </div>
<div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;            var matchingCharacters = <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.CharacterList.FindAll(c =&gt; </div>
<div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;                c.Name.Equals(characterName, StringComparison.OrdinalIgnoreCase) &amp;&amp;</div>
<div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;                (!c.IsRemotePlayer || !ignoreRemotePlayers || allowedRemotePlayer?.Character == c));</div>
<div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160; </div>
<div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;            <span class="keywordflow">if</span> (!matchingCharacters.Any())</div>
<div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;            {</div>
<div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;                NewMessage(<span class="stringliteral">&quot;Character \&quot;&quot;</span>+ characterName + <span class="stringliteral">&quot;\&quot; not found&quot;</span>, Color.Red);</div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">null</span>;</div>
<div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;            }</div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160; </div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;            <span class="comment">// Use same sorting as DebugConsole.ListCharacterNames() above</span></div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;            matchingCharacters = matchingCharacters.OrderBy(c =&gt; c.IsDead).ThenByDescending(c =&gt; c.IsHuman).ToList();</div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;            <span class="keywordflow">if</span> (characterIndex == -1)</div>
<div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;            {</div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;                <span class="keywordflow">if</span> (matchingCharacters.Count &gt; 1)</div>
<div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;                {</div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;                    NewMessage(</div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;                        <span class="stringliteral">&quot;Found multiple matching characters. &quot;</span> +</div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;                        <span class="stringliteral">&quot;Use \&quot;[charactername] [0-&quot;</span> + (matchingCharacters.Count - 1) + <span class="stringliteral">&quot;]\&quot; to choose a specific character.&quot;</span>,</div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;                        Color.LightGray);</div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;                }</div>
<div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;                <span class="keywordflow">return</span> matchingCharacters[0];</div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;            }</div>
<div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (characterIndex &lt; 0 || characterIndex &gt;= matchingCharacters.Count)</div>
<div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;            {</div>
<div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;                ThrowError(<span class="stringliteral">&quot;Character index out of range. Select an index between 0 and &quot;</span> + (matchingCharacters.Count - 1));</div>
<div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;            }</div>
<div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;            {</div>
<div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;                <span class="keywordflow">return</span> matchingCharacters[characterIndex];</div>
<div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;            }</div>
<div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160; </div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">null</span>;</div>
<div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;        }</div>
<div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160; </div>
<div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> SpawnCharacter(<span class="keywordtype">string</span>[] args, Vector2 cursorWorldPos, out <span class="keywordtype">string</span> errorMsg)</div>
<div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;        {</div>
<div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;            errorMsg = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;            <span class="keywordflow">if</span> (args.Length == 0) { <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160; </div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;            <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a> spawnedCharacter = <span class="keyword">null</span>;</div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160; </div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;            Vector2 spawnPosition = Vector2.Zero;</div>
<div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;            WayPoint spawnPoint = <span class="keyword">null</span>;</div>
<div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160; </div>
<div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;            <span class="keywordtype">string</span> characterLowerCase = args[0].ToLowerInvariant();</div>
<div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;            JobPrefab job = <span class="keyword">null</span>;</div>
<div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;            <span class="keywordflow">if</span> (!JobPrefab.Prefabs.ContainsKey(characterLowerCase))</div>
<div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;            {</div>
<div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;                job = JobPrefab.Prefabs.Find(jp =&gt; jp.Name != <span class="keyword">null</span> &amp;&amp; jp.Name.Equals(characterLowerCase, StringComparison.OrdinalIgnoreCase));</div>
<div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;            }</div>
<div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;            {</div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;                job = JobPrefab.Prefabs[characterLowerCase];</div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;            }</div>
<div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;            <span class="keywordtype">bool</span> human = job != <span class="keyword">null</span> || characterLowerCase == CharacterPrefab.HumanSpeciesName;</div>
<div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;            </div>
<div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;            <span class="keywordflow">if</span> (args.Length &gt; 1)</div>
<div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;            {</div>
<div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;                <span class="keywordflow">switch</span> (args[1].ToLowerInvariant())</div>
<div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;                {</div>
<div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;                    <span class="keywordflow">case</span> <span class="stringliteral">&quot;inside&quot;</span>:</div>
<div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;                        spawnPoint = WayPoint.GetRandom(<a class="code" href="namespace_barotrauma.html#a8545771a73613f0c4b69529cd91c5ac9">SpawnType</a>.Human, job, <a class="code" href="namespace_barotrauma_1_1_networking.html#ad2bd88ee885a12024889adafbe8fcc47a0d234e5bcf75c768eb0db6bf96e3c22d">Submarine</a>.MainSub);</div>
<div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;                    <span class="keywordflow">case</span> <span class="stringliteral">&quot;outside&quot;</span>:</div>
<div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;                        spawnPoint = WayPoint.GetRandom(<a class="code" href="namespace_barotrauma.html#a8545771a73613f0c4b69529cd91c5ac9">SpawnType</a>.Enemy);</div>
<div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;                    <span class="keywordflow">case</span> <span class="stringliteral">&quot;near&quot;</span>:</div>
<div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;                    <span class="keywordflow">case</span> <span class="stringliteral">&quot;close&quot;</span>:</div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;                        <span class="keywordtype">float</span> closestDist = -1.0f;</div>
<div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;                        <span class="keywordflow">foreach</span> (WayPoint wp <span class="keywordflow">in</span> WayPoint.WayPointList)</div>
<div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;                        {</div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;                            <span class="keywordflow">if</span> (wp.Submarine != <span class="keyword">null</span>) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160; </div>
<div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;                            <span class="comment">//don&#39;t spawn inside hulls</span></div>
<div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;                            <span class="keywordflow">if</span> (Hull.FindHull(wp.WorldPosition, <span class="keyword">null</span>) != <span class="keyword">null</span>) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160; </div>
<div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;                            <span class="keywordtype">float</span> dist = Vector2.Distance(wp.WorldPosition, GameMain.GameScreen.Cam.WorldViewCenter);</div>
<div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160; </div>
<div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;                            <span class="keywordflow">if</span> (closestDist &lt; 0.0f || dist &lt; closestDist)</div>
<div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;                            {</div>
<div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;                                spawnPoint = wp;</div>
<div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;                                closestDist = dist;</div>
<div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;                            }</div>
<div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;                        }</div>
<div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;                    <span class="keywordflow">case</span> <span class="stringliteral">&quot;cursor&quot;</span>:</div>
<div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;                        spawnPosition = cursorWorldPos;</div>
<div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;                    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;                        spawnPoint = WayPoint.GetRandom(human ? <a class="code" href="namespace_barotrauma.html#a8545771a73613f0c4b69529cd91c5ac9">SpawnType</a>.Human : <a class="code" href="namespace_barotrauma.html#a8545771a73613f0c4b69529cd91c5ac9">SpawnType</a>.Enemy);</div>
<div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;                }</div>
<div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;            }</div>
<div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;            {</div>
<div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;                spawnPoint = WayPoint.GetRandom(human ? <a class="code" href="namespace_barotrauma.html#a8545771a73613f0c4b69529cd91c5ac9">SpawnType</a>.Human : <a class="code" href="namespace_barotrauma.html#a8545771a73613f0c4b69529cd91c5ac9">SpawnType</a>.Enemy);</div>
<div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;            }</div>
<div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160; </div>
<div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;            <span class="keywordflow">if</span> (<span class="keywordtype">string</span>.IsNullOrWhiteSpace(args[0])) { <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;            <a class="code" href="namespace_barotrauma.html#acfb9793313a250b94330268f4815cf50">CharacterTeamType</a> teamType = <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.Controlled != <span class="keyword">null</span> ? <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.Controlled.TeamID : <a class="code" href="namespace_barotrauma.html#acfb9793313a250b94330268f4815cf50">CharacterTeamType</a>.Team1;</div>
<div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;            <span class="keywordflow">if</span> (args.Length &gt; 2)</div>
<div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;            {</div>
<div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;                <span class="keywordflow">try</span></div>
<div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;                {</div>
<div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;                    teamType = (<a class="code" href="namespace_barotrauma.html#acfb9793313a250b94330268f4815cf50">CharacterTeamType</a>)<span class="keywordtype">int</span>.Parse(args[2]);</div>
<div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;                }</div>
<div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;                <span class="keywordflow">catch</span></div>
<div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;                {</div>
<div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;                    ThrowError($<span class="stringliteral">&quot;\&quot;{args[2]}\&quot; is not a valid team id.&quot;</span>);</div>
<div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;                }</div>
<div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;            }</div>
<div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160; </div>
<div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;            <span class="keywordflow">if</span> (spawnPoint != <span class="keyword">null</span>) { spawnPosition = spawnPoint.WorldPosition; }</div>
<div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160; </div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;            <span class="keywordflow">if</span> (human)</div>
<div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;            {</div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;                var variant = job != <span class="keyword">null</span> ? Rand.Range(0, job.Variants, Rand.RandSync.ServerAndClient) : 0;</div>
<div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;                CharacterInfo characterInfo = <span class="keyword">new</span> CharacterInfo(CharacterPrefab.HumanSpeciesName, jobOrJobPrefab: job, variant: variant);</div>
<div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;                spawnedCharacter = <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.Create(characterInfo, spawnPosition, ToolBox.RandomSeed(8));</div>
<div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;                <span class="keywordflow">if</span> (GameMain.GameSession != <span class="keyword">null</span>)</div>
<div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;                {</div>
<div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;                    spawnedCharacter.TeamID = teamType;</div>
<div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;<span class="preprocessor">#if CLIENT</span></div>
<div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;                    GameMain.GameSession.CrewManager.AddCharacter(spawnedCharacter);          </div>
<div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;                }</div>
<div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;                spawnedCharacter.GiveJobItems(spawnPoint);</div>
<div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;                spawnedCharacter.Info.StartItemsGiven = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;            }</div>
<div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;            {</div>
<div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;                <span class="keywordflow">if</span> (CharacterPrefab.FindBySpeciesName(args[0].ToIdentifier()) != <span class="keyword">null</span>)</div>
<div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;                {</div>
<div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;                    <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.Create(args[0], spawnPosition, ToolBox.RandomSeed(8));</div>
<div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;                }</div>
<div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;            }</div>
<div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;        }</div>
<div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160; </div>
<div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> SpawnItem(<span class="keywordtype">string</span>[] args, Vector2 cursorPos, Character controlledCharacter, out <span class="keywordtype">string</span> errorMsg)</div>
<div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;        {</div>
<div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;            errorMsg = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;            <span class="keywordflow">if</span> (args.Length &lt; 1) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160; </div>
<div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;            Vector2? spawnPos = <span class="keyword">null</span>;</div>
<div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;            Inventory spawnInventory = <span class="keyword">null</span>;</div>
<div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160; </div>
<div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;            <span class="keywordtype">string</span> itemNameOrId = args[0].ToLowerInvariant();</div>
<div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;            ItemPrefab itemPrefab =</div>
<div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;                (MapEntityPrefab.Find(itemNameOrId, identifier: <span class="keyword">null</span>, showErrorMessages: <span class="keyword">false</span>) ??</div>
<div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;                MapEntityPrefab.Find(<span class="keyword">null</span>, identifier: itemNameOrId, showErrorMessages: <span class="keyword">false</span>)) as ItemPrefab;</div>
<div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;            <span class="keywordflow">if</span> (itemPrefab == <span class="keyword">null</span>)</div>
<div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;            {</div>
<div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;                errorMsg = <span class="stringliteral">&quot;Item \&quot;&quot;</span> + itemNameOrId + <span class="stringliteral">&quot;\&quot; not found!&quot;</span>;</div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;                var matching = ItemPrefab.Prefabs.Find(me =&gt; me.Name.StartsWith(itemNameOrId, StringComparison.OrdinalIgnoreCase) &amp;&amp; me is ItemPrefab);</div>
<div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;                <span class="keywordflow">if</span> (matching != <span class="keyword">null</span>)</div>
<div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;                {</div>
<div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;                    errorMsg += $<span class="stringliteral">&quot; Did you mean \&quot;{matching.Name}\&quot;?&quot;</span>;</div>
<div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;                    <span class="keywordflow">if</span> (matching.Name.Contains(<span class="stringliteral">&quot; &quot;</span>))</div>
<div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;                    {</div>
<div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;                        errorMsg += $<span class="stringliteral">&quot; Please note that you should surround multi-word names with quotation marks (e.q. spawnitem \&quot;{matching.Name}\&quot;)&quot;</span>;</div>
<div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;                    }</div>
<div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;                }</div>
<div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;            }</div>
<div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160; </div>
<div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;            <span class="keywordtype">int</span> amount = 1;</div>
<div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;            <span class="keywordflow">if</span> (args.Length &gt; 1)</div>
<div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;            {</div>
<div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;                <span class="keywordtype">string</span> spawnLocation = args.Last();</div>
<div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;                <span class="keywordflow">if</span> (args.Length &gt; 2)</div>
<div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;                {</div>
<div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;                    spawnLocation = args[^2];</div>
<div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;                    <span class="keywordflow">if</span> (!<span class="keywordtype">int</span>.TryParse(args[^1], NumberStyles.Any, CultureInfo.InvariantCulture, out amount)) { amount = 1; }</div>
<div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;                    amount = Math.Min(amount, 100);</div>
<div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;                }</div>
<div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;                </div>
<div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;                <span class="keywordflow">switch</span> (spawnLocation)</div>
<div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;                {</div>
<div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;                    <span class="keywordflow">case</span> <span class="stringliteral">&quot;cursor&quot;</span>:</div>
<div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;                        spawnPos = cursorPos;</div>
<div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;                    <span class="keywordflow">case</span> <span class="stringliteral">&quot;inventory&quot;</span>:</div>
<div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;                        spawnInventory = controlledCharacter?.Inventory;</div>
<div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;                    <span class="keywordflow">case</span> <span class="stringliteral">&quot;cargo&quot;</span>:</div>
<div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;                        var wp = WayPoint.GetRandom(<a class="code" href="namespace_barotrauma.html#a8545771a73613f0c4b69529cd91c5ac9">SpawnType</a>.Cargo, <span class="keyword">null</span>, <a class="code" href="namespace_barotrauma_1_1_networking.html#ad2bd88ee885a12024889adafbe8fcc47a0d234e5bcf75c768eb0db6bf96e3c22d">Submarine</a>.MainSub);</div>
<div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;                        spawnPos = wp == <span class="keyword">null</span> ? Vector2.Zero : wp.WorldPosition;</div>
<div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;                    <span class="keywordflow">case</span> <span class="stringliteral">&quot;random&quot;</span>:</div>
<div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;                        <span class="comment">//Dont do a thing, random is basically Human points anyways - its in the help description.</span></div>
<div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;                    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;                        var matchingCharacter = FindMatchingCharacter(args.Skip(1).ToArray());</div>
<div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;                        <span class="keywordflow">if</span> (matchingCharacter != <span class="keyword">null</span>){ spawnInventory = matchingCharacter.Inventory; }</div>
<div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;                }</div>
<div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;            }</div>
<div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;            </div>
<div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;            <span class="keywordflow">if</span> ((spawnPos == <span class="keyword">null</span> || spawnPos == Vector2.Zero) &amp;&amp; spawnInventory == <span class="keyword">null</span>)</div>
<div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;            {</div>
<div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;                var wp = WayPoint.GetRandom(<a class="code" href="namespace_barotrauma.html#a8545771a73613f0c4b69529cd91c5ac9">SpawnType</a>.Human, <span class="keyword">null</span>, <a class="code" href="namespace_barotrauma_1_1_networking.html#ad2bd88ee885a12024889adafbe8fcc47a0d234e5bcf75c768eb0db6bf96e3c22d">Submarine</a>.MainSub);</div>
<div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;                spawnPos = wp == <span class="keyword">null</span> ? Vector2.Zero : wp.WorldPosition;</div>
<div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;            }</div>
<div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160; </div>
<div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; amount; i++)</div>
<div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;            {</div>
<div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;                <span class="keywordflow">if</span> (spawnPos != <span class="keyword">null</span>)</div>
<div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;                {</div>
<div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;                    <span class="keywordflow">if</span> (Entity.Spawner == <span class="keyword">null</span> || Entity.Spawner.Removed)</div>
<div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;                    {</div>
<div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;                        <span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#af22238dc2b76a4392541f8b2214c8108a7d74f3b92b19da5e606d737d339a9679">Item</a>(itemPrefab, spawnPos.Value, <span class="keyword">null</span>);</div>
<div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;                    }</div>
<div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;                    {</div>
<div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;                        Entity.Spawner?.AddItemToSpawnQueue(itemPrefab, spawnPos.Value);</div>
<div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;                    }</div>
<div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;                }</div>
<div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (spawnInventory != <span class="keyword">null</span>)</div>
<div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;                {</div>
<div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;                    <span class="keywordflow">if</span> (Entity.Spawner == <span class="keyword">null</span>)</div>
<div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;                    {</div>
<div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;                        var spawnedItem = <span class="keyword">new</span> <a class="code" href="namespace_barotrauma.html#af22238dc2b76a4392541f8b2214c8108a7d74f3b92b19da5e606d737d339a9679">Item</a>(itemPrefab, Vector2.Zero, <span class="keyword">null</span>);</div>
<div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;                        spawnInventory.TryPutItem(spawnedItem, <span class="keyword">null</span>, spawnedItem.AllowedSlots);</div>
<div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;                        onItemSpawned(spawnedItem);</div>
<div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;                    }</div>
<div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;                    {</div>
<div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;                        Entity.Spawner?.AddItemToSpawnQueue(itemPrefab, spawnInventory, onSpawned: onItemSpawned);</div>
<div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;                    }</div>
<div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160; </div>
<div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;                    <span class="keyword">static</span> <span class="keywordtype">void</span> onItemSpawned(Item item)</div>
<div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;                    {</div>
<div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;                        <span class="keywordflow">if</span> (item.ParentInventory?.Owner is Character character)</div>
<div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;                        {</div>
<div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;                            <span class="keywordflow">foreach</span> (<a class="code" href="class_barotrauma_1_1_items_1_1_components_1_1_wifi_component.html">WifiComponent</a> wifiComponent <span class="keywordflow">in</span> item.GetComponents&lt;<a class="code" href="class_barotrauma_1_1_items_1_1_components_1_1_wifi_component.html">WifiComponent</a>&gt;())</div>
<div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;                            {</div>
<div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;                                wifiComponent.<a class="code" href="class_barotrauma_1_1_items_1_1_components_1_1_wifi_component.html#a6d3132e6d7a139ae31e961c441a31ea7">TeamID</a> = character.TeamID;</div>
<div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;                            }</div>
<div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;                        }</div>
<div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;                    }</div>
<div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;                }</div>
<div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;            }</div>
<div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;        }</div>
<div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160; </div>
<div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> ShowError(<span class="keywordtype">string</span> msg, Color? color = <span class="keyword">null</span>)</div>
<div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;        {</div>
<div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;            color ??= Color.Red;</div>
<div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;            NewMessage(msg, color.Value, isCommand: <span class="keyword">false</span>, isError: <span class="keyword">true</span>);</div>
<div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;        }</div>
<div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160; </div>
<div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> NewCommand(<span class="keywordtype">string</span> command, Color? color = <span class="keyword">null</span>)</div>
<div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;        {</div>
<div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;            color ??= Color.White;</div>
<div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;            NewMessage(command, color.Value, isCommand: <span class="keyword">true</span>, isError: <span class="keyword">false</span>);</div>
<div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;        }</div>
<div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160; </div>
<div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> NewMessage(LocalizedString msg, Color? color = <span class="keyword">null</span>, <span class="keywordtype">bool</span> debugOnly = <span class="keyword">false</span>)</div>
<div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;            =&gt; NewMessage(msg.Value, color, debugOnly);</div>
<div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160; </div>
<div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> NewMessage(<span class="keywordtype">string</span> msg, Color? color = <span class="keyword">null</span>, <span class="keywordtype">bool</span> debugOnly = <span class="keyword">false</span>)</div>
<div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;        {</div>
<div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;            color ??= Color.White;</div>
<div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;            <span class="keywordflow">if</span> (debugOnly)</div>
<div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;            {</div>
<div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;<span class="preprocessor">#if DEBUG</span></div>
<div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;                NewMessage(msg, color.Value, isCommand: <span class="keyword">false</span>, isError: <span class="keyword">false</span>);</div>
<div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;            }</div>
<div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;            {</div>
<div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;                NewMessage(msg, color.Value, isCommand: <span class="keyword">false</span>, isError: <span class="keyword">false</span>);</div>
<div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;            }</div>
<div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;<span class="preprocessor">#if DEBUG</span></div>
<div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;            <a class="code" href="namespace_barotrauma_1_1_networking.html#add3372db2e3cffdc066c7a035266a7b2abccaa4aa80831b76c11240a16447975f">Console</a>.WriteLine(msg);</div>
<div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;        }</div>
<div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160; </div>
<div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keywordtype">void</span> NewMessage(<span class="keywordtype">string</span> msg, Color color, <span class="keywordtype">bool</span> isCommand, <span class="keywordtype">bool</span> isError)</div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;        {</div>
<div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;            <span class="keywordflow">if</span> (<span class="keywordtype">string</span>.IsNullOrEmpty(msg)) { <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;            </div>
<div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;            lock (queuedMessages)</div>
<div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;            {</div>
<div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;                queuedMessages.Enqueue(<span class="keyword">new</span> ColoredText(msg, color, isCommand, isError));</div>
<div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;            }</div>
<div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;        }</div>
<div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160; </div>
<div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> ShowQuestionPrompt(<span class="keywordtype">string</span> question, QuestionCallback onAnswered, <span class="keywordtype">string</span>[] args = <span class="keyword">null</span>, <span class="keywordtype">int</span> argCount = -1)</div>
<div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;        {</div>
<div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;            <span class="keywordflow">if</span> (args != <span class="keyword">null</span> &amp;&amp; args.Length &gt; argCount)</div>
<div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;            {</div>
<div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;                onAnswered(args[argCount]);</div>
<div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;            }</div>
<div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160; </div>
<div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;<span class="preprocessor">#if CLIENT</span></div>
<div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;            activeQuestionText = <span class="keyword">new</span> GUITextBlock(<span class="keyword">new</span> RectTransform(<span class="keyword">new</span> Point(listBox.Content.Rect.Width, 0), listBox.Content.RectTransform),</div>
<div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;                <span class="stringliteral">&quot;   &gt;&gt;&quot;</span> + question, font: GUIStyle.SmallFont, wrap: <span class="keyword">true</span>)</div>
<div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;            {</div>
<div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;                CanBeFocused = <span class="keyword">false</span>,</div>
<div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;                TextColor = Color.Cyan</div>
<div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;            };</div>
<div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;            NewMessage(<span class="stringliteral">&quot;   &gt;&gt;&quot;</span> + question, Color.Cyan);</div>
<div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;            activeQuestionCallback += onAnswered;</div>
<div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;        }</div>
<div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160; </div>
<div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keywordtype">bool</span> TryParseTimeSpan(<span class="keywordtype">string</span> s, out TimeSpan timeSpan)</div>
<div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;        {</div>
<div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;            timeSpan = <span class="keyword">new</span> TimeSpan();</div>
<div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;            <span class="keywordflow">if</span> (<span class="keywordtype">string</span>.IsNullOrWhiteSpace(s)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160; </div>
<div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;            <span class="keywordtype">string</span> currNum = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;            <span class="keywordflow">foreach</span> (<span class="keywordtype">char</span> c <span class="keywordflow">in</span> s)</div>
<div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;            {</div>
<div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;                <span class="keywordflow">if</span> (<span class="keywordtype">char</span>.IsDigit(c))</div>
<div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;                {</div>
<div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;                    currNum += c;</div>
<div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;                }</div>
<div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keywordtype">char</span>.IsWhiteSpace(c))</div>
<div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;                {</div>
<div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;                }</div>
<div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;                {</div>
<div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;                    <span class="keywordflow">if</span> (!<span class="keywordtype">int</span>.TryParse(currNum, out <span class="keywordtype">int</span> parsedNum) || parsedNum &lt; 0)</div>
<div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;                    {</div>
<div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;                        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;                    }</div>
<div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;                    <span class="keywordflow">try</span></div>
<div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;                    {</div>
<div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;                        <span class="keywordflow">switch</span> (c)</div>
<div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;                        {</div>
<div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;                            <span class="keywordflow">case</span> <span class="charliteral">&#39;d&#39;</span>:</div>
<div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;                                timeSpan += <span class="keyword">new</span> TimeSpan(parsedNum, 0, 0, 0, 0);</div>
<div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;                                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;                            <span class="keywordflow">case</span> <span class="charliteral">&#39;h&#39;</span>:</div>
<div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;                                timeSpan += <span class="keyword">new</span> TimeSpan(0, parsedNum, 0, 0, 0);</div>
<div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;                                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;                            <span class="keywordflow">case</span> <span class="charliteral">&#39;m&#39;</span>:</div>
<div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;                                timeSpan += <span class="keyword">new</span> TimeSpan(0, 0, parsedNum, 0, 0);</div>
<div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;                                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;                            <span class="keywordflow">case</span> <span class="charliteral">&#39;s&#39;</span>:</div>
<div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;                                timeSpan += <span class="keyword">new</span> TimeSpan(0, 0, 0, parsedNum, 0);</div>
<div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;                                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;                            <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;                                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;                        }</div>
<div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;                    }</div>
<div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;                    <span class="keywordflow">catch</span> (ArgumentOutOfRangeException)</div>
<div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;                    {</div>
<div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;                        ThrowError($<span class="stringliteral">&quot;{parsedNum} {c} exceeds the maximum supported time span. Using the maximum time span {TimeSpan.MaxValue} instead.&quot;</span>);</div>
<div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;                        timeSpan = TimeSpan.MaxValue;</div>
<div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;                        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;                    }</div>
<div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;                    currNum = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;                }</div>
<div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;            }</div>
<div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160; </div>
<div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;        }</div>
<div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160; </div>
<div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Command</a> FindCommand(<span class="keywordtype">string</span> commandName) =&gt; commands.Find(c =&gt; c.names.Any(n =&gt; n.Equals(commandName, StringComparison.OrdinalIgnoreCase)));</div>
<div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160; </div>
<div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> Log(LocalizedString message) =&gt; Log(message?.Value);</div>
<div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;        </div>
<div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> Log(<span class="keywordtype">string</span> message)</div>
<div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;        {</div>
<div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;            <span class="keywordflow">if</span> (GameSettings.CurrentConfig.VerboseLogging)</div>
<div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;            {</div>
<div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;                NewMessage(message, Color.Gray);</div>
<div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;            }</div>
<div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;        }</div>
<div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160; </div>
<div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> ThrowError(LocalizedString error, Exception e = <span class="keyword">null</span>, <span class="keywordtype">bool</span> createMessageBox = <span class="keyword">false</span>, <span class="keywordtype">bool</span> appendStackTrace = <span class="keyword">false</span>)</div>
<div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;        {</div>
<div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;            ThrowError(error.Value, e, createMessageBox, appendStackTrace);</div>
<div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;        }</div>
<div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160; </div>
<div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> ThrowError(<span class="keywordtype">string</span> error, Exception e = <span class="keyword">null</span>, <span class="keywordtype">bool</span> createMessageBox = <span class="keyword">false</span>, <span class="keywordtype">bool</span> appendStackTrace = <span class="keyword">false</span>)</div>
<div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;        {</div>
<div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;            <span class="keywordflow">if</span> (e != <span class="keyword">null</span>)</div>
<div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;            {</div>
<div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;                error += <span class="stringliteral">&quot; {&quot;</span> + e.Message + <span class="stringliteral">&quot;}\n&quot;</span>;</div>
<div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;                <span class="keywordflow">if</span> (e.StackTrace != <span class="keyword">null</span>)</div>
<div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;                {</div>
<div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;                    error += e.StackTrace.CleanupStackTrace(); </div>
<div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;                }</div>
<div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;                <span class="keywordflow">if</span> (e.InnerException != <span class="keyword">null</span>)</div>
<div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;                {</div>
<div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;                    var innermost = e.GetInnermost();</div>
<div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;                    error += <span class="stringliteral">&quot;\n\nInner exception: &quot;</span> + innermost.Message + <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;                    <span class="keywordflow">if</span> (innermost.StackTrace != <span class="keyword">null</span>)</div>
<div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;                    {</div>
<div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;                        error += innermost.StackTrace.CleanupStackTrace(); ;</div>
<div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;                    }</div>
<div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;                }</div>
<div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;            }</div>
<div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (appendStackTrace &amp;&amp; Environment.StackTrace != <span class="keyword">null</span>)</div>
<div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;            {</div>
<div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;                error += <span class="stringliteral">&quot;\n&quot;</span> + Environment.StackTrace.CleanupStackTrace();</div>
<div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;            }</div>
<div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;            System.Diagnostics.Debug.WriteLine($<span class="stringliteral">&quot;ThrowError: {error}&quot;</span>);</div>
<div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160; </div>
<div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;<span class="preprocessor">#if CLIENT</span></div>
<div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;            <span class="keywordflow">if</span> (createMessageBox)</div>
<div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;            {</div>
<div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;                CoroutineManager.StartCoroutine(CreateMessageBox(error));</div>
<div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;            }</div>
<div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;            {</div>
<div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;                isOpen = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;            }</div>
<div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160; </div>
<div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;            ShowError(error);</div>
<div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;        }</div>
<div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;        </div>
<div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> AddWarning(<span class="keywordtype">string</span> warning)</div>
<div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;        {</div>
<div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;            System.Diagnostics.Debug.WriteLine(warning);</div>
<div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;            NewMessage($<span class="stringliteral">&quot;WARNING: {warning}&quot;</span>, Color.Yellow);</div>
<div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;        }</div>
<div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160; </div>
<div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;<span class="preprocessor">#if CLIENT</span></div>
<div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;        <span class="keyword">private</span> <span class="keyword">static</span> IEnumerable&lt;CoroutineStatus&gt; CreateMessageBox(<span class="keywordtype">string</span> errorMsg)</div>
<div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;        {</div>
<div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;            <span class="keyword">new</span> GUIMessageBox(TextManager.Get(<span class="stringliteral">&quot;Error&quot;</span>), errorMsg);</div>
<div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;            yield <span class="keywordflow">return</span> CoroutineStatus.Success;</div>
<div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;        }</div>
<div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160; </div>
<div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> SaveLogs()</div>
<div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;        {</div>
<div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;            <span class="keywordflow">if</span> (unsavedMessages.Count == 0) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;            <span class="keywordflow">if</span> (!Directory.Exists(SavePath))</div>
<div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;            {</div>
<div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;                <span class="keywordflow">try</span></div>
<div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;                {</div>
<div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;                    Directory.CreateDirectory(SavePath);</div>
<div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;                }</div>
<div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;                <span class="keywordflow">catch</span> (Exception e)</div>
<div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;                {</div>
<div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;                    ThrowError(<span class="stringliteral">&quot;Failed to create a folder for debug console logs&quot;</span>, e);</div>
<div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;                }</div>
<div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;            }</div>
<div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160; </div>
<div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;            <span class="keywordtype">string</span> fileName = <span class="stringliteral">&quot;DebugConsoleLog_&quot;</span>;</div>
<div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;<span class="preprocessor">#if SERVER</span></div>
<div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;            fileName += <span class="stringliteral">&quot;Server_&quot;</span>;</div>
<div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;            fileName += <span class="stringliteral">&quot;Client_&quot;</span>;</div>
<div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160; </div>
<div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;            fileName += DateTime.Now.ToShortDateString() + <span class="stringliteral">&quot;_&quot;</span> + DateTime.Now.ToShortTimeString();</div>
<div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;            var invalidChars = Path.GetInvalidFileNameChars();</div>
<div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;            <span class="keywordflow">foreach</span> (<span class="keywordtype">char</span> invalidChar <span class="keywordflow">in</span> invalidChars)</div>
<div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;            {</div>
<div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;                fileName = fileName.Replace(invalidChar.ToString(), <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;            }</div>
<div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160; </div>
<div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;            <span class="keywordtype">string</span> filePath = Path.Combine(SavePath, fileName);</div>
<div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;            <span class="keywordflow">if</span> (File.Exists(filePath + <span class="stringliteral">&quot;.txt&quot;</span>))</div>
<div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;            {</div>
<div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;                <span class="keywordtype">int</span> fileNum = 2;</div>
<div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;                <span class="keywordflow">while</span> (File.Exists(filePath + <span class="stringliteral">&quot; (&quot;</span> + fileNum + <span class="stringliteral">&quot;)&quot;</span>))</div>
<div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;                {</div>
<div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;                    fileNum++;</div>
<div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;                }</div>
<div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;                filePath = filePath + <span class="stringliteral">&quot; (&quot;</span> + fileNum + <span class="stringliteral">&quot;)&quot;</span>;</div>
<div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;            }</div>
<div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160; </div>
<div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;            <span class="keywordflow">try</span></div>
<div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;            {</div>
<div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;                File.WriteAllLines(filePath + <span class="stringliteral">&quot;.txt&quot;</span>, unsavedMessages.Select(l =&gt; <span class="stringliteral">&quot;[&quot;</span> + l.Time + <span class="stringliteral">&quot;] &quot;</span> + l.Text));</div>
<div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;            }</div>
<div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;            <span class="keywordflow">catch</span> (Exception e)</div>
<div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;            {</div>
<div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;                unsavedMessages.Clear();</div>
<div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;                ThrowError(<span class="stringliteral">&quot;Saving debug console log to &quot;</span> + filePath + <span class="stringliteral">&quot; failed&quot;</span>, e);</div>
<div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;            }</div>
<div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;        }</div>
<div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;    }</div>
<div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;}</div>
<div class="ttc" id="aclass_barotrauma_1_1_debug_console_1_1_command_html"><div class="ttname"><a href="class_barotrauma_1_1_debug_console_1_1_command.html">Barotrauma.DebugConsole.Command</a></div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_debug_console_8cs_source.html#l00041">BarotraumaShared/SharedSource/DebugConsole.cs:42</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_debug_console_1_1_command_html_a25d25c4b818a7195fe49ec00e74fb875"><div class="ttname"><a href="class_barotrauma_1_1_debug_console_1_1_command.html#a25d25c4b818a7195fe49ec00e74fb875">Barotrauma.DebugConsole.Command.GetValidArgs</a></div><div class="ttdeci">Func&lt; string[][]&gt; GetValidArgs</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_debug_console_8cs_source.html#l00048">BarotraumaShared/SharedSource/DebugConsole.cs:48</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_debug_console_1_1_command_html_a458c8e5c8f7ac545eff829e7ecfd595c"><div class="ttname"><a href="class_barotrauma_1_1_debug_console_1_1_command.html#a458c8e5c8f7ac545eff829e7ecfd595c">Barotrauma.DebugConsole.Command.IsCheat</a></div><div class="ttdeci">readonly bool IsCheat</div><div class="ttdoc">Using a command that's considered a cheat disables achievements</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_debug_console_8cs_source.html#l00053">BarotraumaShared/SharedSource/DebugConsole.cs:53</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_debug_console_1_1_command_html_a68408cdd04bfabfc5ad995aea2dd7cd6"><div class="ttname"><a href="class_barotrauma_1_1_debug_console_1_1_command.html#a68408cdd04bfabfc5ad995aea2dd7cd6">Barotrauma.DebugConsole.Command.Command</a></div><div class="ttdeci">Command(string name, string help, Action&lt; string[]&gt; onExecute, Func&lt; string[][]&gt; getValidArgs=null, bool isCheat=false)</div><div class="ttdoc">Use this constructor to create a command that executes the same action regardless of whether it's exe...</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_debug_console_8cs_source.html#l00058">BarotraumaShared/SharedSource/DebugConsole.cs:58</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_debug_console_1_1_command_html_a6dc3ca4c6afc3313a7dc664042fc0b8a"><div class="ttname"><a href="class_barotrauma_1_1_debug_console_1_1_command.html#a6dc3ca4c6afc3313a7dc664042fc0b8a">Barotrauma.DebugConsole.Command.OnExecute</a></div><div class="ttdeci">Action&lt; string[]&gt; OnExecute</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_debug_console_8cs_source.html#l00046">BarotraumaShared/SharedSource/DebugConsole.cs:46</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_debug_console_1_1_command_html_a71e5a7b059e34f6431f5ee84058f3953"><div class="ttname"><a href="class_barotrauma_1_1_debug_console_1_1_command.html#a71e5a7b059e34f6431f5ee84058f3953">Barotrauma.DebugConsole.Command.names</a></div><div class="ttdeci">readonly string[] names</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_debug_console_8cs_source.html#l00043">BarotraumaShared/SharedSource/DebugConsole.cs:43</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_debug_console_1_1_command_html_a8a2e50e149252c5c0f038f4e8d2aa181"><div class="ttname"><a href="class_barotrauma_1_1_debug_console_1_1_command.html#a8a2e50e149252c5c0f038f4e8d2aa181">Barotrauma.DebugConsole.Command.help</a></div><div class="ttdeci">readonly string help</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_debug_console_8cs_source.html#l00044">BarotraumaShared/SharedSource/DebugConsole.cs:44</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_debug_console_1_1_command_html_ad1da381d36ada5cbfde3e1fd3d53e81d"><div class="ttname"><a href="class_barotrauma_1_1_debug_console_1_1_command.html#ad1da381d36ada5cbfde3e1fd3d53e81d">Barotrauma.DebugConsole.Command.Execute</a></div><div class="ttdeci">void Execute(string[] args)</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_debug_console_8cs_source.html#l00069">BarotraumaShared/SharedSource/DebugConsole.cs:69</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_debug_console_1_1_command_html_aeb3e3e378ffb00d8cfb45f83d26ad3db"><div class="ttname"><a href="class_barotrauma_1_1_debug_console_1_1_command.html#aeb3e3e378ffb00d8cfb45f83d26ad3db">Barotrauma.DebugConsole.Command.GetHashCode</a></div><div class="ttdeci">override int GetHashCode()</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_debug_console_8cs_source.html#l00089">BarotraumaShared/SharedSource/DebugConsole.cs:89</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_editor_screen_html"><div class="ttname"><a href="class_barotrauma_1_1_editor_screen.html">Barotrauma.EditorScreen</a></div><div class="ttdef"><b>Definition:</b> <a href="_editor_screen_8cs_source.html#l00005">EditorScreen.cs:6</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_game_main_html"><div class="ttname"><a href="class_barotrauma_1_1_game_main.html">Barotrauma.GameMain</a></div><div class="ttdef"><b>Definition:</b> <a href="_game_main_8cs_source.html#l00021">GameMain.cs:22</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_game_main_html_a13ee783d841a06557ae1c460a2a35c83"><div class="ttname"><a href="class_barotrauma_1_1_game_main.html#a13ee783d841a06557ae1c460a2a35c83">Barotrauma.GameMain.GameSession</a></div><div class="ttdeci">static GameSession?? GameSession</div><div class="ttdef"><b>Definition:</b> <a href="_game_main_8cs_source.html#l00079">GameMain.cs:80</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_game_main_html_a8814ae6a86758a7f6c039be0a39d921e"><div class="ttname"><a href="class_barotrauma_1_1_game_main.html#a8814ae6a86758a7f6c039be0a39d921e">Barotrauma.GameMain.NetworkMember</a></div><div class="ttdeci">static NetworkMember NetworkMember</div><div class="ttdef"><b>Definition:</b> <a href="_game_main_8cs_source.html#l00178">GameMain.cs:179</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_game_session_html_a6135f10f677d0c128d302969be74b847"><div class="ttname"><a href="class_barotrauma_1_1_game_session.html#a6135f10f677d0c128d302969be74b847">Barotrauma.GameSession.GameMode</a></div><div class="ttdeci">GameMode? GameMode</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_game_session_2_game_session_8cs_source.html#l00025">BarotraumaShared/SharedSource/GameSession/GameSession.cs:25</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_items_1_1_components_1_1_genetic_material_html"><div class="ttname"><a href="class_barotrauma_1_1_items_1_1_components_1_1_genetic_material.html">Barotrauma.Items.Components.GeneticMaterial</a></div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_items_2_components_2_genetic_material_8cs_source.html#l00011">BarotraumaShared/SharedSource/Items/Components/GeneticMaterial.cs:12</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_items_1_1_components_1_1_pump_html"><div class="ttname"><a href="class_barotrauma_1_1_items_1_1_components_1_1_pump.html">Barotrauma.Items.Components.Pump</a></div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_items_2_components_2_machines_2_pump_8cs_source.html#l00011">BarotraumaShared/SharedSource/Items/Components/Machines/Pump.cs:12</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_items_1_1_components_1_1_pump_html_a181d08fdf90d82422cd2ba7561b405c2"><div class="ttname"><a href="class_barotrauma_1_1_items_1_1_components_1_1_pump.html#a181d08fdf90d82422cd2ba7561b405c2">Barotrauma.Items.Components.Pump.InfectBallast</a></div><div class="ttdeci">void InfectBallast(Identifier identifier, bool allowMultiplePerShip=false)</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_items_2_components_2_machines_2_pump_8cs_source.html#l00148">BarotraumaShared/SharedSource/Items/Components/Machines/Pump.cs:148</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_items_1_1_components_1_1_reactor_html"><div class="ttname"><a href="class_barotrauma_1_1_items_1_1_components_1_1_reactor.html">Barotrauma.Items.Components.Reactor</a></div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_items_2_components_2_machines_2_reactor_8cs_source.html#l00010">BarotraumaShared/SharedSource/Items/Components/Machines/Reactor.cs:11</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_items_1_1_components_1_1_reactor_html_ad9e6a04a877d0639997aca6a1e6297cc"><div class="ttname"><a href="class_barotrauma_1_1_items_1_1_components_1_1_reactor.html#ad9e6a04a877d0639997aca6a1e6297cc">Barotrauma.Items.Components.Reactor.PowerUpImmediately</a></div><div class="ttdeci">void PowerUpImmediately()</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_items_2_components_2_machines_2_reactor_8cs_source.html#l00550">BarotraumaShared/SharedSource/Items/Components/Machines/Reactor.cs:550</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_items_1_1_components_1_1_wifi_component_html"><div class="ttname"><a href="class_barotrauma_1_1_items_1_1_components_1_1_wifi_component.html">Barotrauma.Items.Components.WifiComponent</a></div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_items_2_components_2_signal_2_wifi_component_8cs_source.html#l00011">BarotraumaShared/SharedSource/Items/Components/Signal/WifiComponent.cs:12</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_items_1_1_components_1_1_wifi_component_html_a6d3132e6d7a139ae31e961c441a31ea7"><div class="ttname"><a href="class_barotrauma_1_1_items_1_1_components_1_1_wifi_component.html#a6d3132e6d7a139ae31e961c441a31ea7">Barotrauma.Items.Components.WifiComponent.TeamID</a></div><div class="ttdeci">CharacterTeamType TeamID</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_items_2_components_2_signal_2_wifi_component_8cs_source.html#l00034">BarotraumaShared/SharedSource/Items/Components/Signal/WifiComponent.cs:34</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_networking_1_1_client_html"><div class="ttname"><a href="class_barotrauma_1_1_networking_1_1_client.html">Barotrauma.Networking.Client</a></div><div class="ttdef"><b>Definition:</b> <a href="_lua_barotrauma_additions_8cs_source.html#l00009">LuaBarotraumaAdditions.cs:10</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_networking_1_1_client_html_a4bc29d866927023d4bc513e708ceeff4"><div class="ttname"><a href="class_barotrauma_1_1_networking_1_1_client.html#a4bc29d866927023d4bc513e708ceeff4">Barotrauma.Networking.Client.Name</a></div><div class="ttdeci">string Name</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_networking_2_client_8cs_source.html#l00031">BarotraumaShared/SharedSource/Networking/Client.cs:31</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_networking_1_1_client_html_a94c7849feeb272b648538ae54305680b"><div class="ttname"><a href="class_barotrauma_1_1_networking_1_1_client.html#a94c7849feeb272b648538ae54305680b">Barotrauma.Networking.Client.Character</a></div><div class="ttdeci">Character????? Character</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_networking_2_client_8cs_source.html#l00047">BarotraumaShared/SharedSource/Networking/Client.cs:48</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_networking_1_1_permission_preset_html"><div class="ttname"><a href="class_barotrauma_1_1_networking_1_1_permission_preset.html">Barotrauma.Networking.PermissionPreset</a></div><div class="ttdef"><b>Definition:</b> <a href="_client_permissions_8cs_source.html#l00033">ClientPermissions.cs:34</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_networking_1_1_permission_preset_html_acbcfe1e776698d5e0e40d2d314d38851"><div class="ttname"><a href="class_barotrauma_1_1_networking_1_1_permission_preset.html#acbcfe1e776698d5e0e40d2d314d38851">Barotrauma.Networking.PermissionPreset.List</a></div><div class="ttdeci">static List&lt; PermissionPreset &gt; List</div><div class="ttdef"><b>Definition:</b> <a href="_client_permissions_8cs_source.html#l00035">ClientPermissions.cs:35</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_screen_html"><div class="ttname"><a href="class_barotrauma_1_1_screen.html">Barotrauma.Screen</a></div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_screens_2_screen_8cs_source.html#l00003">BarotraumaShared/SharedSource/Screens/Screen.cs:4</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_screen_html_a45c5bab8117378841bb3a09acd6bd3b6"><div class="ttname"><a href="class_barotrauma_1_1_screen.html#a45c5bab8117378841bb3a09acd6bd3b6">Barotrauma.Screen.Selected</a></div><div class="ttdeci">static Screen Selected</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_screens_2_screen_8cs_source.html#l00005">BarotraumaShared/SharedSource/Screens/Screen.cs:5</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_test_game_mode_html"><div class="ttname"><a href="class_barotrauma_1_1_test_game_mode.html">Barotrauma.TestGameMode</a></div><div class="ttdef"><b>Definition:</b> <a href="_test_game_mode_8cs_source.html#l00010">TestGameMode.cs:11</a></div></div>
<div class="ttc" id="anamespace_barotrauma_1_1_extensions_html"><div class="ttname"><a href="namespace_barotrauma_1_1_extensions.html">Barotrauma.Extensions</a></div><div class="ttdef"><b>Definition:</b> <a href="_color_extensions_8cs_source.html#l00003">ColorExtensions.cs:4</a></div></div>
<div class="ttc" id="anamespace_barotrauma_1_1_i_o_html"><div class="ttname"><a href="namespace_barotrauma_1_1_i_o.html">Barotrauma.IO</a></div><div class="ttdef"><b>Definition:</b> <a href="_safe_i_o_8cs_source.html#l00010">SafeIO.cs:11</a></div></div>
<div class="ttc" id="anamespace_barotrauma_1_1_items_1_1_components_html"><div class="ttname"><a href="namespace_barotrauma_1_1_items_1_1_components.html">Barotrauma.Items.Components</a></div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_items_2_components_2_docking_port_8cs_source.html#l00012">BarotraumaShared/SharedSource/Items/Components/DockingPort.cs:13</a></div></div>
<div class="ttc" id="anamespace_barotrauma_1_1_items_html"><div class="ttname"><a href="namespace_barotrauma_1_1_items.html">Barotrauma.Items</a></div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_items_2_components_2_docking_port_8cs_source.html#l00012">BarotraumaShared/SharedSource/Items/Components/DockingPort.cs:13</a></div></div>
<div class="ttc" id="anamespace_barotrauma_1_1_map_creatures_1_1_behavior_html"><div class="ttname"><a href="namespace_barotrauma_1_1_map_creatures_1_1_behavior.html">Barotrauma.MapCreatures.Behavior</a></div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_map_2_creatures_2_ballast_flora_behavior_8cs_source.html#l00015">BarotraumaShared/SharedSource/Map/Creatures/BallastFloraBehavior.cs:16</a></div></div>
<div class="ttc" id="anamespace_barotrauma_1_1_map_creatures_html"><div class="ttname"><a href="namespace_barotrauma_1_1_map_creatures.html">Barotrauma.MapCreatures</a></div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_map_2_creatures_2_ballast_flora_behavior_8cs_source.html#l00015">BarotraumaShared/SharedSource/Map/Creatures/BallastFloraBehavior.cs:16</a></div></div>
<div class="ttc" id="anamespace_barotrauma_1_1_networking_html"><div class="ttname"><a href="namespace_barotrauma_1_1_networking.html">Barotrauma.Networking</a></div><div class="ttdef"><b>Definition:</b> <a href="_lua_barotrauma_additions_8cs_source.html#l00007">LuaBarotraumaAdditions.cs:8</a></div></div>
<div class="ttc" id="anamespace_barotrauma_1_1_networking_html_a824d9427da6d3f19a61613a675bf8d34"><div class="ttname"><a href="namespace_barotrauma_1_1_networking.html#a824d9427da6d3f19a61613a675bf8d34">Barotrauma.Networking.ClientPermissions</a></div><div class="ttdeci">ClientPermissions</div><div class="ttdef"><b>Definition:</b> <a href="_client_permissions_8cs_source.html#l00010">ClientPermissions.cs:11</a></div></div>
<div class="ttc" id="anamespace_barotrauma_1_1_networking_html_ad2bd88ee885a12024889adafbe8fcc47a0d234e5bcf75c768eb0db6bf96e3c22d"><div class="ttname"><a href="namespace_barotrauma_1_1_networking.html#ad2bd88ee885a12024889adafbe8fcc47a0d234e5bcf75c768eb0db6bf96e3c22d">Barotrauma.Networking.FileTransferType.Submarine</a></div><div class="ttdeci">@ Submarine</div></div>
<div class="ttc" id="anamespace_barotrauma_1_1_networking_html_add3372db2e3cffdc066c7a035266a7b2abccaa4aa80831b76c11240a16447975f"><div class="ttname"><a href="namespace_barotrauma_1_1_networking.html#add3372db2e3cffdc066c7a035266a7b2abccaa4aa80831b76c11240a16447975f">Barotrauma.Networking.ChatMessageType.Console</a></div><div class="ttdeci">@ Console</div></div>
<div class="ttc" id="anamespace_barotrauma_1_1_steam_html"><div class="ttname"><a href="namespace_barotrauma_1_1_steam.html">Barotrauma.Steam</a></div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_steam_2_auth_ticket_8cs_source.html#l00001">BarotraumaShared/SharedSource/Steam/AuthTicket.cs:2</a></div></div>
<div class="ttc" id="anamespace_barotrauma_html"><div class="ttname"><a href="namespace_barotrauma.html">Barotrauma</a></div><div class="ttdef"><b>Definition:</b> <a href="_cached_distance_8cs_source.html#l00003">CachedDistance.cs:4</a></div></div>
<div class="ttc" id="anamespace_barotrauma_html_a2749fb4bec59995097649b591a6aa7f4"><div class="ttname"><a href="namespace_barotrauma.html#a2749fb4bec59995097649b591a6aa7f4">Barotrauma.SubmarineType</a></div><div class="ttdeci">SubmarineType</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_map_2_submarine_info_8cs_source.html#l00026">BarotraumaShared/SharedSource/Map/SubmarineInfo.cs:26</a></div></div>
<div class="ttc" id="anamespace_barotrauma_html_a8545771a73613f0c4b69529cd91c5ac9"><div class="ttname"><a href="namespace_barotrauma.html#a8545771a73613f0c4b69529cd91c5ac9">Barotrauma.SpawnType</a></div><div class="ttdeci">SpawnType</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_map_2_way_point_8cs_source.html#l00014">BarotraumaShared/SharedSource/Map/WayPoint.cs:14</a></div></div>
<div class="ttc" id="anamespace_barotrauma_html_ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4"><div class="ttname"><a href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Barotrauma.AttackTarget.Character</a></div><div class="ttdeci">@ Character</div></div>
<div class="ttc" id="anamespace_barotrauma_html_ace0a154441ef8d85d2f2c0f636a001c4adc4c71563b9bc39a65be853457e6b7b6"><div class="ttname"><a href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4adc4c71563b9bc39a65be853457e6b7b6">Barotrauma.AttackTarget.Structure</a></div><div class="ttdeci">@ Structure</div></div>
<div class="ttc" id="anamespace_barotrauma_html_acfb9793313a250b94330268f4815cf50"><div class="ttname"><a href="namespace_barotrauma.html#acfb9793313a250b94330268f4815cf50">Barotrauma.CharacterTeamType</a></div><div class="ttdeci">CharacterTeamType</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_characters_2_character_8cs_source.html#l00020">BarotraumaShared/SharedSource/Characters/Character.cs:21</a></div></div>
<div class="ttc" id="anamespace_barotrauma_html_aef3e8dd1c7f82d86897cdd111f258f87ae0626222614bdee31951d84c64e5e9ff"><div class="ttname"><a href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87ae0626222614bdee31951d84c64e5e9ff">Barotrauma.InputType.Select</a></div><div class="ttdeci">@ Select</div></div>
<div class="ttc" id="anamespace_barotrauma_html_aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1"><div class="ttname"><a href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87aee97be03cb04119af45014d815621ce1">Barotrauma.InputType.Command</a></div><div class="ttdeci">@ Command</div></div>
<div class="ttc" id="anamespace_barotrauma_html_af22238dc2b76a4392541f8b2214c8108a7d74f3b92b19da5e606d737d339a9679"><div class="ttname"><a href="namespace_barotrauma.html#af22238dc2b76a4392541f8b2214c8108a7d74f3b92b19da5e606d737d339a9679">Barotrauma.WearableType.Item</a></div><div class="ttdeci">@ Item</div></div>
<div class="ttc" id="anamespace_barotrauma_html_af9e8b4c488b5c9a2ed4b9e967afd748f"><div class="ttname"><a href="namespace_barotrauma.html#af9e8b4c488b5c9a2ed4b9e967afd748f">Barotrauma.SubmarineTag</a></div><div class="ttdeci">SubmarineTag</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_map_2_submarine_info_8cs_source.html#l00018">BarotraumaShared/SharedSource/Map/SubmarineInfo.cs:19</a></div></div>
<div class="ttc" id="astruct_barotrauma_1_1_colored_text_html"><div class="ttname"><a href="struct_barotrauma_1_1_colored_text.html">Barotrauma.ColoredText</a></div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_debug_console_8cs_source.html#l00018">BarotraumaShared/SharedSource/DebugConsole.cs:19</a></div></div>
<div class="ttc" id="astruct_barotrauma_1_1_colored_text_html_a080ba7826281e8a67e50b14780f8f033"><div class="ttname"><a href="struct_barotrauma_1_1_colored_text.html#a080ba7826281e8a67e50b14780f8f033">Barotrauma.ColoredText.Time</a></div><div class="ttdeci">readonly string Time</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_debug_console_8cs_source.html#l00025">BarotraumaShared/SharedSource/DebugConsole.cs:25</a></div></div>
<div class="ttc" id="astruct_barotrauma_1_1_colored_text_html_a283f2ad5e8e5812eff469cec474674fb"><div class="ttname"><a href="struct_barotrauma_1_1_colored_text.html#a283f2ad5e8e5812eff469cec474674fb">Barotrauma.ColoredText.Color</a></div><div class="ttdeci">Color Color</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_debug_console_8cs_source.html#l00021">BarotraumaShared/SharedSource/DebugConsole.cs:21</a></div></div>
<div class="ttc" id="astruct_barotrauma_1_1_colored_text_html_a34f37e5adcaa519c94d1d98f48909fbb"><div class="ttname"><a href="struct_barotrauma_1_1_colored_text.html#a34f37e5adcaa519c94d1d98f48909fbb">Barotrauma.ColoredText.ColoredText</a></div><div class="ttdeci">ColoredText(string text, Color color, bool isCommand, bool isError)</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_debug_console_8cs_source.html#l00027">BarotraumaShared/SharedSource/DebugConsole.cs:27</a></div></div>
<div class="ttc" id="astruct_barotrauma_1_1_colored_text_html_aa10fe568d3f6cc5a4fd9f46f056b0de0"><div class="ttname"><a href="struct_barotrauma_1_1_colored_text.html#aa10fe568d3f6cc5a4fd9f46f056b0de0">Barotrauma.ColoredText.IsError</a></div><div class="ttdeci">bool IsError</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_debug_console_8cs_source.html#l00023">BarotraumaShared/SharedSource/DebugConsole.cs:23</a></div></div>
<div class="ttc" id="astruct_barotrauma_1_1_colored_text_html_ad7f88a7e81afb83c883c7134b715f5d8"><div class="ttname"><a href="struct_barotrauma_1_1_colored_text.html#ad7f88a7e81afb83c883c7134b715f5d8">Barotrauma.ColoredText.Text</a></div><div class="ttdeci">string Text</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_debug_console_8cs_source.html#l00020">BarotraumaShared/SharedSource/DebugConsole.cs:20</a></div></div>
<div class="ttc" id="astruct_barotrauma_1_1_colored_text_html_af8277a0d6446c9e9ef3f0572de673f8f"><div class="ttname"><a href="struct_barotrauma_1_1_colored_text.html#af8277a0d6446c9e9ef3f0572de673f8f">Barotrauma.ColoredText.IsCommand</a></div><div class="ttdeci">bool IsCommand</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_debug_console_8cs_source.html#l00022">BarotraumaShared/SharedSource/DebugConsole.cs:22</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_8575ad821fc3b469d94fde51c8787ee3.html">Barotrauma</a></li><li class="navelem"><a class="el" href="dir_8b99819d2ee30d5e48f0b0f8b94f385a.html">BarotraumaShared</a></li><li class="navelem"><a class="el" href="dir_37517cc6f95be7cb877361d257ae4695.html">SharedSource</a></li><li class="navelem"><b>DebugConsole.cs</b></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
