<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Barotrauma Server Doc: Barotrauma.UpgradeManager Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Barotrauma Server Doc
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('class_barotrauma_1_1_upgrade_manager.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="#events">Events</a> &#124;
<a href="class_barotrauma_1_1_upgrade_manager-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">Barotrauma.UpgradeManager Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>This class handles all upgrade logic. Storing, applying, checking and validation of upgrades.  
 <a href="class_barotrauma_1_1_upgrade_manager.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a7f0e2f1dde00102d5bd31d10e6b55ad0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_barotrauma_1_1_upgrade_manager.html#a7f0e2f1dde00102d5bd31d10e6b55ad0">UpgradeManager</a> (<a class="el" href="class_barotrauma_1_1_campaign_mode.html">CampaignMode</a> campaign)</td></tr>
<tr class="separator:a7f0e2f1dde00102d5bd31d10e6b55ad0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab45f6d9b9d07c437d6a340f33c49a1f2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_barotrauma_1_1_upgrade_manager.html#ab45f6d9b9d07c437d6a340f33c49a1f2">UpgradeManager</a> (<a class="el" href="class_barotrauma_1_1_campaign_mode.html">CampaignMode</a> campaign, XElement element, bool isSingleplayer)</td></tr>
<tr class="separator:ab45f6d9b9d07c437d6a340f33c49a1f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a20757bb4b9042403dff203d2d5140d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_barotrauma_1_1_upgrade_manager.html#a0a20757bb4b9042403dff203d2d5140d">DetermineItemSwapCost</a> (<a class="el" href="class_barotrauma_1_1_item.html">Item</a> item, <a class="el" href="class_barotrauma_1_1_item_prefab.html">ItemPrefab</a>? replacement)</td></tr>
<tr class="separator:a0a20757bb4b9042403dff203d2d5140d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac494821ce2febc6cf302d4cf4f2e91a3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_barotrauma_1_1_upgrade_manager.html#ac494821ce2febc6cf302d4cf4f2e91a3">PurchaseUpgrade</a> (UpgradePrefab prefab, UpgradeCategory category, bool force=false, <a class="el" href="class_barotrauma_1_1_networking_1_1_client.html">Client</a>? client=null)</td></tr>
<tr class="memdesc:ac494821ce2febc6cf302d4cf4f2e91a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Purchases an upgrade and handles logic for deducting the credit.  <a href="class_barotrauma_1_1_upgrade_manager.html#ac494821ce2febc6cf302d4cf4f2e91a3">More...</a><br /></td></tr>
<tr class="separator:ac494821ce2febc6cf302d4cf4f2e91a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8006cb3b61d0d6faf7be89b6b14d0ee8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_barotrauma_1_1_upgrade_manager.html#a8006cb3b61d0d6faf7be89b6b14d0ee8">PurchaseItemSwap</a> (<a class="el" href="class_barotrauma_1_1_item.html">Item</a> itemToRemove, <a class="el" href="class_barotrauma_1_1_item_prefab.html">ItemPrefab</a> itemToInstall, bool force=false, <a class="el" href="class_barotrauma_1_1_networking_1_1_client.html">Client</a>? client=null)</td></tr>
<tr class="memdesc:a8006cb3b61d0d6faf7be89b6b14d0ee8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Purchases an item swap and handles logic for deducting the credit.  <a href="class_barotrauma_1_1_upgrade_manager.html#a8006cb3b61d0d6faf7be89b6b14d0ee8">More...</a><br /></td></tr>
<tr class="separator:a8006cb3b61d0d6faf7be89b6b14d0ee8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44d817e63051de9a03cf86dfcc1c9182"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_barotrauma_1_1_upgrade_manager.html#a44d817e63051de9a03cf86dfcc1c9182">CancelItemSwap</a> (<a class="el" href="class_barotrauma_1_1_item.html">Item</a> itemToRemove, bool force=false)</td></tr>
<tr class="memdesc:a44d817e63051de9a03cf86dfcc1c9182"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cancels the currently pending item swap, or uninstalls the item if there's no swap pending  <a href="class_barotrauma_1_1_upgrade_manager.html#a44d817e63051de9a03cf86dfcc1c9182">More...</a><br /></td></tr>
<tr class="separator:a44d817e63051de9a03cf86dfcc1c9182"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c83153087e494de51c6cc8c58f71d78"><td class="memItemLeft" align="right" valign="top">List&lt; <a class="el" href="class_barotrauma_1_1_item.html">Item</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_barotrauma_1_1_upgrade_manager.html#a8c83153087e494de51c6cc8c58f71d78">GetLinkedItemsToSwap</a> (<a class="el" href="class_barotrauma_1_1_item.html">Item</a> item)</td></tr>
<tr class="separator:a8c83153087e494de51c6cc8c58f71d78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab95f06244abe3bb516f67f6bf222b10f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_barotrauma_1_1_upgrade_manager.html#ab95f06244abe3bb516f67f6bf222b10f">ApplyUpgrades</a> ()</td></tr>
<tr class="memdesc:ab95f06244abe3bb516f67f6bf222b10f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Applies all our pending upgrades to the submarine.  <a href="class_barotrauma_1_1_upgrade_manager.html#ab95f06244abe3bb516f67f6bf222b10f">More...</a><br /></td></tr>
<tr class="separator:ab95f06244abe3bb516f67f6bf222b10f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66d75521119262615ffc83730077a6fa"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_barotrauma_1_1_upgrade_manager.html#a66d75521119262615ffc83730077a6fa">CreateUpgradeErrorMessage</a> (string text, bool isSinglePlayer, <a class="el" href="class_barotrauma_1_1_character.html">Character</a> character)</td></tr>
<tr class="separator:a66d75521119262615ffc83730077a6fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95dee2c9c15c60da926d02dfa60f6f85"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_barotrauma_1_1_upgrade_manager.html#a95dee2c9c15c60da926d02dfa60f6f85">SanityCheckUpgrades</a> (<a class="el" href="class_barotrauma_1_1_submarine.html">Submarine</a> submarine)</td></tr>
<tr class="memdesc:a95dee2c9c15c60da926d02dfa60f6f85"><td class="mdescLeft">&#160;</td><td class="mdescRight">Validates that upgrade values stored in CampaignMetadata matches the values on the submarine and fixes any inconsistencies. Should be called after every round start right after <a class="el" href="class_barotrauma_1_1_upgrade_manager.html#ab95f06244abe3bb516f67f6bf222b10f" title="Applies all our pending upgrades to the submarine.">ApplyUpgrades</a>  <a href="class_barotrauma_1_1_upgrade_manager.html#a95dee2c9c15c60da926d02dfa60f6f85">More...</a><br /></td></tr>
<tr class="separator:a95dee2c9c15c60da926d02dfa60f6f85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0ac5f8321c3229bc9dcf4c27e087687"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_barotrauma_1_1_upgrade_manager.html#ae0ac5f8321c3229bc9dcf4c27e087687">GetUpgradeLevel</a> (UpgradePrefab prefab, UpgradeCategory category)</td></tr>
<tr class="memdesc:ae0ac5f8321c3229bc9dcf4c27e087687"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the progress that is shown on the store interface. Includes values stored in the metadata and <a class="el" href="class_barotrauma_1_1_upgrade_manager.html#a1aa01943cccffdf52b86210c4136b3e1">PendingUpgrades</a>  <a href="class_barotrauma_1_1_upgrade_manager.html#ae0ac5f8321c3229bc9dcf4c27e087687">More...</a><br /></td></tr>
<tr class="separator:ae0ac5f8321c3229bc9dcf4c27e087687"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3039b06a151cfbc12f19f34dc1f5e543"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_barotrauma_1_1_upgrade_manager.html#a3039b06a151cfbc12f19f34dc1f5e543">GetRealUpgradeLevel</a> (UpgradePrefab prefab, UpgradeCategory category)</td></tr>
<tr class="memdesc:a3039b06a151cfbc12f19f34dc1f5e543"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the level of the upgrade that is stored in the metadata.  <a href="class_barotrauma_1_1_upgrade_manager.html#a3039b06a151cfbc12f19f34dc1f5e543">More...</a><br /></td></tr>
<tr class="separator:a3039b06a151cfbc12f19f34dc1f5e543"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5060c93552b5edccf591f66e678d6849"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_barotrauma_1_1_upgrade_manager.html#a5060c93552b5edccf591f66e678d6849">CanUpgradeSub</a> ()</td></tr>
<tr class="separator:a5060c93552b5edccf591f66e678d6849"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a71854c3246f80bd30f13726ec341c0fe"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_barotrauma_1_1_upgrade_manager.html#a71854c3246f80bd30f13726ec341c0fe">Save</a> (XElement? parent)</td></tr>
<tr class="separator:a71854c3246f80bd30f13726ec341c0fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2eeefd430b29a095a8631b0c92491dc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_barotrauma_1_1_upgrade_manager.html#ac2eeefd430b29a095a8631b0c92491dc">SetPendingUpgrades</a> (List&lt; PurchasedUpgrade &gt; upgrades)</td></tr>
<tr class="memdesc:ac2eeefd430b29a095a8631b0c92491dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used to sync the pending upgrades list in multiplayer.  <a href="class_barotrauma_1_1_upgrade_manager.html#ac2eeefd430b29a095a8631b0c92491dc">More...</a><br /></td></tr>
<tr class="separator:ac2eeefd430b29a095a8631b0c92491dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a869cf6cd8a428fb040649cf08bc8db5e"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_barotrauma_1_1_upgrade_manager.html#a869cf6cd8a428fb040649cf08bc8db5e">LogError</a> (string text, Dictionary&lt; string, object?&gt; data, Exception? e=null)</td></tr>
<tr class="separator:a869cf6cd8a428fb040649cf08bc8db5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8aeec4c9578235bf5fb79e0da2e13ed6"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_barotrauma_1_1_upgrade_manager.html#a8aeec4c9578235bf5fb79e0da2e13ed6">DebugLog</a> (string msg, Color? color=null)</td></tr>
<tr class="separator:a8aeec4c9578235bf5fb79e0da2e13ed6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:abb90b672467a85652d7771181db9d785"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_barotrauma_1_1_upgrade_manager.html#abb90b672467a85652d7771181db9d785">CanUpgrade</a> = true</td></tr>
<tr class="memdesc:abb90b672467a85652d7771181db9d785"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prevents the player from upgrading the submarine when we are switching to a new one.  <a href="class_barotrauma_1_1_upgrade_manager.html#abb90b672467a85652d7771181db9d785">More...</a><br /></td></tr>
<tr class="separator:abb90b672467a85652d7771181db9d785"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afcc166ed50cb7a9994015cd5f1a818a1"><td class="memItemLeft" align="right" valign="top">readonly List&lt; PurchasedUpgrade &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_barotrauma_1_1_upgrade_manager.html#afcc166ed50cb7a9994015cd5f1a818a1">PurchasedUpgrades</a> = new List&lt;PurchasedUpgrade&gt;()</td></tr>
<tr class="memdesc:afcc166ed50cb7a9994015cd5f1a818a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is used by the client to notify the server which upgrades are yet to be paid for.  <a href="class_barotrauma_1_1_upgrade_manager.html#afcc166ed50cb7a9994015cd5f1a818a1">More...</a><br /></td></tr>
<tr class="separator:afcc166ed50cb7a9994015cd5f1a818a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1aa01943cccffdf52b86210c4136b3e1"><td class="memItemLeft" align="right" valign="top">readonly List&lt; PurchasedUpgrade &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_barotrauma_1_1_upgrade_manager.html#a1aa01943cccffdf52b86210c4136b3e1">PendingUpgrades</a> = new List&lt;PurchasedUpgrade&gt;()</td></tr>
<tr class="separator:a1aa01943cccffdf52b86210c4136b3e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7c253ecbd00f49af8a06e7d985d7313"><td class="memItemLeft" align="right" valign="top">readonly List&lt; PurchasedItemSwap &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_barotrauma_1_1_upgrade_manager.html#ad7c253ecbd00f49af8a06e7d985d7313">PurchasedItemSwaps</a> = new List&lt;PurchasedItemSwap&gt;()</td></tr>
<tr class="separator:ad7c253ecbd00f49af8a06e7d985d7313"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-attribs" name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:a5a75803f100e1bfee6095a6ee1fce5a6"><td class="memItemLeft" align="right" valign="top">const bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_barotrauma_1_1_upgrade_manager.html#a5a75803f100e1bfee6095a6ee1fce5a6">UpgradeAlsoConnectedSubs</a> = true</td></tr>
<tr class="memdesc:a5a75803f100e1bfee6095a6ee1fce5a6"><td class="mdescLeft">&#160;</td><td class="mdescRight">This one toggles whether or not connected submarines get upgraded too. Could probably be removed, I just didn't like magic numbers.  <a href="class_barotrauma_1_1_upgrade_manager.html#a5a75803f100e1bfee6095a6ee1fce5a6">More...</a><br /></td></tr>
<tr class="separator:a5a75803f100e1bfee6095a6ee1fce5a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="events" name="events"></a>
Events</h2></td></tr>
<tr class="memitem:ace82f4d224bce91b8ae078488aed6803"><td class="memItemLeft" align="right" valign="top">Action?&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_barotrauma_1_1_upgrade_manager.html#ace82f4d224bce91b8ae078488aed6803">OnUpgradesChanged</a></td></tr>
<tr class="separator:ace82f4d224bce91b8ae078488aed6803"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >This class handles all upgrade logic. Storing, applying, checking and validation of upgrades. </p>
<p >Upgrades are applied per item basis meaning each item has their own set of slots for upgrades. The store applies upgrades globally to categories of items so the purpose of this class is to keep those individual "upgrade slots" in sync. The target level of an upgrade is stored in the metadata and is what the store displays and modifies while this class will make sure that the upgrades on the items match the values stored in the metadata. </p>

<p class="definition">Definition at line <a class="el" href="_barotrauma_shared_2_shared_source_2_game_session_2_upgrade_manager_8cs_source.html#l00055">55</a> of file <a class="el" href="_barotrauma_shared_2_shared_source_2_game_session_2_upgrade_manager_8cs_source.html">BarotraumaShared/SharedSource/GameSession/UpgradeManager.cs</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a7f0e2f1dde00102d5bd31d10e6b55ad0" name="a7f0e2f1dde00102d5bd31d10e6b55ad0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f0e2f1dde00102d5bd31d10e6b55ad0">&#9670;&nbsp;</a></span>UpgradeManager() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Barotrauma.UpgradeManager.UpgradeManager </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_barotrauma_1_1_campaign_mode.html">CampaignMode</a>&#160;</td>
          <td class="paramname"><em>campaign</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_barotrauma_shared_2_shared_source_2_game_session_2_upgrade_manager_8cs_source.html#l00099">99</a> of file <a class="el" href="_barotrauma_shared_2_shared_source_2_game_session_2_upgrade_manager_8cs_source.html">BarotraumaShared/SharedSource/GameSession/UpgradeManager.cs</a>.</p>

</div>
</div>
<a id="ab45f6d9b9d07c437d6a340f33c49a1f2" name="ab45f6d9b9d07c437d6a340f33c49a1f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab45f6d9b9d07c437d6a340f33c49a1f2">&#9670;&nbsp;</a></span>UpgradeManager() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Barotrauma.UpgradeManager.UpgradeManager </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_barotrauma_1_1_campaign_mode.html">CampaignMode</a>&#160;</td>
          <td class="paramname"><em>campaign</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">XElement&#160;</td>
          <td class="paramname"><em>element</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>isSingleplayer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_barotrauma_shared_2_shared_source_2_game_session_2_upgrade_manager_8cs_source.html#l00107">107</a> of file <a class="el" href="_barotrauma_shared_2_shared_source_2_game_session_2_upgrade_manager_8cs_source.html">BarotraumaShared/SharedSource/GameSession/UpgradeManager.cs</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ab95f06244abe3bb516f67f6bf222b10f" name="ab95f06244abe3bb516f67f6bf222b10f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab95f06244abe3bb516f67f6bf222b10f">&#9670;&nbsp;</a></span>ApplyUpgrades()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Barotrauma.UpgradeManager.ApplyUpgrades </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Applies all our pending upgrades to the submarine. </p>
<p >Upgrades are applied similarly to how items on the submarine are spawned at the start of the round. Upgrades should be applied at the start of the round and after the round ends they are written into the submarine save and saved there. Because of the difficulty of accessing the actual <a class="el" href="class_barotrauma_1_1_submarine.html">Submarine</a> object from and outpost or when the campaign UI is created we modify levels that are shown on the store interface using campaign metadata.</p>
<p >This method should be called by both the client and the server during level generation. SetUpgradeLevel </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="class_barotrauma_1_1_upgrade_manager.html#ae0ac5f8321c3229bc9dcf4c27e087687" title="Gets the progress that is shown on the store interface. Includes values stored in the metadata and Pe...">GetUpgradeLevel</a></dd></dl>

<p class="definition">Definition at line <a class="el" href="_barotrauma_shared_2_shared_source_2_game_session_2_upgrade_manager_8cs_source.html#l00458">458</a> of file <a class="el" href="_barotrauma_shared_2_shared_source_2_game_session_2_upgrade_manager_8cs_source.html">BarotraumaShared/SharedSource/GameSession/UpgradeManager.cs</a>.</p>

</div>
</div>
<a id="a44d817e63051de9a03cf86dfcc1c9182" name="a44d817e63051de9a03cf86dfcc1c9182"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a44d817e63051de9a03cf86dfcc1c9182">&#9670;&nbsp;</a></span>CancelItemSwap()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Barotrauma.UpgradeManager.CancelItemSwap </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_barotrauma_1_1_item.html">Item</a>&#160;</td>
          <td class="paramname"><em>itemToRemove</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>force</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Cancels the currently pending item swap, or uninstalls the item if there's no swap pending </p>

<p class="definition">Definition at line <a class="el" href="_barotrauma_shared_2_shared_source_2_game_session_2_upgrade_manager_8cs_source.html#l00364">364</a> of file <a class="el" href="_barotrauma_shared_2_shared_source_2_game_session_2_upgrade_manager_8cs_source.html">BarotraumaShared/SharedSource/GameSession/UpgradeManager.cs</a>.</p>

</div>
</div>
<a id="a5060c93552b5edccf591f66e678d6849" name="a5060c93552b5edccf591f66e678d6849"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5060c93552b5edccf591f66e678d6849">&#9670;&nbsp;</a></span>CanUpgradeSub()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Barotrauma.UpgradeManager.CanUpgradeSub </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_barotrauma_shared_2_shared_source_2_game_session_2_upgrade_manager_8cs_source.html#l00714">714</a> of file <a class="el" href="_barotrauma_shared_2_shared_source_2_game_session_2_upgrade_manager_8cs_source.html">BarotraumaShared/SharedSource/GameSession/UpgradeManager.cs</a>.</p>

</div>
</div>
<a id="a66d75521119262615ffc83730077a6fa" name="a66d75521119262615ffc83730077a6fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a66d75521119262615ffc83730077a6fa">&#9670;&nbsp;</a></span>CreateUpgradeErrorMessage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Barotrauma.UpgradeManager.CreateUpgradeErrorMessage </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>text</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>isSinglePlayer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_barotrauma_1_1_character.html">Character</a>&#160;</td>
          <td class="paramname"><em>character</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_barotrauma_shared_2_shared_source_2_game_session_2_upgrade_manager_8cs_source.html#l00493">493</a> of file <a class="el" href="_barotrauma_shared_2_shared_source_2_game_session_2_upgrade_manager_8cs_source.html">BarotraumaShared/SharedSource/GameSession/UpgradeManager.cs</a>.</p>

</div>
</div>
<a id="a8aeec4c9578235bf5fb79e0da2e13ed6" name="a8aeec4c9578235bf5fb79e0da2e13ed6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8aeec4c9578235bf5fb79e0da2e13ed6">&#9670;&nbsp;</a></span>DebugLog()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void Barotrauma.UpgradeManager.DebugLog </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Color?&#160;</td>
          <td class="paramname"><em>color</em> = <code>null</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_barotrauma_shared_2_shared_source_2_game_session_2_upgrade_manager_8cs_source.html#l00808">808</a> of file <a class="el" href="_barotrauma_shared_2_shared_source_2_game_session_2_upgrade_manager_8cs_source.html">BarotraumaShared/SharedSource/GameSession/UpgradeManager.cs</a>.</p>

</div>
</div>
<a id="a0a20757bb4b9042403dff203d2d5140d" name="a0a20757bb4b9042403dff203d2d5140d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a20757bb4b9042403dff203d2d5140d">&#9670;&nbsp;</a></span>DetermineItemSwapCost()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Barotrauma.UpgradeManager.DetermineItemSwapCost </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_barotrauma_1_1_item.html">Item</a>&#160;</td>
          <td class="paramname"><em>item</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_barotrauma_1_1_item_prefab.html">ItemPrefab</a>?&#160;</td>
          <td class="paramname"><em>replacement</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_barotrauma_shared_2_shared_source_2_game_session_2_upgrade_manager_8cs_source.html#l00131">131</a> of file <a class="el" href="_barotrauma_shared_2_shared_source_2_game_session_2_upgrade_manager_8cs_source.html">BarotraumaShared/SharedSource/GameSession/UpgradeManager.cs</a>.</p>

</div>
</div>
<a id="a8c83153087e494de51c6cc8c58f71d78" name="a8c83153087e494de51c6cc8c58f71d78"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c83153087e494de51c6cc8c58f71d78">&#9670;&nbsp;</a></span>GetLinkedItemsToSwap()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">List&lt; <a class="el" href="class_barotrauma_1_1_item.html">Item</a> &gt; Barotrauma.UpgradeManager.GetLinkedItemsToSwap </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_barotrauma_1_1_item.html">Item</a>&#160;</td>
          <td class="paramname"><em>item</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_barotrauma_shared_2_shared_source_2_game_session_2_upgrade_manager_8cs_source.html#l00425">425</a> of file <a class="el" href="_barotrauma_shared_2_shared_source_2_game_session_2_upgrade_manager_8cs_source.html">BarotraumaShared/SharedSource/GameSession/UpgradeManager.cs</a>.</p>

</div>
</div>
<a id="a3039b06a151cfbc12f19f34dc1f5e543" name="a3039b06a151cfbc12f19f34dc1f5e543"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3039b06a151cfbc12f19f34dc1f5e543">&#9670;&nbsp;</a></span>GetRealUpgradeLevel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Barotrauma.UpgradeManager.GetRealUpgradeLevel </td>
          <td>(</td>
          <td class="paramtype">UpgradePrefab&#160;</td>
          <td class="paramname"><em>prefab</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UpgradeCategory&#160;</td>
          <td class="paramname"><em>category</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the level of the upgrade that is stored in the metadata. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">prefab</td><td></td></tr>
    <tr><td class="paramname">category</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="_barotrauma_shared_2_shared_source_2_game_session_2_upgrade_manager_8cs_source.html#l00698">698</a> of file <a class="el" href="_barotrauma_shared_2_shared_source_2_game_session_2_upgrade_manager_8cs_source.html">BarotraumaShared/SharedSource/GameSession/UpgradeManager.cs</a>.</p>

</div>
</div>
<a id="ae0ac5f8321c3229bc9dcf4c27e087687" name="ae0ac5f8321c3229bc9dcf4c27e087687"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae0ac5f8321c3229bc9dcf4c27e087687">&#9670;&nbsp;</a></span>GetUpgradeLevel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Barotrauma.UpgradeManager.GetUpgradeLevel </td>
          <td>(</td>
          <td class="paramtype">UpgradePrefab&#160;</td>
          <td class="paramname"><em>prefab</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UpgradeCategory&#160;</td>
          <td class="paramname"><em>category</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the progress that is shown on the store interface. Includes values stored in the metadata and <a class="el" href="class_barotrauma_1_1_upgrade_manager.html#a1aa01943cccffdf52b86210c4136b3e1">PendingUpgrades</a> </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">prefab</td><td></td></tr>
    <tr><td class="paramname">category</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="_barotrauma_shared_2_shared_source_2_game_session_2_upgrade_manager_8cs_source.html#l00679">679</a> of file <a class="el" href="_barotrauma_shared_2_shared_source_2_game_session_2_upgrade_manager_8cs_source.html">BarotraumaShared/SharedSource/GameSession/UpgradeManager.cs</a>.</p>

</div>
</div>
<a id="a869cf6cd8a428fb040649cf08bc8db5e" name="a869cf6cd8a428fb040649cf08bc8db5e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a869cf6cd8a428fb040649cf08bc8db5e">&#9670;&nbsp;</a></span>LogError()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void Barotrauma.UpgradeManager.LogError </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>text</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Dictionary&lt; string, object?&gt;&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Exception?&#160;</td>
          <td class="paramname"><em>e</em> = <code>null</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_barotrauma_shared_2_shared_source_2_game_session_2_upgrade_manager_8cs_source.html#l00786">786</a> of file <a class="el" href="_barotrauma_shared_2_shared_source_2_game_session_2_upgrade_manager_8cs_source.html">BarotraumaShared/SharedSource/GameSession/UpgradeManager.cs</a>.</p>

</div>
</div>
<a id="a8006cb3b61d0d6faf7be89b6b14d0ee8" name="a8006cb3b61d0d6faf7be89b6b14d0ee8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8006cb3b61d0d6faf7be89b6b14d0ee8">&#9670;&nbsp;</a></span>PurchaseItemSwap()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Barotrauma.UpgradeManager.PurchaseItemSwap </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_barotrauma_1_1_item.html">Item</a>&#160;</td>
          <td class="paramname"><em>itemToRemove</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_barotrauma_1_1_item_prefab.html">ItemPrefab</a>&#160;</td>
          <td class="paramname"><em>itemToInstall</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>force</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_barotrauma_1_1_networking_1_1_client.html">Client</a>?&#160;</td>
          <td class="paramname"><em>client</em> = <code>null</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Purchases an item swap and handles logic for deducting the credit. </p>

<p class="definition">Definition at line <a class="el" href="_barotrauma_shared_2_shared_source_2_game_session_2_upgrade_manager_8cs_source.html#l00263">263</a> of file <a class="el" href="_barotrauma_shared_2_shared_source_2_game_session_2_upgrade_manager_8cs_source.html">BarotraumaShared/SharedSource/GameSession/UpgradeManager.cs</a>.</p>

</div>
</div>
<a id="ac494821ce2febc6cf302d4cf4f2e91a3" name="ac494821ce2febc6cf302d4cf4f2e91a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac494821ce2febc6cf302d4cf4f2e91a3">&#9670;&nbsp;</a></span>PurchaseUpgrade()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Barotrauma.UpgradeManager.PurchaseUpgrade </td>
          <td>(</td>
          <td class="paramtype">UpgradePrefab&#160;</td>
          <td class="paramname"><em>prefab</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UpgradeCategory&#160;</td>
          <td class="paramname"><em>category</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>force</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_barotrauma_1_1_networking_1_1_client.html">Client</a>?&#160;</td>
          <td class="paramname"><em>client</em> = <code>null</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Purchases an upgrade and handles logic for deducting the credit. </p>
<p >Purchased upgrades are temporarily stored in <a class="el" href="class_barotrauma_1_1_upgrade_manager.html#a1aa01943cccffdf52b86210c4136b3e1">PendingUpgrades</a> and they are applied after the next round starts similarly how items are spawned in the stowage room after the round starts. </p>

<p class="definition">Definition at line <a class="el" href="_barotrauma_shared_2_shared_source_2_game_session_2_upgrade_manager_8cs_source.html#l00182">182</a> of file <a class="el" href="_barotrauma_shared_2_shared_source_2_game_session_2_upgrade_manager_8cs_source.html">BarotraumaShared/SharedSource/GameSession/UpgradeManager.cs</a>.</p>

</div>
</div>
<a id="a95dee2c9c15c60da926d02dfa60f6f85" name="a95dee2c9c15c60da926d02dfa60f6f85"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95dee2c9c15c60da926d02dfa60f6f85">&#9670;&nbsp;</a></span>SanityCheckUpgrades()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Barotrauma.UpgradeManager.SanityCheckUpgrades </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_barotrauma_1_1_submarine.html">Submarine</a>&#160;</td>
          <td class="paramname"><em>submarine</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Validates that upgrade values stored in CampaignMetadata matches the values on the submarine and fixes any inconsistencies. Should be called after every round start right after <a class="el" href="class_barotrauma_1_1_upgrade_manager.html#ab95f06244abe3bb516f67f6bf222b10f" title="Applies all our pending upgrades to the submarine.">ApplyUpgrades</a> </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">submarine</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_barotrauma_shared_2_shared_source_2_game_session_2_upgrade_manager_8cs_source.html#l00525">525</a> of file <a class="el" href="_barotrauma_shared_2_shared_source_2_game_session_2_upgrade_manager_8cs_source.html">BarotraumaShared/SharedSource/GameSession/UpgradeManager.cs</a>.</p>

</div>
</div>
<a id="a71854c3246f80bd30f13726ec341c0fe" name="a71854c3246f80bd30f13726ec341c0fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a71854c3246f80bd30f13726ec341c0fe">&#9670;&nbsp;</a></span>Save()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Barotrauma.UpgradeManager.Save </td>
          <td>(</td>
          <td class="paramtype">XElement?&#160;</td>
          <td class="paramname"><em>parent</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_barotrauma_shared_2_shared_source_2_game_session_2_upgrade_manager_8cs_source.html#l00721">721</a> of file <a class="el" href="_barotrauma_shared_2_shared_source_2_game_session_2_upgrade_manager_8cs_source.html">BarotraumaShared/SharedSource/GameSession/UpgradeManager.cs</a>.</p>

</div>
</div>
<a id="ac2eeefd430b29a095a8631b0c92491dc" name="ac2eeefd430b29a095a8631b0c92491dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2eeefd430b29a095a8631b0c92491dc">&#9670;&nbsp;</a></span>SetPendingUpgrades()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Barotrauma.UpgradeManager.SetPendingUpgrades </td>
          <td>(</td>
          <td class="paramtype">List&lt; PurchasedUpgrade &gt;&#160;</td>
          <td class="paramname"><em>upgrades</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Used to sync the pending upgrades list in multiplayer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">upgrades</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_barotrauma_shared_2_shared_source_2_game_session_2_upgrade_manager_8cs_source.html#l00801">801</a> of file <a class="el" href="_barotrauma_shared_2_shared_source_2_game_session_2_upgrade_manager_8cs_source.html">BarotraumaShared/SharedSource/GameSession/UpgradeManager.cs</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="abb90b672467a85652d7771181db9d785" name="abb90b672467a85652d7771181db9d785"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb90b672467a85652d7771181db9d785">&#9670;&nbsp;</a></span>CanUpgrade</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Barotrauma.UpgradeManager.CanUpgrade = true</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prevents the player from upgrading the submarine when we are switching to a new one. </p>
<p >In singleplayer we check if <a class="el" href="class_barotrauma_1_1_campaign_mode.html#a66194158db70cd7b8c871ee58c038dd8">CampaignMode.PendingSubmarineSwitch</a> is not null indicating we are switching submarines but in multiplayer that value is not synced so we use this variable instead by setting it to false in UpgradeManager.ClientRead and then set it back to true when the round ends in <a class="el" href="class_barotrauma_1_1_multi_player_campaign.html#a601ee9a506e93d6ee687f62100ac077f">MultiPlayerCampaign.End</a> </p>

<p class="definition">Definition at line <a class="el" href="_barotrauma_shared_2_shared_source_2_game_session_2_upgrade_manager_8cs_source.html#l00071">71</a> of file <a class="el" href="_barotrauma_shared_2_shared_source_2_game_session_2_upgrade_manager_8cs_source.html">BarotraumaShared/SharedSource/GameSession/UpgradeManager.cs</a>.</p>

</div>
</div>
<a id="a1aa01943cccffdf52b86210c4136b3e1" name="a1aa01943cccffdf52b86210c4136b3e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1aa01943cccffdf52b86210c4136b3e1">&#9670;&nbsp;</a></span>PendingUpgrades</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">readonly List&lt;PurchasedUpgrade&gt; Barotrauma.UpgradeManager.PendingUpgrades = new List&lt;PurchasedUpgrade&gt;()</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_barotrauma_shared_2_shared_source_2_game_session_2_upgrade_manager_8cs_source.html#l00090">90</a> of file <a class="el" href="_barotrauma_shared_2_shared_source_2_game_session_2_upgrade_manager_8cs_source.html">BarotraumaShared/SharedSource/GameSession/UpgradeManager.cs</a>.</p>

</div>
</div>
<a id="ad7c253ecbd00f49af8a06e7d985d7313" name="ad7c253ecbd00f49af8a06e7d985d7313"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad7c253ecbd00f49af8a06e7d985d7313">&#9670;&nbsp;</a></span>PurchasedItemSwaps</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">readonly List&lt;PurchasedItemSwap&gt; Barotrauma.UpgradeManager.PurchasedItemSwaps = new List&lt;PurchasedItemSwap&gt;()</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_barotrauma_shared_2_shared_source_2_game_session_2_upgrade_manager_8cs_source.html#l00092">92</a> of file <a class="el" href="_barotrauma_shared_2_shared_source_2_game_session_2_upgrade_manager_8cs_source.html">BarotraumaShared/SharedSource/GameSession/UpgradeManager.cs</a>.</p>

</div>
</div>
<a id="afcc166ed50cb7a9994015cd5f1a818a1" name="afcc166ed50cb7a9994015cd5f1a818a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afcc166ed50cb7a9994015cd5f1a818a1">&#9670;&nbsp;</a></span>PurchasedUpgrades</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">readonly List&lt;PurchasedUpgrade&gt; Barotrauma.UpgradeManager.PurchasedUpgrades = new List&lt;PurchasedUpgrade&gt;()</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This is used by the client to notify the server which upgrades are yet to be paid for. </p>
<p >In singleplayer this does nothing. </p>

<p class="definition">Definition at line <a class="el" href="_barotrauma_shared_2_shared_source_2_game_session_2_upgrade_manager_8cs_source.html#l00088">88</a> of file <a class="el" href="_barotrauma_shared_2_shared_source_2_game_session_2_upgrade_manager_8cs_source.html">BarotraumaShared/SharedSource/GameSession/UpgradeManager.cs</a>.</p>

</div>
</div>
<a id="a5a75803f100e1bfee6095a6ee1fce5a6" name="a5a75803f100e1bfee6095a6ee1fce5a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a75803f100e1bfee6095a6ee1fce5a6">&#9670;&nbsp;</a></span>UpgradeAlsoConnectedSubs</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const bool Barotrauma.UpgradeManager.UpgradeAlsoConnectedSubs = true</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This one toggles whether or not connected submarines get upgraded too. Could probably be removed, I just didn't like magic numbers. </p>

<p class="definition">Definition at line <a class="el" href="_barotrauma_shared_2_shared_source_2_game_session_2_upgrade_manager_8cs_source.html#l00061">61</a> of file <a class="el" href="_barotrauma_shared_2_shared_source_2_game_session_2_upgrade_manager_8cs_source.html">BarotraumaShared/SharedSource/GameSession/UpgradeManager.cs</a>.</p>

</div>
</div>
<h2 class="groupheader">Event Documentation</h2>
<a id="ace82f4d224bce91b8ae078488aed6803" name="ace82f4d224bce91b8ae078488aed6803"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace82f4d224bce91b8ae078488aed6803">&#9670;&nbsp;</a></span>OnUpgradesChanged</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Action? Barotrauma.UpgradeManager.OnUpgradesChanged</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_barotrauma_shared_2_shared_source_2_game_session_2_upgrade_manager_8cs_source.html#l00097">97</a> of file <a class="el" href="_barotrauma_shared_2_shared_source_2_game_session_2_upgrade_manager_8cs_source.html">BarotraumaShared/SharedSource/GameSession/UpgradeManager.cs</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespace_barotrauma.html">Barotrauma</a></li><li class="navelem"><a class="el" href="class_barotrauma_1_1_upgrade_manager.html">UpgradeManager</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3 </li>
  </ul>
</div>
</body>
</html>
